<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bing WebMaster -->
  <meta name="msvalidate.01" content="AB2FFF876C37F59D9121882CC8395DE5" />

  <title>How to compile and run Java in Container</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.codefarm.me/2021/11/01/compile-and-run-java-in-container/">
  <link rel="alternate" type="application/rss+xml" title="CODE FARM" href="https://blog.codefarm.me/feed.xml">

  <!--<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" />-->

  <!-- https://cdn.jsdelivr.net/gh/lurongkai/anti-baidu/js/anti-baidu-latest.min.js -->
<script type="text/javascript" src="/js/anti-baidu.min.js" charset="UTF-8"></script>

  
<!-- Google Analytics Website tracking -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83971182-1', 'auto');
  ga('send', 'pageview');

</script>


  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SN88FJ18E5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SN88FJ18E5');
</script>



</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <h2 class="site-title">
      <a class="site-title" href="/">CODE FARM</a>
    </h2>

     <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
        <div class="trigger">
            <ul>
                <li><a href="/">home</a>
                <li><a href="/category">category</a>
                <li><a href="/tag">tag</a>
                <li><a href="/archive">archive</a>
                <li><a href="/about">about</a>
                <li><a href="https://resume.github.io/?ousiax" target="_blank">R&eacute;sum&eacute;</a>
            </ul>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">How to compile and run Java in Container</h1>
    
    
    <p class="post-meta"><time datetime="2021-11-01T13:12:53+08:00" itemprop="datePublished">Jan 1, 2024</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#openjdk">1. OpenJDK</a></li>
<li><a href="#java-ee-and-jakarta-ee">2. Java EE and Jakarta EE</a></li>
<li><a href="#the-javac-command">3. The <strong>javac</strong> Command</a></li>
<li><a href="#the-java-command">4. The <strong>java</strong> Command</a>
<ul class="sectlevel2">
<li><a href="#overview-of-java-options">4.1. Overview of Java Options</a></li>
<li><a href="#standard-options-for-java">4.2. Standard Options for Java</a></li>
<li><a href="#extra-options-for-java">4.3. Extra Options for Java</a></li>
<li><a href="#advanced-options-for-java">4.4. Advanced Options for Java</a></li>
<li><a href="#advanced-runtime-options-for-java">4.5. Advanced Runtime Options for Java</a></li>
<li><a href="#advanced-jit-compiler-options-for-java">4.6. Advanced JIT Compiler Options for java</a></li>
<li><a href="#advanced-garbage-collection-options-for-java">4.7. Advanced Garbage Collection Options for Java</a></li>
<li><a href="#removed-java-options">4.8. Removed Java Options</a></li>
</ul>
</li>
<li><a href="#maven">5. Maven</a>
<ul class="sectlevel2">
<li><a href="#settings-xml">5.1. Settings XML</a></li>
<li><a href="#the-build-lifecycle">5.2. The Build Lifecycle</a>
<ul class="sectlevel3">
<li><a href="#a-build-lifecycle-is-made-up-of-phases">5.2.1. A Build Lifecycle is Made Up of Phases</a></li>
<li><a href="#a-build-phase-is-made-up-of-plugin-goals">5.2.2. A Build Phase is Made Up of Plugin Goals</a></li>
<li><a href="#setting-up-your-project-to-use-the-build-lifecycle">5.2.3. Setting Up Your Project to Use the Build Lifecycle</a></li>
</ul>
</li>
<li><a href="#pom">5.3. POM</a>
<ul class="sectlevel3">
<li><a href="#super-pom">5.3.1. Super POM</a></li>
<li><a href="#minimal-pom">5.3.2. Minimal POM</a></li>
<li><a href="#project-inheritance-vs-project-aggregation-or-multi-module">5.3.3. Project Inheritance vs Project Aggregation (or Multi-Module)</a></li>
</ul>
</li>
<li><a href="#standard-directory-layout">5.4. Standard Directory Layout</a></li>
<li><a href="#dependency-management">5.5. Dependency management</a></li>
<li><a href="#repositories">5.6. Repositories</a>
<ul class="sectlevel3">
<li><a href="#setting-up-multiple-repositories">5.6.1. Setting up Multiple Repositories</a></li>
<li><a href="#repository-order">5.6.2. Repository Order</a></li>
<li><a href="#using-mirrors-for-repositories">5.6.3. Using Mirrors for Repositories</a></li>
<li><a href="#advanced-mirror-specification">5.6.4. Advanced Mirror Specification</a></li>
</ul>
</li>
<li><a href="#configuring-plug-ins">5.7. Configuring Plug-ins</a></li>
<li><a href="#maven-help-plugin">5.8. Maven Help Plugin</a></li>
<li><a href="#maven-dependency-plugin">5.9. Maven Dependency Plugin</a></li>
<li><a href="#spring-boot-maven-plugin">5.10. Spring Boot Maven Plugin</a></li>
</ul>
</li>
<li><a href="#java-in-container">6. Java in Container</a>
<ul class="sectlevel2">
<li><a href="#container-detection-support">6.1. Container detection support</a></li>
<li><a href="#spring-boot-in-kubernetes">6.2. Spring Boot in Kubernetes</a></li>
</ul>
</li>
<li><a href="#java-programming-lanuage">7. Java programming lanuage</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="openjdk">1. OpenJDK</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>OpenJDK</strong> (<strong>Open Java Development Kit</strong>) is a free and open-source implementation of the Java Platform, Standard Edition (Java SE).<a href="#wikiopenjdk">[16]</a></p>
</div>
<div class="paragraph">
<p>The OpenJDK project produces a number of components: most importantly the virtual machine (HotSpot), the Java Class Library and the Java compiler (<code>javac</code>).<a href="#wikiopenjdk">[16]</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>HotSpot is a specific implementation of the JVM. It&#8217;s the most widely used JVM, developed and maintained by Oracle (and later by the OpenJDK community).</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>To build and run Java applications, a Java Compiler, Java Runtime Libraries, and a Virtual Machine are required that implement the Java Platform, Standard Edition (“Java SE”) specification.<a href="#whichjdk">[17]</a></p>
</div>
<div class="paragraph">
<p>The OpenJDK is the open source reference implementation of the Java SE Specification, but it is only the source code. Binary distributions are provided by different vendors for a number of supported platforms. These distributions differ in licenses, commercial support, supported platforms, and update frequency.<a href="#whichjdk">[17]</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
✅ Recommendation: Adoptium Eclipse Temurin OpenJDK builds are highly recommended.<a href="#whichjdk">[17]</a>
</td>
</tr>
</table>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Eclipse Temurin: ee-klips teh-muh-rin [ɪˈklɪps ˈtɛmərɪn]</p>
</div>
<div class="paragraph">
<p>Adoptium: uh-dop-tee-uhm [əˈdɒptiəm]</p>
</div>
<div class="paragraph">
<p>Note: The phonetic transcription is written using the International Phonetic Alphabet (IPA).</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For Debian/Linux Bookworm, the OpenJDK 17 binary packages are built and distributed by the Debian (/ˈdɛbiən/) project itself. The Debian maintainers compile the OpenJDK source code and package it for the Debian distribution. This ensures that the binaries are properly integrated with the Debian package management system and conform to Debian&#8217;s policies and standards.</p>
</div>
<div class="paragraph">
<p>When you install the default-jdk or openjdk-17-jdk package on Debian Bookworm, you are getting the OpenJDK 17 binary that has been built and distributed by the Debian project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>apt show default-jdk
<span class="go">Package: default-jdk
Version: 2:1.17-74
Depends: default-jre (= 2:1.17-74), default-jdk-headless (= 2:1.17-74), openjdk-17-jdk</span></code></pre>
</div>
</div>
</blockquote>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Build</th>
<th class="tableblock halign-left valign-top">Organization</th>
<th class="tableblock halign-left valign-top">LTS</th>
<th class="tableblock halign-left valign-top">Permissive license</th>
<th class="tableblock halign-left valign-top">TCK tested</th>
<th class="tableblock halign-left valign-top">Built unmodified</th>
<th class="tableblock halign-left valign-top">Commercial support</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AdoptOpenJDK</p>
<p class="tableblock">(moved to Eclipse Temurin in 2021)</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional (IBM)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon Corretto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional (on AWS)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azul Zulu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azul Systems</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BellSoft Liberica JDK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BellSoft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://en.wikipedia.org/wiki/Adoptium">Eclipse Temurin</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://adoptium.net/">Adoptium</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional (Azul, IBM, Red Hat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microsoft Build of OpenJDK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microsoft</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional (on Azure)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oracle GraalVM Enterprise Edition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oracle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oracle Java SE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oracle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oracle OpenJDK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oracle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Adoptium Eclipse Temurin</div>
<div class="paragraph">
<p>Eclipse Adoptium is a top-level project under the Eclipse Foundation, which provides resources and a professional governance model for open source software. The Adoptium Working Group consists of major companies and organizations that have a strategic interest in the Java technology, including Red Hat, IBM, Microsoft, Azul, and the iJUG. The former AdoptOpenJDK project has moved to Eclipse Adoptium.<a href="#whichjdk">[17]</a></p>
</div>
<div class="paragraph">
<p>The Adoptium OpenJDK builds are called Eclipse Temurin to distinguish the project from the builds.</p>
</div>
<div class="paragraph">
<p>Eclipse Temurin builds are high-quality, vendor-neutral, and TCK-tested under a permissive license.</p>
</div>
<div class="paragraph">
<p>Adoptium states, it will continue to build binaries for LTS releases as long as the corresponding upstream source is actively maintained.</p>
</div>
<div class="paragraph">
<p>✅ Recommendation: Adoptium Eclipse Temurin OpenJDK builds are highly recommended.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>curl -s "https://get.sdkman.io" | bash</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On Windows, you can use the <code>winget</code> to install Adoptium OpenJDK:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">&gt;</span><span class="w"> </span>winget <span class="nb">install </span>EclipseAdoptium.Temurin.21.JDK</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also find the location by opening your terminal and typing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">&gt;</span><span class="w"> </span>where java
<span class="go">C:\Program Files\Eclipse Adoptium\jdk-21.0.1.12-hotspot\bin\java.exe</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You would use the <code>mklink</code> command to create a symbolic link (also known as a soft link or symlink) in Windows 10 as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>mklink /D Link Target</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this command:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/D</code> makes a Directory symbolic link. Omit this to make a file symbolic link.</p>
</li>
<li>
<p><code>Link</code> is the path of the symbolic link.</p>
</li>
<li>
<p><code>Target</code> is the path of the target to which the symbolic link points.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="o">&gt;</span> <span class="nb">mklink</span> <span class="na">/D </span><span class="s2">"C:\Java\jdk-21-hotspot"</span> <span class="s2">"C:\Program Files\Eclipse Adoptium\jdk-21.0.1.12-hotspot"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: <code>mklink</code> requires Administrator privileges. So, you may need to run the Command Prompt as Administrator.</p>
</div>
<div class="paragraph">
<p>For creating hard links or junctions, you can use <code>/H</code> for a hard link (you can&#8217;t create hard directory links, only files), and <code>/J</code> for a junction (directory hard link). Do be careful with these options, though, as changes to the link or Junction will reflect in the original target.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="java-ee-and-jakarta-ee">2. Java EE and Jakarta EE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java EE (Java Enterprise Edition) and <a href="https://jakarta.ee/">Jakarta EE</a> are both frameworks for building enterprise-level applications in Java. They provide a set of specifications, APIs, and libraries for simplifying the development, deployment, and management of scalable, secure, and robust applications.</p>
</div>
<div class="paragraph">
<p><strong>Java EE</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java EE was developed by Sun Microsystems and later maintained by Oracle after its acquisition of Sun.</p>
</li>
<li>
<p>It is a widely used, standardized platform for creating server-side Java applications and web services.</p>
</li>
<li>
<p>Java EE provides a set of specifications and APIs for various services, such as servlets (/ˈsɜːvlɪts/), JavaServer Pages (JSP), Enterprise JavaBeans (EJB), Java Persistence API (JPA), Java Message Service (JMS), Java Transaction API (JTA), and many more.</p>
</li>
<li>
<p>Java EE has been the industry standard for building enterprise applications for many years, with numerous application servers implementing its specifications, such as GlassFish, WildFly, WebLogic, and WebSphere.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Jakarta EE</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In 2017, Oracle announced its intention to transfer the management of Java EE to the Eclipse Foundation, an open-source software foundation. As a result, Jakarta EE was born.</p>
</li>
<li>
<p>Jakarta EE is the evolution of Java EE, with the aim of fostering a more open and community-driven ecosystem for the development of enterprise Java applications.</p>
</li>
<li>
<p>The transition from Java EE to Jakarta EE involved renaming and rebranding, as well as re-licensing under the Eclipse Foundation&#8217;s intellectual property rules.</p>
</li>
<li>
<p>Jakarta EE is backward compatible with Java EE and continues to maintain the existing set of specifications and APIs, with plans for future innovation and enhancements.</p>
</li>
<li>
<p>Jakarta EE is supported by a diverse group of organizations, including Oracle, IBM, Red Hat, and many others, ensuring a strong future for the platform.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In summary, Java EE is the original, widely-used platform for building enterprise Java applications, while Jakarta EE is its successor under the Eclipse Foundation, aiming to foster a more open, community-driven, and innovative ecosystem. Both platforms provide a standardized set of specifications, APIs, and libraries for creating scalable, secure, and robust server-side applications and web services in Java.</p>
</div>
<hr>
<div class="paragraph">
<p>Migrating from Java EE to Jakarta EE is generally straightforward, as Jakarta EE is designed to be backward compatible with Java EE. However, there are some steps and considerations to ensure a smooth migration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update dependencies: Replace Java EE dependencies in your project with their corresponding Jakarta EE counterparts.</p>
<div class="paragraph">
<p>For example, update the <code>javax</code> packages to their <code>jakarta</code> equivalents in your project&#8217;s dependency management (e.g., Maven or Gradle). You may also need to update the versions of these dependencies to the latest Jakarta EE compatible versions.</p>
</div>
</li>
<li>
<p>Update package names: Starting from Jakarta EE 9, package names have been changed from <code>javax.*</code> to <code>jakarta.*</code>.</p>
<div class="paragraph">
<p>You&#8217;ll need to update the package names in your Java source code, XML configuration files, and any other places where the old package names are used. You can use tools like the Eclipse Transformer to help automate this process.</p>
</div>
</li>
<li>
<p>Update application server: Ensure that your application server supports Jakarta EE.</p>
<div class="paragraph">
<p>Most popular Java EE application servers, such as GlassFish, WildFly, OpenLiberty, and Payara, have corresponding Jakarta EE compatible versions. You may need to update the server version and configuration to be compatible with Jakarta EE.</p>
</div>
</li>
<li>
<p>Test your application: After updating dependencies, package names, and the application server, thoroughly test your application to ensure that it behaves as expected. Be sure to check for any issues or incompatibilities that may arise due to the migration.</p>
</li>
<li>
<p>Monitor deprecated features and future updates: Although Jakarta EE aims to maintain backward compatibility with Java EE, some features may be deprecated or removed in future releases. Keep an eye on Jakarta EE release notes and announcements to plan for any necessary updates or adjustments in your application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By following these steps, you can successfully migrate your Java EE application to Jakarta EE and take advantage of the ongoing improvements and innovations in the Jakarta EE ecosystem.</p>
</div>
<hr>
<div class="paragraph">
<p>With the transition from Java EE to Jakarta EE, the <code>javax.</code> packages have been replaced with <code>jakarta.</code> packages starting from Jakarta EE 9. This change was made due to legal and intellectual property reasons when Oracle transferred Java EE to the Eclipse Foundation.</p>
</div>
<div class="paragraph">
<p>The <code>javax.</code> packages will not be removed or deprecated immediately, but they will not receive new features or updates. The focus of future development, enhancements, and innovation will be on the <code>jakarta.</code> packages in the Jakarta EE ecosystem.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important for projects and applications that are still using the <code>javax.</code> packages to consider migrating to the <code>jakarta.</code> packages in the long term. This will ensure that they can take advantage of the ongoing improvements and new features in Jakarta EE.</p>
</div>
<div class="paragraph">
<p>While the <code>javax.</code> packages might not be deprecated in the short term, it is recommended that new projects use the <code>jakarta.</code> packages to ensure compatibility with future Jakarta EE releases and benefit from the active development and support of the Jakarta EE community.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-javac-command">3. The <strong>javac</strong> Command</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>javac</strong> command reads source files that contain module, package and type declarations written in the Java programming language, and compiles them into class files that run on the Java Virtual Machine. <a href="#specjava">[1]</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// Hello.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hello</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello Java!"</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">// Complile with 'javac'
</span><span class="gp">$</span><span class="w"> </span>javac Hello.java
<span class="go">
// Run with 'java'
</span><span class="gp">$</span><span class="w"> </span>java Hello
<span class="go">Hello Java!

// javac -d and java -cp
</span><span class="gp">$</span><span class="w"> </span>javac Hello.java <span class="nt">-d</span> target/classes/
<span class="gp">$</span><span class="w"> </span>java <span class="nt">-cp</span> target/classes/ Hello
<span class="go">Hello Java!</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-java-command">4. The <strong>java</strong> Command</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>java</strong> command starts a Java application. It does this by starting the Java Virtual Machine (JVM), loading the specified class, and calling that class&#8217;s <em>main()</em> method. The method must be declared <em>public</em> and <em>static</em>, it must not return any value, and it must accept a <em>String</em> array as a parameter. The method declaration has the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In source-file mode, the java command can launch a class declared in a source file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can use the <code>JDK_JAVA_OPTIONS</code> launcher environment variable to prepend its content to the actual command line of the java launcher.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">export JDK_JAVA_OPTIONS='-g @file1 -Dprop=value @file2 -Dws.prop="white spaces"'
</span><span class="gp">$</span><span class="w"> </span>java <span class="nt">-Xint</span> @file3</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>java <span class="nt">-g</span> @file1 <span class="nt">-Dprop</span><span class="o">=</span>value @file2 <span class="nt">-Dws</span>.prop<span class="o">=</span><span class="s2">"white spaces"</span> <span class="nt">-Xint</span> @file3</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By default, the first argument that isn&#8217;t an option of the java command is the fully qualified name of the class to be called. If <code>-jar</code> is specified, then its argument is the name of the JAR file containing class and resource files for the application. The startup class must be indicated by the <code>Main-Class</code> manifest header in its manifest file.</p>
</div>
<div class="paragraph">
<p>Arguments after the class file name or the JAR file name are passed to the <em>main()</em> method.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To launch a single source-file program</p>
<div class="ulist">
<ul>
<li>
<p>Synopsis</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">java [options] source-file [args ...]</span></code></pre>
</div>
</div>
</li>
<li>
<p><code>java Hello.java</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>java Hello.java
<span class="go">Hello Java!</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>To launch a class file</p>
<div class="ulist">
<ul>
<li>
<p>Synopsis</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">java [options] mainclass [args ...]</span></code></pre>
</div>
</div>
</li>
<li>
<p>java Hello</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>javac Hello.java
<span class="gp">$</span><span class="w"> </span>java Hello
<span class="go">Hello Java!</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>To launch the main class in a JAR file</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">java [options] -jar jarfile [args ...]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>jarfile</em> argument is the name of a JAR file with a manifest that contains a line in the form <code>Main-Class:classname</code> that defines the class with the <code>public static void main(String[] args)</code> method that serves as your application&#8217;s starting point.</p>
</div>
<div class="paragraph">
<p>When you use <code>-jar</code>, the specified JAR file is the source of all user classes, and other class path settings are ignored.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">The <code>jar</code> command</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">jar [OPTION ...] [ [--release VERSION] [-C dir] files] ...</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>jar <span class="nt">-cf</span> foo.jar Hello.class
<span class="gp">$</span><span class="w"> </span>java <span class="nt">-cp</span> foo.jar Hello
<span class="go">Hello Java!</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>java <span class="nt">-jar</span> foo.jar
<span class="hll"><span class="go">no main manifest attribute, in foo.jar</span>
</span>
<span class="gp">$</span><span class="w"> </span>jar <span class="nt">--create</span> <span class="nt">--file</span> buz.jar <span class="nt">--main-class</span> Hello Hello.class
<span class="gp">$</span><span class="w"> </span>java <span class="nt">-jar</span> buz.jar
<span class="go">Hello Java!</span>

<span class="gp">$</span><span class="w"> </span>jar xf buz.jar META-INF/
<span class="gp">$</span><span class="w"> </span><span class="nb">cat </span>META-INF/MANIFEST.MF
<span class="go">Manifest-Version: 1.0</span>
<span class="go">Created-By: 11.0.12 (Debian)</span>
<span class="hll"><span class="go">Main-Class: Hello</span>
</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="overview-of-java-options">4.1. Overview of Java Options</h3>
<div class="paragraph">
<p>The <strong>java</strong> command supports a wide range of options in the following categories: <a href="#cmdjava">[2]</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Standard Options</strong>:</p>
<div class="paragraph">
<p>Options guaranteed to be supported by all implementations of the Java Virtual Machine (JVM).</p>
</div>
<div class="paragraph">
<p>They&#8217;re used for common actions, such as checking the version of the JRE, setting the class path, enabling verbose output, and so on.</p>
</div>
</li>
<li>
<p><strong>Extra Options</strong>:</p>
<div class="paragraph">
<p>General purpose options that are specific to the Java HotSpot Virtual Machine.</p>
</div>
<div class="paragraph">
<p>They aren&#8217;t guaranteed to be supported by all JVM implementations, and are subject to change. These options start with <strong>-X</strong>.</p>
</div>
</li>
<li>
<p><strong>Advanced Options</strong></p>
<div class="paragraph">
<p>The advanced options aren&#8217;t recommended for casual use. These are developer options used for tuning specific areas of the Java HotSpot Virtual Machine operation that often have specific system requirements and may require privileged access to system configuration parameters.</p>
</div>
<div class="paragraph">
<p>These options aren&#8217;t guaranteed to be supported by all JVM implementations and are subject to change. These options start with <strong>-XX</strong>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><strong>Runtime Options</strong>:</p>
<div class="paragraph">
<p>Control the runtime behavior of the Java HotSpot VM.</p>
</div>
</li>
<li>
<p><strong>JIT Compiler Options</strong>:</p>
<div class="paragraph">
<p>Control the dynamic just-in-time (JIT) compilation performed by the Java HotSpot VM.</p>
</div>
</li>
<li>
<p><strong>Serviceability Options</strong>:</p>
<div class="paragraph">
<p>Enable gathering system information and performing extensive debugging.</p>
</div>
</li>
<li>
<p><strong>Garbage Collection Options</strong>:</p>
<div class="paragraph">
<p>Control how garbage collection (GC) is performed by the Java HotSpot</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>Boolean -XX options</em> are enabled using the plus sign (<code>-XX:+OptionName</code>) and disabled using the minus sign (<code>-XX:-OptionName</code>).
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For <strong>options that require an argument</strong>, the argument may be</p>
</div>
<div class="ulist">
<ul>
<li>
<p>separated from the option name by a <code>space</code>, a <code>colon</code> (:), or an <code>equal sign</code> (=), or</p>
</li>
<li>
<p>the argument may <code>directly follow the option</code> (the exact syntax differs for each option).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you&#8217;re expected to <code>specify the size in bytes</code>, then you can use no suffix, or use the suffix <code>k</code> or <code>K</code> for kilobytes (KB), <code>m</code> or <code>M</code> for megabytes (MB), or <code>g</code> or <code>G</code> for gigabytes (GB).</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For example, to set the size to 8 GB, you can specify either 8g, 8192m, 8388608k, or 8589934592 as the argument.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>If you are expected to <code>specify the percentage</code>, then use a number from <code>0</code> to <code>1</code>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For example, specify <code>0.25</code> for 25%.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="standard-options-for-java">4.2. Standard Options for Java</h3>
<div class="paragraph">
<p>These are the most commonly used options supported by all implementations of the JVM.</p>
</div>
<div class="paragraph">
<p>To specify an argument for a long option, you can use either <code>--name=value</code> or <code>--name value</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>--class-path <em>classpath</em>, -classpath <em>classpath</em>, or <strong>-cp</strong> <em>classpath</em></p>
<div class="paragraph">
<p>A semicolon (<code>;</code>) separated list of <strong>directories</strong>, <strong>JAR</strong> archives, and <strong>ZIP</strong> archives to search for class files. Specifying classpath overrides any setting of the <strong>CLASSPATH</strong> environment variable.</p>
</div>
<div class="paragraph">
<p>If the class path option isn&#8217;t used and classpath isn&#8217;t set, then the user class path consists of the current directory (<code>.</code>).</p>
</div>
<div class="paragraph">
<p>As a special convenience, a class path element that contains a base name of an asterisk (<code>*</code>) is considered equivalent to specifying a list of all the files in the directory with the extension <em>.jar</em> or <em>.JAR</em> .</p>
</div>
<div class="paragraph">
<p>A Java program can&#8217;t tell the difference between the two invocations.</p>
</div>
<div class="paragraph">
<p>For example, if the directory <em>mydir</em> contains <em>a.jar</em> and <em>b.JAR</em>, then the class path element <em>mydir/*</em> is expanded to <em>A.jar:b.JAR</em>, except that the order of JAR files is unspecified. All <em>.jar</em> files in the specified directory, even hidden ones, are included in the list.</p>
</div>
<div class="paragraph">
<p>A class path entry consisting of an asterisk (<code>*</code>) expands to a list of all the jar files in the current directory.</p>
</div>
<div class="paragraph">
<p>The CLASSPATH environment variable, where defined, is similarly expanded.</p>
</div>
<div class="paragraph">
<p>Any class path wildcard expansion that occurs before the Java VM is started.</p>
</div>
<div class="paragraph">
<p>Java programs never see wildcards that aren&#8217;t expanded except by querying the environment, such as by calling <code>System.getenv("CLASSPATH")</code>.</p>
</div>
</li>
<li>
<p>--list-modules</p>
<div class="paragraph">
<p>Lists the observable modules and then exits.</p>
</div>
</li>
<li>
<p>-d <em>module_name</em> or --describe-module <em>module_name</em></p>
<div class="paragraph">
<p>Describes a specified module and then exits.</p>
</div>
</li>
<li>
<p>--dry-run</p>
<div class="paragraph">
<p>Creates the VM but doesn&#8217;t execute the main method.</p>
</div>
<div class="paragraph">
<p>This <strong>--dry-run</strong> option might be useful for validating the command-line options such as the module system configuration.</p>
</div>
</li>
<li>
<p>--validate-modules</p>
<div class="paragraph">
<p>Validates all modules and exit. This option is helpful for finding conflicts and other errors with modules on the module path.</p>
</div>
</li>
<li>
<p><strong>-D</strong>property=value</p>
<div class="paragraph">
<p>Sets a system property value.</p>
</div>
<div class="paragraph">
<p>The property variable is a string with no spaces that represents the name of the property. The value variable is a string that represents the value of the property.</p>
</div>
<div class="paragraph">
<p>If value is a string with spaces, then enclose it in quotation marks (for example <em>-Dfoo="foo bar"</em>).</p>
</div>
</li>
<li>
<p>-verbose:class</p>
<div class="paragraph">
<p>Displays information about each loaded class.</p>
</div>
</li>
<li>
<p><strong>-verbose:gc</strong></p>
<div class="paragraph">
<p>Displays information about each garbage collection (GC) event.</p>
</div>
</li>
<li>
<p>-verbose:jni</p>
<div class="paragraph">
<p>Displays information about the use of native methods and other Java Native Interface (JNI) activity.</p>
</div>
</li>
<li>
<p>-verbose:module</p>
<div class="paragraph">
<p>Displays information about the modules in use.</p>
</div>
</li>
<li>
<p><strong>-X</strong></p>
<div class="paragraph">
<p>Prints the help on extra options to the error stream.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="extra-options-for-java">4.3. Extra Options for Java</h3>
<div class="paragraph">
<p>The following java options are general purpose options that are specific to the Java HotSpot Virtual Machine.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-Xlog:option</p>
<div class="paragraph">
<p>Configure or enable logging with the Java Virtual Machine (JVM) unified logging framework.</p>
</div>
</li>
<li>
<p>-Xinternalversion</p>
<div class="paragraph">
<p>Displays more detailed JVM version information than the -version option, and then exits.</p>
</div>
</li>
<li>
<p><strong>-Xmn</strong> <em>size</em></p>
<div class="paragraph">
<p>Sets the initial and maximum size (in bytes) of the heap for the <strong>young generation</strong> (nursery) in the generational collectors.</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The young generation region of the heap is used for new objects.</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>GC is performed in this region more often than in other regions.</p>
</li>
<li>
<p>If the size for the young generation is too small, then a lot of minor garbage collections are performed.</p>
</li>
<li>
<p>If the size is too large, then only full garbage collections are performed, which can take a long time to complete.</p>
</li>
<li>
<p>It is recommended that you do not set the size for the young generation for the G1 collector, and keep the size for the young generation greater than 25% and less than 50% of the overall heap size for other collectors.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The following examples show how to set the initial and maximum size of young generation to 256 MB using various units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-Xmn256m
-Xmn262144k
-Xmn268435456</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of the <strong>-Xmn</strong> option to set both the initial and maximum size of the heap for the young generation, you can use <strong>-XX:NewSize</strong> to set the initial size and <strong>-XX:MaxNewSize</strong> to set the maximum size.</p>
</div>
</li>
<li>
<p><strong>-Xms</strong> <em>size</em></p>
<div class="paragraph">
<p>Sets the minimum and initial size (in bytes) of the heap.</p>
</div>
<div class="paragraph">
<p>This value must be a multiple of 1024 and greater than 1 MB.</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The following examples show how to set the size of allocated memory to 6 MB using various units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-Xms6291456
-Xms6144k
-Xms6m</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of the <strong>-Xms</strong> option to set both the minimum and initial size of the heap, you can use <strong>-XX:MinHeapSize</strong> to set the minimum size and <strong>-XX:InitialHeapSize</strong> to set the initial size.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t set this option, the initial size is set as the sum of the sizes allocated for the old generation and the young generation.</p>
</div>
<div class="paragraph">
<p>The initial size of the heap for the young generation can be set using the <strong>-Xmn</strong> option or the <strong>-XX:NewSize</strong> option.</p>
</div>
</li>
<li>
<p><strong>-Xmx</strong> <em>size</em></p>
<div class="paragraph">
<p>Specifies the maximum size (in bytes) of the heap.</p>
</div>
<div class="paragraph">
<p>This value must be a multiple of 1024 and greater than 2 MB.</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The default value is chosen at runtime based on system configuration.</p>
</div>
<div class="paragraph">
<p>For server deployments, <strong>-Xms</strong> and <strong>-Xmx</strong> are often set to the same value.</p>
</div>
<div class="paragraph">
<p>The following examples show how to set the maximum allowed size of allocated memory to 80 MB using various units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-Xmx83886080
-Xmx81920k
-Xmx80m</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>-Xmx</strong> option is equivalent to <strong>-XX:MaxHeapSize</strong>.</p>
</div>
</li>
<li>
<p>-XshowSettings</p>
<div class="paragraph">
<p>Shows all settings and then continues.</p>
</div>
</li>
<li>
<p><strong>-XshowSettings</strong>:<em>category</em></p>
<div class="paragraph">
<p>Shows settings and continues.</p>
</div>
<div class="paragraph">
<p>Possible category arguments for this option include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all</p>
<div class="paragraph">
<p>Shows all categories of settings. This is the default value.</p>
</div>
</li>
<li>
<p>locale</p>
<div class="paragraph">
<p>Shows settings related to locale.</p>
</div>
</li>
<li>
<p>properties</p>
<div class="paragraph">
<p>Shows settings related to system properties.</p>
</div>
</li>
<li>
<p>vm</p>
<div class="paragraph">
<p>Shows the settings of the JVM.</p>
</div>
</li>
<li>
<p>system</p>
<div class="paragraph">
<p>Linux: Shows host system or container configuration and continues.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>-Xss</strong> <em>size</em></p>
<div class="paragraph">
<p>Sets the thread stack size (in bytes).</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The default value depends on the platform:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Linux/x64 (64-bit): 1024 KB</p>
</li>
<li>
<p>macOS (64-bit): 1024 KB</p>
</li>
<li>
<p>Windows: The default value depends on virtual memory</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The following examples set the thread stack size to 1024 KB in different units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-Xss1m
-Xss1024k
-Xss1048576</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This option is similar to <strong>-XX:ThreadStackSize</strong>.</p>
</div>
</li>
<li>
<p>--source version</p>
<div class="paragraph">
<p>Sets the version of the source in source-file mode.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="advanced-options-for-java">4.4. Advanced Options for Java</h3>
<div class="paragraph">
<p>These java options can be used to enable other advanced options.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-XX:+UnlockDiagnosticVMOptions</p>
<div class="paragraph">
<p>Unlocks the options intended for diagnosing the JVM. By default, this option is disabled and diagnostic options aren&#8217;t available.</p>
</div>
<div class="paragraph">
<p>Command line options that are enabled with the use of this option are not supported. If you encounter issues while using any of these options, it is very likely that you will be required to reproduce the problem without using any of these unsupported options before Oracle Support can assist with an investigation. It is also possible that any of these options may be removed or their behavior changed without any warning.</p>
</div>
</li>
<li>
<p>-XX:+UnlockExperimentalVMOptions</p>
<div class="paragraph">
<p>Unlocks the options that provide experimental features in the JVM. By default, this option is disabled and experimental features aren&#8217;t available.</p>
</div>
</li>
<li>
<p><strong>-XX:+PrintFlagsInitial</strong></p>
<div class="paragraph">
<p>Print all the default values of all XX flags.</p>
</div>
</li>
<li>
<p><strong>-XX:+PrintFlagsFinal</strong></p>
<div class="paragraph">
<p>Print all the current values to all XX flags.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="advanced-runtime-options-for-java">4.5. Advanced Runtime Options for Java</h3>
<div class="paragraph">
<p>These java options control the runtime behavior of the Java HotSpot VM.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-XX:ActiveProcessorCount=<em>x</em></p>
<div class="paragraph">
<p>Overrides the number of CPUs that the VM will use to calculate the size of thread pools it will use for various operations such as Garbage Collection and ForkJoinPool.</p>
</div>
<div class="paragraph">
<p>The VM normally determines the number of available processors from the operating system.</p>
</div>
<div class="paragraph">
<p>This flag can be useful for partitioning CPU resources when running multiple Java processes in docker containers.</p>
</div>
<div class="paragraph">
<p>This flag is honored even if <em>-XX:-UseContainerSupport</em> is not enabled.</p>
</div>
</li>
<li>
<p><strong>-XX:MaxDirectMemorySize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the maximum total size (in bytes) of the java.nio package, direct-buffer allocations.</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>By default, the size is set to <code>0</code>, meaning that the JVM chooses the size for NIO direct-buffer allocations automatically.</p>
</div>
<div class="paragraph">
<p>The following examples illustrate how to set the NIO size to 1024 KB in different units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MaxDirectMemorySize=1m
-XX:MaxDirectMemorySize=1024k
-XX:MaxDirectMemorySize=1048576</span></code></pre>
</div>
</div>
</li>
<li>
<p>-XX:NativeMemoryTracking=<em>mode</em></p>
<div class="paragraph">
<p>Specifies the mode for tracking JVM native memory usage.</p>
</div>
<div class="paragraph">
<p>Possible mode arguments for this option include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>off</p>
<div class="paragraph">
<p>Instructs not to track JVM native memory usage.</p>
</div>
<div class="paragraph">
<p>This is the default behavior if you don&#8217;t specify the <em>-XX:NativeMemoryTracking</em> option.</p>
</div>
</li>
<li>
<p>summary</p>
<div class="paragraph">
<p>Tracks memory usage only by JVM subsystems, such as Java heap, class, code, and thread.</p>
</div>
</li>
<li>
<p>detail</p>
<div class="paragraph">
<p>In addition to tracking memory usage by JVM subsystems, track memory usage by individual CallSite, individual virtual memory region and its committed regions.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>-XX:OnError=<em>string</em></p>
<div class="paragraph">
<p>Sets a custom command or a series of semicolon-separated commands to run when an irrecoverable error occurs.</p>
</div>
<div class="paragraph">
<p>If the string contains spaces, then it must be enclosed in quotation marks.</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Linux and macOS:</p>
<div class="paragraph">
<p>The following example shows how the <em>-XX:OnError</em> option can be used to run the gcore command to create a core image, and start the gdb debugger to attach to the process in case of an irrecoverable error (the %p designates the current process identifier):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">-XX:OnError="gcore %p;</span>gdb <span class="nt">-p</span> %p<span class="s2">"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Windows:</p>
<div class="paragraph">
<p>The following example shows how the <em>-XX:OnError</em> option can be used to run the userdump.exe utility to obtain a crash dump in case of an irrecoverable error (the %p designates the current process identifier).</p>
</div>
<div class="paragraph">
<p>This example assumes that the path to the userdump.exe utility is specified in the PATH environment variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:OnError="userdump.exe %p"</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>-XX:OnOutOfMemoryError=<em>string</em></p>
<div class="paragraph">
<p>Sets a custom command or a series of semicolon-separated commands to run when an OutOfMemoryError exception is first thrown.</p>
</div>
<div class="paragraph">
<p>If the string contains spaces, then it must be enclosed in quotation marks.</p>
</div>
<div class="paragraph">
<p>For an example of a command string, see the description of the <strong>-XX:OnError</strong> option.</p>
</div>
</li>
<li>
<p><strong>-XX:+PrintCommandLineFlags</strong></p>
<div class="paragraph">
<p>Enables printing of ergonomically selected JVM flags that appeared on the command line.</p>
</div>
<div class="paragraph">
<p>It can be useful to know the ergonomic values set by the JVM, such as the heap space size and the selected garbage collector.</p>
</div>
<div class="paragraph">
<p>By default, this option is disabled and flags aren&#8217;t printed.</p>
</div>
</li>
<li>
<p>-XX:+PrintNMTStatistics</p>
<div class="paragraph">
<p>Enables printing of collected native memory tracking data at JVM exit when native memory tracking is enabled (see <em>-XX:NativeMemoryTracking</em>).</p>
</div>
<div class="paragraph">
<p>By default, this option is disabled and native memory tracking data isn&#8217;t printed.</p>
</div>
</li>
<li>
<p><strong>-XX:ThreadStackSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the Java thread stack size (in kilobytes).</p>
</div>
<div class="paragraph">
<p>Use of a scaling suffix, such as k, results in the scaling of the kilobytes value so that <em>-XX:ThreadStackSize=1k</em> sets the Java thread stack size to 1024*1024 bytes or 1 megabyte.</p>
</div>
<div class="paragraph">
<p>The default value depends on the platform:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Linux/x64 (64-bit): 1024 KB</p>
</li>
<li>
<p>macOS (64-bit): 1024 KB</p>
</li>
<li>
<p>Windows: The default value depends on virtual memory</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The following examples show how to set the thread stack size to 1 megabyte in different units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:ThreadStackSize=1k
-XX:ThreadStackSize=1024</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This option is similar to <strong>-Xss</strong>.</p>
</div>
</li>
<li>
<p><strong>-XX:-UseContainerSupport</strong></p>
<div class="paragraph">
<p>The VM now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers.</p>
</div>
<div class="paragraph">
<p>It uses this information to allocate system resources.</p>
</div>
<div class="paragraph">
<p>This support is only available on Linux x64 platforms.</p>
</div>
<div class="paragraph">
<p>If supported, the default for this flag is true, and container support is enabled by default.</p>
</div>
<div class="paragraph">
<p>It can be disabled with <strong>-XX:-UseContainerSupport</strong>.</p>
</div>
<div class="paragraph">
<p>Unified Logging is available to help to diagnose issues related to this support.</p>
</div>
<div class="paragraph">
<p>Use <strong>-Xlog:os+container=trace</strong> for maximum logging of container information.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="advanced-jit-compiler-options-for-java">4.6. Advanced JIT Compiler Options for java</h3>
<div class="paragraph">
<p>These java options control the dynamic just-in-time (JIT) compilation performed by the Java HotSpot VM.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-XX:InitialCodeCacheSize=<em>size</em></p>
<div class="paragraph">
<p>Sets the initial code cache size (in bytes).</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The default value depends on the platform.</p>
</div>
<div class="paragraph">
<p>The initial code cache size shouldn&#8217;t be less than the system&#8217;s minimal memory page size.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the initial code cache size to 32 KB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:InitialCodeCacheSize=32k</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>-XX:ReservedCodeCacheSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the maximum code cache size (in bytes) for JIT-compiled code.</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The default maximum code cache size is 240 MB; if you disable tiered compilation with the option <strong>-XX:-TieredCompilation</strong>, then the default size is 48 MB.</p>
</div>
<div class="paragraph">
<p>This option has a limit of 2 GB; otherwise, an error is generated.</p>
</div>
<div class="paragraph">
<p>The maximum code cache size shouldn&#8217;t be less than the initial code cache size; see the option <strong>-XX:InitialCodeCacheSize</strong>.</p>
</div>
</li>
<li>
<p><strong>-XX:-TieredCompilation</strong></p>
<div class="paragraph">
<p>Disables the use of tiered compilation.</p>
</div>
<div class="paragraph">
<p>By default, this option is enabled.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="advanced-garbage-collection-options-for-java">4.7. Advanced Garbage Collection Options for Java</h3>
<div class="paragraph">
<p>These java options control how garbage collection (GC) is performed by the Java HotSpot VM.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-XX:ConcGCThreads=<em>threads</em></p>
<div class="paragraph">
<p>Sets the number of threads used for concurrent GC.</p>
</div>
<div class="paragraph">
<p>Sets threads to approximately 1/4 of the number of parallel garbage collection threads.</p>
</div>
<div class="paragraph">
<p>The default value depends on the number of CPUs available to the JVM.</p>
</div>
<div class="paragraph">
<p>For example, to set the number of threads for concurrent GC to 2, specify the following option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:ConcGCThreads=2</span></code></pre>
</div>
</div>
</li>
<li>
<p>-XX:+DisableExplicitGC</p>
<div class="paragraph">
<p>Enables the option that disables processing of calls to the <strong>System.gc()</strong> method.</p>
</div>
<div class="paragraph">
<p>This option is disabled by default, meaning that calls to System.gc() are processed.</p>
</div>
<div class="paragraph">
<p>If processing of calls to System.gc() is disabled, then the JVM still performs GC when necessary.</p>
</div>
</li>
<li>
<p>-XX:+ExplicitGCInvokesConcurrent</p>
<div class="paragraph">
<p>Enables invoking of concurrent GC by using the <strong>System.gc()</strong> request.</p>
</div>
<div class="paragraph">
<p>This option is disabled by default and can be enabled only with the <strong>-XX:+UseG1GC</strong> option.</p>
</div>
</li>
<li>
<p>-XX:InitialHeapSize=<em>size</em></p>
<div class="paragraph">
<p>Sets the initial size (in bytes) of the memory allocation pool.</p>
</div>
<div class="paragraph">
<p>This value must be either 0, or a multiple of 1024 and greater than 1 MB.</p>
</div>
<div class="paragraph">
<p>Append the letter k or K to indicate kilobytes, m or M to indicate megabytes, or g or G to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The default value is selected at run time based on the system configuration.</p>
</div>
<div class="paragraph">
<p>The following examples show how to set the size of allocated memory to 6 MB using various units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:InitialHeapSize=6291456
-XX:InitialHeapSize=6144k
-XX:InitialHeapSize=6m</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you set this option to 0, then the initial size is set as the sum of the sizes allocated for the old generation and the young generation.</p>
</div>
<div class="paragraph">
<p>The size of the heap for the young generation can be set using the <strong>-XX:NewSize</strong> option.</p>
</div>
</li>
<li>
<p>-XX:InitialRAMPercentage=<em>percent</em></p>
<div class="paragraph">
<p>Sets the initial amount of memory that the JVM will use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the <strong>-XX:MaxRAM</strong> option.</p>
</div>
<div class="paragraph">
<p>The default value is 1.5625 percent.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the percentage of the initial amount of memory used for the Java heap:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:InitialRAMPercentage=5</span></code></pre>
</div>
</div>
</li>
<li>
<p>-XX:MaxGCPauseMillis=<em>time</em></p>
<div class="paragraph">
<p>Sets a target for the maximum GC pause time (in milliseconds).</p>
</div>
<div class="paragraph">
<p>This is a soft goal, and the JVM will make its best effort to achieve it.</p>
</div>
<div class="paragraph">
<p>The specified value doesn&#8217;t adapt to your heap size.</p>
</div>
<div class="paragraph">
<p>By default, for G1 the maximum pause time target is 200 milliseconds.</p>
</div>
<div class="paragraph">
<p>The other generational collectors do not use a pause time goal by default.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the maximum target pause time to 500 ms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MaxGCPauseMillis=500</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>-XX:MaxHeapSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the maximum size (in byes) of the memory allocation pool.</p>
</div>
<div class="paragraph">
<p>This value must be a multiple of 1024 and greater than 2 MB.</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The default value is selected at run time based on the system configuration.</p>
</div>
<div class="paragraph">
<p>For server deployments, the options <strong>-XX:InitialHeapSize</strong> and <strong>-XX:MaxHeapSize</strong> are often set to the same value.</p>
</div>
<div class="paragraph">
<p>The following examples show how to set the maximum allowed size of allocated memory to 80 MB using various units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MaxHeapSize=83886080
-XX:MaxHeapSize=81920k
-XX:MaxHeapSize=80m</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>-XX:MaxHeapSize</strong> option is equivalent to <strong>-Xmx</strong>.</p>
</div>
</li>
<li>
<p><strong>-XX:MaxMetaspaceSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the maximum amount of native memory that can be allocated for class metadata.</p>
</div>
<div class="paragraph">
<p>By default, the size isn&#8217;t limited.</p>
</div>
<div class="paragraph">
<p>The amount of metadata for an application depends on the application itself, other running applications, and the amount of memory available on the system.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the maximum class metadata size to 256 MB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MaxMetaspaceSize=256m</span></code></pre>
</div>
</div>
</li>
<li>
<p>-XX:MaxNewSize=<em>size</em></p>
<div class="paragraph">
<p>Sets the maximum size (in bytes) of the heap for the young generation (nursery).</p>
</div>
<div class="paragraph">
<p>The default value is set ergonomically.</p>
</div>
</li>
<li>
<p>-XX:MaxRAM=<em>size</em></p>
<div class="paragraph">
<p>Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics.</p>
</div>
<div class="paragraph">
<p>The default value is the maximum amount of available memory to the JVM process or 128 GB, whichever is lower.</p>
</div>
<div class="paragraph">
<p>The maximum amount of available memory to the JVM process is the minimum of the machine&#8217;s physical memory and any constraints set by the environment (e.g. container).</p>
</div>
<div class="paragraph">
<p>Specifying this option disables automatic use of compressed oops if the combined result of this and other options influencing the maximum amount of memory is larger than the range of memory addressable by compressed oops.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the maximum amount of available memory for sizing the Java heap to 2 GB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MaxRAM=2G</span></code></pre>
</div>
</div>
</li>
<li>
<p>-XX:MaxRAMPercentage=<em>percent</em></p>
<div class="paragraph">
<p>Sets the maximum amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the -XX:MaxRAM option.</p>
</div>
<div class="paragraph">
<p>The default value is 25 percent.</p>
</div>
<div class="paragraph">
<p>Specifying this option disables automatic use of compressed oops if the combined result of this and other options influencing the maximum amount of memory is larger than the range of memory addressable by compressed oops. See <strong>-XX:UseCompressedOops</strong> for further information about compressed oops.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the percentage of the maximum amount of memory used for the Java heap:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MaxRAMPercentage=75</span></code></pre>
</div>
</div>
</li>
<li>
<p>-XX:MinRAMPercentage=<em>percent</em></p>
<div class="paragraph">
<p>Sets the <em>maximum</em> amount of memory that the JVM may use for the Java heap before applying ergonomics heuristics as a percentage of the maximum amount determined as described in the <strong>-XX:MaxRAM</strong> option for small heaps.</p>
</div>
<div class="paragraph">
<p>A small heap is a heap of approximately 125 MB.</p>
</div>
<div class="paragraph">
<p>The default value is 50 percent.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the percentage of the maximum amount of memory used for the Java heap for small heaps:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MinRAMPercentage=75</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>-XX:MetaspaceSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the size of the allocated class metadata space that triggers a garbage collection the first time it&#8217;s exceeded. This threshold for a garbage collection is increased or decreased depending on the amount of metadata used. The default size depends on the platform.</p>
</div>
</li>
<li>
<p><strong>-XX:MinHeapSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the minimum size (in bytes) of the memory allocation pool. This value must be either 0, or a multiple of 1024 and greater than 1 MB. Append the letter k or K to indicate kilobytes, m or M to indicate megabytes, or g or G to indicate gigabytes. The default value is selected at run time based on the system configuration.</p>
</div>
<div class="paragraph">
<p>The following examples show how to set the mimimum size of allocated memory to 6 MB using various units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:MinHeapSize=6291456
-XX:MinHeapSize=6144k
-XX:MinHeapSize=6m</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you set this option to 0, then the minimum size is set to the same value as the initial size.</p>
</div>
</li>
<li>
<p>-XX:NewSize=<em>size</em></p>
<div class="paragraph">
<p>Sets the initial size (in bytes) of the heap for the young generation (nursery).</p>
</div>
<div class="paragraph">
<p>Append the letter <code>k</code> or <code>K</code> to indicate kilobytes, <code>m</code> or <code>M</code> to indicate megabytes, or <code>g</code> or <code>G</code> to indicate gigabytes.</p>
</div>
<div class="paragraph">
<p>The young generation region of the heap is used for new objects.</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>GC is performed in this region more often than in other regions.</p>
</li>
<li>
<p>If the size for the young generation is too low, then a large number of minor GCs are performed.</p>
</li>
<li>
<p>If the size is too high, then only full GCs are performed, which can take a long time to complete.</p>
</li>
<li>
<p>It is recommended that you keep the size for the young generation greater than 25% and less than 50% of the overall heap size.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The following examples show how to set the initial size of the young generation to 256 MB using various units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">-XX:NewSize=256m
-XX:NewSize=262144k
-XX:NewSize=268435456</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>-XX:NewSize</strong> option is equivalent to <strong>-Xmn</strong>.</p>
</div>
</li>
<li>
<p>-XX:+UseG1GC</p>
<div class="paragraph">
<p>Enables the use of the garbage-first (G1) garbage collector.</p>
</div>
<div class="paragraph">
<p>It&#8217;s a server-style garbage collector, targeted for multiprocessor machines with a large amount of RAM.</p>
</div>
<div class="paragraph">
<p>This option meets GC pause time goals with high probability, while maintaining good throughput.</p>
</div>
<div class="paragraph">
<p>The G1 collector is recommended for applications requiring large heaps (sizes of around 6 GB or larger) with limited GC latency requirements (a stable and predictable pause time below 0.5 seconds).</p>
</div>
<div class="paragraph">
<p>By default, this option is enabled and G1 is used as the default garbage collector.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="removed-java-options">4.8. Removed Java Options</h3>
<div class="paragraph">
<p>These java options have been removed in JDK 17 and using them results in an error of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">Unrecognized VM option option-name</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>-XX:MaxPermSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the maximum permanent generation space size (in bytes).</p>
</div>
<div class="paragraph">
<p>This option was deprecated in JDK 8 and superseded by the <strong>-XX:MaxMetaspaceSize</strong> option.</p>
</div>
</li>
<li>
<p><strong>-XX:PermSize</strong>=<em>size</em></p>
<div class="paragraph">
<p>Sets the space (in bytes) allocated to the permanent generation that triggers a garbage collection if it&#8217;s exceeded.</p>
</div>
<div class="paragraph">
<p>This option was deprecated in JDK 8 and superseded by the <strong>-XX:MetaspaceSize</strong> option.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maven">5. Maven</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache <strong>Maven</strong> is a software project management and comprehension tool based on the concept of a project object model (POM). <a href="#mvn">[4]</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Maven Wrapper</div>
<div class="paragraph">
<p><code>mvn</code> and <code>mvnw</code> are both command-line tools for building projects with Maven, but they serve different purposes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>mvn</strong> is the standard Maven command-line tool. It requires that you have Maven installed on your system and added to your system&#8217;s PATH. When you run <code>mvn</code> commands, it uses the globally installed Maven version.</p>
</li>
<li>
<p><strong>mvnw</strong> (short for "<a href="https://maven.apache.org/wrapper/">Maven Wrapper</a>") is a shell script (or a Batch file on Windows) that automatically downloads and installs the appropriate Maven version if it&#8217;s not already installed. It then delegates the build to the installed Maven version. The Maven Wrapper is project-specific and is included in the project repository. This ensures that everyone working on the project uses the same Maven version, which helps maintain consistency and avoid potential build issues due to version differences.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In summary, the main differences between <code>mvn</code> and <code>mvnw</code> are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>mvn</code> requires a manual installation of Maven on your system, while <code>mvnw</code> automatically downloads and installs the appropriate Maven version for the project.</p>
</li>
<li>
<p><code>mvn</code> uses the globally installed Maven version, while <code>mvnw</code> uses the project-specific Maven version defined in the <code>mvnw.properties</code> file.</p>
</li>
<li>
<p>When using <code>mvnw</code>, the project&#8217;s Maven Wrapper files (<code>mvnw</code>, <code>mvnw.cmd</code>, and wrapper directory) should be committed to the project repository, ensuring that all team members and build environments use the same Maven version.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In Spring Boot projects, it&#8217;s recommended to use <code>mvnw</code> to ensure that the project is built with the correct Maven version and to avoid potential issues caused by different Maven versions. To use <code>mvnw</code>, simply replace <code>mvn</code> with <code>mvnw</code> (or <code>mvnw.cmd</code> on Windows) in your command:</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="settings-xml">5.1. Settings XML</h3>
<div class="paragraph">
<p>The <a href="https://maven.apache.org/settings.html"><strong><code>settings</code></strong></a> element in the <code>settings.xml</code> file contains elements used to define values which configure Maven execution in various ways, and the <code>settings.xml</code> file may live: <a href="#mvnsettings">[8]</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Maven install: <code>${maven.home}/conf/settings.xml</code></p>
</li>
<li>
<p>A user&#8217;s install: <code>${user.home}/.m2/settings.xml</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The former <code>settings.xml</code> are also called global settings, the latter <code>settings.xml</code> are referred to as user settings. If both files exists, their contents gets merged, with the user-specific <code>settings.xml</code> being dominant.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you need to create user-specific settings from scratch, it&#8217;s easiest to copy the global settings from your Maven installation to your <code>${user.home}/.m2</code> directory. Maven&#8217;s default <code>settings.xml</code> is a template with comments and examples so you can quickly tweak it to match your needs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here is an overview of the top elements under settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;settings</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/SETTINGS/1.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;localRepository/&gt;</span>
  <span class="nt">&lt;interactiveMode/&gt;</span>
  <span class="nt">&lt;offline/&gt;</span>
  <span class="nt">&lt;pluginGroups/&gt;</span>
  <span class="nt">&lt;servers/&gt;</span>
  <span class="nt">&lt;mirrors/&gt;</span>
  <span class="nt">&lt;proxies/&gt;</span>
  <span class="nt">&lt;profiles/&gt;</span>
  <span class="nt">&lt;activeProfiles/&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-build-lifecycle">5.2. The Build Lifecycle</h3>
<div class="paragraph">
<p>Maven is based around the central concept of a <strong>build lifecycle</strong>.</p>
</div>
<div class="paragraph">
<p>There are three built-in build lifecycles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>default</strong> lifecycle handles your project deployment,</p>
</li>
<li>
<p>the <strong>clean</strong> lifecycle handles project cleaning,</p>
</li>
<li>
<p>while the <strong>site</strong> lifecycle handles the creation of your project&#8217;s web site.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="a-build-lifecycle-is-made-up-of-phases">5.2.1. A Build Lifecycle is Made Up of Phases</h4>
<div class="paragraph">
<p>Each of these build lifecycles is defined by a different list of <strong>build phases</strong>, wherein a build phase represents a stage in the lifecycle.</p>
</div>
<div class="paragraph">
<p>For example, the default lifecycle comprises of the following phases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>validate</strong></p>
<div class="ulist">
<ul>
<li>
<p>validate the project is correct and all necessary information is available</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>compile</strong></p>
<div class="ulist">
<ul>
<li>
<p>compile the source code of the project</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>test</strong></p>
<div class="ulist">
<ul>
<li>
<p>test the compiled source code using a suitable unit testing framework. These tests should not require the code be packaged or deployed</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>package</strong></p>
<div class="ulist">
<ul>
<li>
<p>take the compiled code and package it in its distributable format, such as a JAR.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>verify</strong></p>
<div class="ulist">
<ul>
<li>
<p>run any checks on results of integration tests to ensure quality criteria are met</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>install</strong></p>
<div class="ulist">
<ul>
<li>
<p>install the package into the local repository, for use as a dependency in other projects locally</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>deploy</strong></p>
<div class="ulist">
<ul>
<li>
<p>done in the build environment, copies the final package to the remote repository for sharing with other developers and projects.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These lifecycle phases (plus the other lifecycle phases not shown here) are executed sequentially to complete the default lifecycle.</p>
</div>
<div class="paragraph">
<p>Given the lifecycle phases above, this means that when the default lifecycle is used, Maven will first</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>validate</em> the project,</p>
</li>
<li>
<p>then will try to <em>compile</em> the sources,</p>
</li>
<li>
<p>run those against the <em>tests</em>,</p>
</li>
<li>
<p><em>package</em> the binaries (e.g. jar),</p>
</li>
<li>
<p>run <em>integration tests</em> against that package,</p>
</li>
<li>
<p><em>verify</em> the integration tests,</p>
</li>
<li>
<p><em>install</em> the verified package to the local repository,</p>
</li>
<li>
<p>then <em>deploy</em> the installed package to a remote repository.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="a-build-phase-is-made-up-of-plugin-goals">5.2.2. A Build Phase is Made Up of Plugin Goals</h4>
<div class="paragraph">
<p>However, even though a build phase is responsible for a specific step in the build lifecycle, the manner in which it carries out those responsibilities may vary. And this is done by declaring the plugin goals bound to those build phases.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <strong>plugin goal</strong> represents a specific task (finer than a build phase) which contributes to the building and managing of a project. It may be bound to zero or more build phases.</p>
</li>
<li>
<p>A goal not bound to any build phase could be executed outside of the build lifecycle by direct invocation.</p>
</li>
<li>
<p>The order of execution depends on the order in which the goal(s) and the build phase(s) are invoked.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For example, consider the command below. The <em>clean</em> and <em>package</em> arguments are <em>build phases</em>, while the <em>dependency:copy-dependencies</em> is a goal (of a plugin).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mvn clean dependency:copy-dependencies package</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If this were to be executed, the <em>clean</em> phase will be executed first (meaning it will run all preceding phases of the clean lifecycle, plus the <em>clean</em> phase itself), and then the <em>dependency:copy-dependencies</em> goal, before finally executing the <em>package</em> phase (and all its preceding build phases of the default lifecycle).</p>
</div>
</div>
</div>
</li>
<li>
<p>Moreover, if a goal is bound to one or more build phases, that goal will be called in all those phases.</p>
</li>
<li>
<p>Furthermore, a build phase can also have zero or more goals bound to it.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>If a build phase has no goals bound to it, that build phase will not execute.</p>
</li>
<li>
<p>But if it has one or more goals bound to it, it will execute all those goals.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="setting-up-your-project-to-use-the-build-lifecycle">5.2.3. Setting Up Your Project to Use the Build Lifecycle</h4>
<div class="paragraph">
<p>The build lifecycle is simple enough to use, but when you are constructing a Maven build for a project, how do you go about assigning tasks to each of those build phases?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Packaging</strong></p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Each packaging contains a list of goals to bind to a particular phase.</p>
</li>
<li>
<p>Some of the valid packaging values are <strong>jar</strong>, <strong>war</strong>, <strong>ear</strong> and <strong>pom</strong>.</p>
</li>
<li>
<p>If no packaging value has been specified, it will default to <strong>jar</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><strong>Plugins</strong></p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Plugins are artifacts that provide goals to Maven.</p>
</li>
<li>
<p>A plugin may have one or more goals wherein each goal represents a capability of that plugin.</p>
<div class="paragraph">
<p>For example, the Compiler plugin has two goals: compile and testCompile.</p>
</div>
<div class="paragraph">
<p>The former compiles the source code of your main code, while the latter compiles the source code of your test code.</p>
</div>
<div class="paragraph">
<p>The goals that are configured will be added to the goals already bound to the lifecycle from the <strong>packaging</strong> selected.</p>
</div>
</li>
<li>
<p>If more than one goal is bound to a particular phase, the order used is that those from the packaging are executed first, followed by those configured in the POM.</p>
<div class="paragraph">
<p>Note that you can use the <strong>&lt;executions&gt;</strong> element to gain more control over the order of particular goals.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pom">5.3. POM</h3>
<div class="paragraph">
<p>A <strong>Project Object Model</strong> or <strong>POM</strong> is the fundamental unit of work in Maven.<a href="#mvnpom">[5]</a><a href="#mvnintropom">[6]</a><a href="#baeldungmvnmultimod">[7]</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is an XML file that contains information about the project and configuration details used by Maven to build the project.</p>
</li>
<li>
<p>It contains default values for most projects.</p>
<div class="paragraph">
<p>Examples for this is the build directory, which is <code>target</code>; the source directory, which is <code>src/main/java</code>; the test source directory, which is <code>src/test/java</code>; and so on.</p>
</div>
<div class="paragraph">
<p>When executing a task or goal, Maven looks for the POM in the current directory. It reads the POM, gets the needed configuration information, then executes the goal.</p>
</div>
</li>
<li>
<p>Some of the configuration that can be specified in the POM are the project dependencies, the plugins or goals that can be executed, the build profiles, and so on.</p>
</li>
<li>
<p>Other information such as the project version, description, developers, mailing lists and such can also be specified.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="super-pom">5.3.1. Super POM</h4>
<div class="paragraph">
<p>The <a href="https://maven.apache.org/ref/3.6.3/maven-model-builder/super-pom.html">Super POM</a> is Maven&#8217;s default POM. All POMs extend the Super POM unless explicitly set, meaning the configuration specified in the Super POM is inherited by the POMs you created for your projects.</p>
</div>
</div>
<div class="sect3">
<h4 id="minimal-pom">5.3.2. Minimal POM</h4>
<div class="paragraph">
<p>The minimum requirement for a POM are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>project</code> root</p>
</li>
<li>
<p><code>modelVersion</code> - should be set to 4.0.0</p>
</li>
<li>
<p><code>groupId</code> - the id of the project&#8217;s group.</p>
<div class="paragraph">
<p><strong>groupId</strong> uniquely identifies your project across all projects. A group ID should follow <a href="https://docs.oracle.com/javase/specs/jls/se6/html/packages.html#7.7">Java&#8217;s package name rules</a>. This means it starts with a reversed domain name you control. For example, <code>org.apache.maven</code>, <code>org.apache.commons</code>.</p>
</div>
<div class="paragraph">
<p>Maven does not enforce this rule. There are many legacy projects that do not follow this convention and instead use single word group IDs. However, it will be difficult to get a new single word group ID approved for inclusion in the Maven Central repository.</p>
</div>
<div class="paragraph">
<p>You can create as many subgroups as you want. A good way to determine the granularity of the <code>groupId</code> is to use the project structure. That is, if the current project is a multiple module project, it should append a new identifier to the parent&#8217;s groupId. For example, <code>org.apache.maven</code>, <code>org.apache.maven.plugins</code>, <code>org.apache.maven.reporting</code>.</p>
</div>
</li>
<li>
<p><code>artifactId</code> - the id of the artifact (project)</p>
<div class="paragraph">
<p><strong>artifactId</strong> is the name of the jar without version. If you created it, then you can choose whatever name you want with lowercase letters and no strange symbols. If it&#8217;s a third party jar, you have to take the name of the jar as it&#8217;s distributed. eg. <code>maven</code>, <code>commons-math</code></p>
</div>
</li>
<li>
<p><code>version</code> - the version of the artifact under the specified group</p>
<div class="paragraph">
<p><strong>version</strong> if you distribute it, then you can choose any typical version with numbers and dots (1.0, 1.1, 1.0.1, &#8230;&#8203;).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Don&#8217;t use dates as they are usually associated with SNAPSHOT (nightly) builds.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If it&#8217;s a third party artifact, you have to use their version number whatever it is, and as strange as it can look. For example, <code>2.0</code>, <code>2.0.1</code>, <code>1.3.1</code>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

  <span class="nt">&lt;groupId&gt;</span>com.mycompany.app<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>my-app<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="project-inheritance-vs-project-aggregation-or-multi-module">5.3.3. Project Inheritance vs Project Aggregation (or Multi-Module)</h4>
<div class="paragraph">
<p>One powerful addition that Maven brings to build management is the concept of project inheritance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

  <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>my-parent<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The packaging type required to be <code>pom</code> for <em>parent and aggregation (multi-module) projects</em>. Most elements from the parent POM are inherited by its children, which are not inherited include: <code>artifactId</code>, <code>name</code>, <code>prerequisites</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

  <span class="nt">&lt;parent&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>my-parent<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;relativePath&gt;</span>../my-parent<span class="nt">&lt;/relativePath&gt;</span>
  <span class="nt">&lt;/parent&gt;</span>

  <span class="nt">&lt;artifactId&gt;</span>my-project<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Notice the <code>relativePath</code> element. It is not required, but may be used as a signifier to Maven to first search the path given for this project&#8217;s parent, before searching the local and then remote repositories.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A project with modules is known as a <strong>multi-module, or aggregator project</strong>. Modules are projects that this POM lists, and are executed as a group. A <code>pom</code> packaged project may aggregate the build of a set of projects by listing them as modules, which are relative paths to the directories or the POM files of those projects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

  <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>my-parent<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>

  <span class="nt">&lt;modules&gt;</span>
    <span class="nt">&lt;module&gt;</span>my-project<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;module&gt;</span>another-project<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;module&gt;</span>third-project/pom-example.xml<span class="nt">&lt;/module&gt;</span>
  <span class="nt">&lt;/modules&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You do not need to consider the inter-module dependencies yourself when listing the modules; i.e. the ordering of the modules given by the POM is not important. Maven will topologically sort the modules such that dependencies are always build before dependent modules.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">A final note on Inheritance v. Aggregation</div>
<div class="paragraph">
<p>Inheritance and aggregation create a nice dynamic to control builds through a single, high-level POM. You often see projects that are both parents and aggregators.
For example, the entire Maven core runs through a single base POM <code>org.apache.maven:maven</code>, so building the Maven project can be executed by a single command: <code>mvn compile</code>.</p>
</div>
<div class="paragraph">
<p>However, an aggregator project and a parent project are both POM projects, they are not one and the same and should not be confused. A POM project may be inherited from - but does not necessarily have - any modules that it aggregates. Conversely, a POM project may aggregate projects that do not inherit from it.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="standard-directory-layout">5.4. Standard Directory Layout</h3>
<div class="paragraph">
<p>Having a <a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">common directory layout</a> allows users familiar with one Maven project to immediately feel at home in another Maven project. The advantages are analogous to adopting a site-wide look-and-feel.</p>
</div>
<div class="paragraph">
<p>The next section documents the directory layout expected by Maven and the directory layout created by Maven. Try to conform to this structure as much as possible. However, if you can&#8217;t, these settings can be overridden via the project descriptor.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/main/java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application/Library sources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/main/resources</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application/Library resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/main/filters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource filter files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/main/webapp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web application sources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/test/java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test sources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/test/resources</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/test/filters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test resource filter files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/it</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integration Tests (primarily for plugins)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/assembly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assembly descriptors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">src/site</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Site</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LICENSE.txt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project&#8217;s license</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOTICE.txt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notices and attributions required by libraries that the project depends on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">README.txt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project&#8217;s readme</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="dependency-management">5.5. Dependency management</h3>
<div class="paragraph">
<p>Maven avoids the need to discover and specify the libraries that your own dependencies require by including transitive dependencies automatically. In general, all dependencies of those projects are used in your project, as are any that the project inherits from its parents, or from its dependencies, and so on. <a href="#mvndeps">[21]</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dependency mediation - this determines what version of an artifact will be chosen when multiple versions are encountered as dependencies.</p>
<div class="paragraph">
<p>Maven picks the "nearest definition". That is, it uses the version of the closest dependency to your project in the tree of dependencies. You can always guarantee a version by declaring it explicitly in your project&#8217;s POM. Note that if two dependency versions are at the same depth in the dependency tree, the first declaration wins.</p>
</div>
</li>
<li>
<p>Dependency management - this allows project authors to directly specify the versions of artifacts to be used when they are encountered in transitive dependencies or in dependencies where no version has been specified.</p>
</li>
<li>
<p>Dependency scope - this allows you to only include dependencies appropriate for the current stage of the build.</p>
<div class="paragraph">
<p>Dependency scope is used to limit the transitivity of a dependency and to determine when a dependency is included in a classpath. There are 6 scopes: compile, provided, runtime, test, system and import.</p>
</div>
</li>
<li>
<p>Excluded dependencies - If project X depends on project Y, and project Y depends on project Z, the owner of project X can explicitly exclude project Z as a dependency, using the "exclusion" element.</p>
</li>
<li>
<p>Optional dependencies - If project Y depends on project Z, the owner of project Y can mark project Z as an optional dependency, using the "optional" element. When project X depends on project Y, X will depend only on Y and not on Y&#8217;s optional dependency Z. The owner of project X may then explicitly add a dependency on Z, at her option. (It may be helpful to think of optional dependencies as "excluded by default.")</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Maven also provides <code>dependency:analyze</code> plugin goal for analyzing the dependencies: it helps making this best practice more achievable.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>> What&#8217;s the dependencyManagement?</p>
</div>
<div class="paragraph">
<p>* In Maven, the <code>dependencyManagement</code> section is a mechanism for centralizing dependency information. When you have a multi-module project, it can be used in the parent POM to manage the versions of dependencies. This ensures that all modules use the same versions of dependencies, which can help avoid potential conflicts or bugs due to different modules using different versions of the same dependency.</p>
</div>
<div class="paragraph">
<p>In the <code>dependencyManagement</code> section, you list all the dependencies that might be used by the project (including its sub-modules), along with their versions. However, putting a dependency in the <code>dependencyManagement</code> of the parent POM does not mean that it will automatically be included in the all sub-modules. The sub-modules must still expressly declare the dependencies they are using in their own <code>&lt;dependencies&gt;</code> sections, though without versions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="c">&lt;!-- In your parent POM's dependencyManagement section--&gt;</span>
<span class="nt">&lt;dependencyManagement&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.mycompany<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>my-library<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span>

<span class="c">&lt;!-- And in your module's POM --&gt;</span>
<span class="nt">&lt;dependencies&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.mycompany<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>my-library<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the version of "my-library" will be managed by the parent POM, ensuring consistency across modules, but "my-library" will only be included in specific modules that call it in their <code>&lt;dependencies&gt;</code> section.</p>
</div>
<div class="paragraph">
<p>This allows you to control versions from a central place. Additionally, if you need to update or change the versions, you only need to do it in one place rather than going through multiple POM files. It&#8217;s a very effective way of managing and controlling what gets included in your build.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>> What&#8217;s the import scope?</p>
</div>
<div class="paragraph">
<p>* The <code>import</code> scope is used in Maven for dependency management. It is only supported in a <code>&lt;dependencyManagement&gt;</code> section. The <code>import</code> scope is intended to be used when you have a multi-module project, where one module (typically the parent) defines dependency versions in its dependency management, and you&#8217;d like to import that version information into another project or module.</p>
</div>
<div class="paragraph">
<p>The purpose of the <code>import</code> scope is not to include dependencies directly, but rather to pull in and use the dependency version information from another POM. Once the dependency information is pulled in, it becomes a part of the current POM&#8217;s dependency management.</p>
</div>
<div class="paragraph">
<p>For instance, consider the following use of <code>import</code> scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;dependencyManagement&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>spring-boot-dependencies<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.3.4.RELEASE<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, <code>spring-boot-dependencies</code> is a POM that contains a <code>&lt;dependencyManagement&gt;</code> section that lists various components and their versions. By using the <code>import</code> scope, the project importing it can include those versions as part of its own dependency management without explicitly listing each one. This helps in maintaining a consistent set of dependency versions across multiple projects or modules.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="repositories">5.6. Repositories</h3>
<div class="paragraph">
<p>A <a href="https://maven.apache.org/guides/introduction/introduction-to-repositories.html">repository</a> in Maven holds build artifacts and dependencies of varying types.</p>
</div>
<div class="paragraph">
<p>There are exactly two types of repositories: <strong>local</strong> and <strong>remote</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <strong>local</strong> repository is a directory on the computer where Maven runs. It caches remote downloads and contains temporary build artifacts that you have not yet released.</p>
</li>
<li>
<p><strong>remote</strong> repositories refer to any other type of repository, accessed by a variety of protocols such as <code>file://</code> and <code>https://</code>.</p>
<div class="paragraph">
<p>These repositories might be a truly remote repository set up by a third party to provide their artifacts for downloading (for example, repo.maven.apache.org). Other "remote" repositories may be internal repositories set up on a file or HTTP server within your company, used to share private artifacts between development teams and for releases.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Local and remote repositories are structured the same way so that scripts can run on either side, or they can be synced for offline use. The layout of the repositories is completely transparent to the Maven user, however.</p>
</div>
<div class="sect3">
<h4 id="setting-up-multiple-repositories">5.6.1. Setting up Multiple Repositories</h4>
<div class="paragraph">
<p>There are two different ways that you can specify the use of multiple repositories. The first way is to specify in a POM which repositories you want to use. That is supported both inside and outside of build profiles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project&gt;</span>
...
  <span class="nt">&lt;repositories&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>my-repo1<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>your custom repo<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://jarsm2.dyndns.dk<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>my-repo2<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>your custom repo<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://jarsm2.dyndns.dk<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
  <span class="nt">&lt;/repositories&gt;</span>
...
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NOTE: You will also get the standard set of repositories as defined in the <a href="https://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Super_POM">Super POM</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The other way you can specify multiple repositories is by creating a profile in the <code>${user.home}/.m2/settings.xml</code> or <code>${maven.home}/conf/settings.xml</code> file like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;settings&gt;</span>
 ...
 <span class="nt">&lt;profiles&gt;</span>
   ...
   <span class="nt">&lt;profile&gt;</span>
     <span class="nt">&lt;id&gt;</span>myprofile<span class="nt">&lt;/id&gt;</span>
     <span class="nt">&lt;repositories&gt;</span>
       <span class="nt">&lt;repository&gt;</span>
         <span class="nt">&lt;id&gt;</span>my-repo2<span class="nt">&lt;/id&gt;</span>
         <span class="nt">&lt;name&gt;</span>your custom repo<span class="nt">&lt;/name&gt;</span>
         <span class="nt">&lt;url&gt;</span>http://jarsm2.dyndns.dk<span class="nt">&lt;/url&gt;</span>
       <span class="nt">&lt;/repository&gt;</span>
     <span class="nt">&lt;/repositories&gt;</span>
   <span class="nt">&lt;/profile&gt;</span>
   ...
 <span class="nt">&lt;/profiles&gt;</span>

 <span class="nt">&lt;activeProfiles&gt;</span>
   <span class="nt">&lt;activeProfile&gt;</span>myprofile<span class="nt">&lt;/activeProfile&gt;</span>
 <span class="nt">&lt;/activeProfiles&gt;</span>
 ...
<span class="nt">&lt;/settings&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you specify repositories in profiles you must remember to activate that particular profile! As you can see above we do this by registering a profile to be active in the <code>activeProfiles</code> element.</p>
</div>
<div class="paragraph">
<p>You could also activate this profile on the command like by executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">mvn <span class="nt">-Pmyprofile</span> ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>In fact the <code>-P</code> option will take a CSV list of profiles to activate if you wish to activate multiple profiles simultaneously.</p>
</div>
</div>
<div class="sect3">
<h4 id="repository-order">5.6.2. Repository Order</h4>
<div class="paragraph">
<p>Remote repository URLs are queried in the following order for artifacts until one returns a valid result:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>effective settings:</p>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Global <code>settings.xml</code></p>
</li>
<li>
<p>User <code>settings.xml</code></p>
</li>
</ol>
</div>
</div>
</div>
</li>
<li>
<p>local effective build POM:</p>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Local <code>pom.xml</code></p>
</li>
<li>
<p>Parent POMs, recursively</p>
</li>
<li>
<p>Super POM</p>
</li>
</ol>
</div>
</div>
</div>
</li>
<li>
<p>effective POMs from dependency path to the artifact.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For each of these locations, the repositories within the profiles are queried first in the order outlined at <a href="https://maven.apache.org/guides/introduction/introduction-to-profiles.html">Introduction to build profiles</a>.</p>
</div>
<div class="paragraph">
<p>Before downloading from a repository, <a href="https://maven.apache.org/guides/mini/guide-mirror-settings.html">mirrors configuration</a> is applied.</p>
</div>
<div class="paragraph">
<p>Effective settings and local build POM, with profile taken into account, can easily be reviewed to see their repositories order with <code>mvn help:effective-settings</code> and <code>mvn help:effective-pom -Dverbose</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-mirrors-for-repositories">5.6.3. Using Mirrors for Repositories</h4>
<div class="paragraph">
<p>With <a href="https://maven.apache.org/guides/introduction/introduction-to-repositories.html">Repositories</a> you specify from which locations you want to download certain artifacts, such as dependencies and maven-plugins. Repositories can be <a href="https://maven.apache.org/guides/mini/guide-multiple-repositories.html">declared inside a project</a>, which means that if you have your own custom repositories, those sharing your project easily get the right settings out of the box. However, you may want to use an alternative mirror for a particular repository without changing the project files.</p>
</div>
<div class="paragraph">
<p>Some reasons to use a mirror are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is a synchronized mirror on the internet that is geographically closer and faster</p>
</li>
<li>
<p>You want to replace a particular repository with your own internal repository which you have greater control over</p>
</li>
<li>
<p>You want to run a <a href="https://maven.apache.org/repository-management.html">repository manager</a> to provide a local cache to a mirror and need to use its URL instead</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To configure a mirror of a given repository, you provide it in your settings file (<code>${user.home}/.m2/settings.xml</code>), giving the new repository its own <code>id</code> and <code>url</code>, and specify the <code>mirrorOf</code> setting that is the ID of the repository you are using a mirror of.</p>
</div>
<div class="paragraph">
<p>For example, the ID of the main Maven Central repository included by default is <code>central</code>, so to use the different mirror instance, you would configure the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;settings&gt;</span>
  ...
  <span class="nt">&lt;mirrors&gt;</span>
    <span class="nt">&lt;mirror&gt;</span>
      <span class="nt">&lt;id&gt;</span>other-mirror<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>Other Mirror Repository<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>https://other-mirror.repo.other-company.com/maven2<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;mirrorOf&gt;</span>central<span class="nt">&lt;/mirrorOf&gt;</span>
    <span class="nt">&lt;/mirror&gt;</span>
  <span class="nt">&lt;/mirrors&gt;</span>
  ...
<span class="nt">&lt;/settings&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that there can be at most one mirror for a given repository. In other words, you cannot map a single repository to a group of mirrors that all define the same <code>&lt;mirrorOf&gt;</code> value. Maven will not aggregate the mirrors but simply picks the first match. If you want to provide a combined view of several repositories, use a <a href="https://maven.apache.org/repository-management.html">repository manager</a> instead.</p>
</div>
<div class="paragraph">
<p>The settings descriptor documentation can be found on the <a href="https://maven.apache.org/maven-settings/settings.html">Maven Local Settings Model Website</a>.</p>
</div>
<div class="paragraph">
<p>Note: The official Maven repository is at <code><a href="https://repo.maven.apache.org/maven2" class="bare">https://repo.maven.apache.org/maven2</a></code> hosted by the Sonatype Company and is distributed worldwide via CDN.</p>
</div>
</div>
<div class="sect3">
<h4 id="advanced-mirror-specification">5.6.4. Advanced Mirror Specification</h4>
<div class="paragraph">
<p>A single mirror can handle multiple repositories. This is typically used in conjunction with a repository manager, that gives easy centralised configuration of the list of repositories behind.</p>
</div>
<div class="paragraph">
<p>The syntax:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>*</code> matches all repo ids.</p>
</li>
<li>
<p><code>external:*</code> matches all repositories except those using localhost or file based repositories. This is used when you want to exclude redirecting repositories that are defined for Integration Testing.</p>
</li>
<li>
<p>since Maven 3.8.0, <code>external:http:*</code> matches all repositories using HTTP except those using localhost.</p>
</li>
<li>
<p>multiple repositories may be specified using a comma as the delimiter</p>
</li>
<li>
<p>an exclamation mark may be used in conjunction with one of the above wildcards to exclude a repository id</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Be careful not to include extra whitespace around identifiers or wildcards in comma separated lists. For example, a mirror with <code>&lt;mirrorOf&gt;</code> set to <code>!repo1, *</code> will not mirror anything while <code>!repo1,*</code> will mirror everything but <code>repo1</code>.</p>
</div>
<div class="paragraph">
<p>The position of wildcards within a comma separated list of repository identifiers is not important as the wildcards defer to further processing and explicit includes or excludes stop the processing, overruling any wildcard match.</p>
</div>
<div class="paragraph">
<p>When you use the advanced syntax and configure multiple mirrors, the declaration order matters.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When Maven looks for a mirror of some repository, it first checks for a mirror whose <code>&lt;mirrorOf&gt;</code> exactly matches the repository identifier.</p>
</li>
<li>
<p>If no direct match is found, Maven picks the first mirror declaration that matches according to the rules above (if any).</p>
</li>
<li>
<p>Hence, you may influence match order by changing the order of the definitions in the <code>settings.xml</code></p>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>*</code> = everything</p>
</li>
<li>
<p><code>external:*</code> = everything not on the localhost and not file based.</p>
</li>
<li>
<p><code>repo,repo1</code> = repo or repo1</p>
</li>
<li>
<p><code>*,!repo1</code> = everything except repo1</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title"><a href="https://maven.apache.org/docs/3.8.1/release-notes.html">Release Notes – Maven 3.8.1</a>: Possible Man-In-The-Middle-Attack due to custom repositories using HTTP</div>
<div class="paragraph">
<p>More and more repositories use HTTPS nowadays, but this hasn&#8217;t always been the case. This means that Maven Central contains POMs with custom repositories that refer to a URL over HTTP. This makes downloads via such repository a target for a MITM attack. At the same time, developers are probably not aware that for some downloads an insecure URL is being used. Because uploaded POMs to Maven Central are immutable, a change for Maven was required. To solve this, we extended the mirror configuration with <code>&lt;blocked&gt;</code> parameter, and we added a new <code>external:http:*</code> mirror selector (like existing <code>external:*</code>), meaning “any external URL using HTTP”.
The decision was made to block such external HTTP repositories by default: this is done by providing a mirror in the <code>conf/settings.xml</code> blocking insecure HTTP external URLs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;mirror&gt;</span>
  <span class="nt">&lt;id&gt;</span>maven-default-http-blocker<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;mirrorOf&gt;</span>external:http:*<span class="nt">&lt;/mirrorOf&gt;</span>
  <span class="nt">&lt;name&gt;</span>Pseudo repository to mirror external repositories initially using HTTP.<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;url&gt;</span>http://0.0.0.0/<span class="nt">&lt;/url&gt;</span>
<span class="hll">  <span class="nt">&lt;blocked&gt;</span>true<span class="nt">&lt;/blocked&gt;</span>
</span><span class="nt">&lt;/mirror&gt;</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-plug-ins">5.7. Configuring Plug-ins</h3>
<div class="paragraph">
<p>In Maven, there are two kinds of plugins, build and reporting: <a href="#mvnconfiguringplugins">[9]</a><a href="#mvnplugin">[10]</a><a href="#mvndeppluginusage">[11]</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Build plugins</strong> are executed during the build and configured in the <code>&lt;build/&gt;</code> element.</p>
</li>
<li>
<p><strong>Reporting plugins</strong> are executed during the site generation and configured in the <code>&lt;reporting/&gt;</code> element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All plugins should have minimal required information: <strong>groupId</strong>, <strong>artifactId</strong> and <strong>version</strong>.</p>
</div>
<div class="paragraph">
<p>Maven plugins (build and reporting) are configured by specifying a <code>&lt;configuration&gt;</code> element where the child elements of the <code>&lt;configuration&gt;</code> element are mapped to fields, or setters, inside your <strong>Mojo</strong>. <a href="#mvnplugindev">[12]</a></p>
</div>
<div class="paragraph">
<p>Remember that a plug-in consists of one or more Mojos where a Mojo maps to a goal.</p>
</div>
<div class="paragraph">
<p>For example, you have a Mojo that performs a query against a particular URL, with a specified timeout and list of options. The Mojo might look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="cm">/**
 * @goal query
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyQueryMojo</span> <span class="kd">extends</span> <span class="nc">AbstractMojo</span> <span class="o">{</span>
    <span class="nd">@Parameter</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">"query.url"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">url</span><span class="o">;</span>

    <span class="nd">@Parameter</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">"timeout"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"50"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">timeout</span><span class="o">;</span>

    <span class="nd">@Parameter</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">"options"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">options</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">MojoExecutionException</span> <span class="o">{</span>
        <span class="c1">// ...</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To configure the Mojo from your POM with the desired URL, timeout and options you might have something like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;project&gt;</span>
  ...
  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-myquery-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;url&gt;</span>http://www.foobar.com/query<span class="nt">&lt;/url&gt;</span>
          <span class="nt">&lt;timeout&gt;</span>10<span class="nt">&lt;/timeout&gt;</span>
          <span class="nt">&lt;options&gt;</span>
            <span class="nt">&lt;option&gt;</span>one<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option&gt;</span>two<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option&gt;</span>three<span class="nt">&lt;/option&gt;</span>
          <span class="nt">&lt;/options&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
    ...
<span class="nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The elements in the configuration match the names of the fields in the Mojo.</p>
</div>
<div class="paragraph">
<p>For Mojos that are intended to be executed directly from the CLI, their parameters usually provide a means to be configured via <strong>system properties</strong> instead of a <code>&lt;configuration&gt;</code> section in the POM.</p>
</div>
<div class="paragraph">
<p>The plugin documentation for those parameters will list an expression that denotes the system properties for the configuration.</p>
</div>
<div class="paragraph">
<p>In the Mojo above, the parameter url is associated with the expression <em>${query.url}</em>, meaning its value can be specified by the system property query.url as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">mvn myquery:query <span class="nt">-Dquery</span>.url<span class="o">=</span>http://maven.apache.org</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Help Goal</strong></p>
</div>
<div class="paragraph">
<p>Most Maven plugins have a help goal that prints a description of the plugin and its parameters and types. For instance, to see help for the <em>javadoc</em> goal, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">mvn javadoc:help <span class="nt">-Ddetail</span> <span class="nt">-Dgoal</span><span class="o">=</span>javadoc</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Configuring Parameters</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Mapping Simple Objects</strong></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;myString&gt;</span>a string<span class="nt">&lt;/myString&gt;</span>
  <span class="nt">&lt;myBoolean&gt;</span>true<span class="nt">&lt;/myBoolean&gt;</span>
  <span class="nt">&lt;myInteger&gt;</span>10<span class="nt">&lt;/myInteger&gt;</span>
  <span class="nt">&lt;myDouble&gt;</span>1.0<span class="nt">&lt;/myDouble&gt;</span>
  <span class="nt">&lt;myFile&gt;</span>c:\temp<span class="nt">&lt;/myFile&gt;</span>
  <span class="nt">&lt;myURL&gt;</span>http://maven.apache.org<span class="nt">&lt;/myURL&gt;</span>
<span class="nt">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>Mapping Complex Objects</strong></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;person&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>Jason<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>van Zyl<span class="nt">&lt;/lastName&gt;</span>
  <span class="nt">&lt;/person&gt;</span>
<span class="nt">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;person</span> <span class="na">implementation=</span><span class="s">"com.mycompany.mojo.query.SuperPerson"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;firstName&gt;</span>Jason<span class="nt">&lt;/firstName&gt;</span>
    <span class="nt">&lt;lastName&gt;</span>van Zyl<span class="nt">&lt;/lastName&gt;</span>
  <span class="nt">&lt;/person&gt;</span>
<span class="nt">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>Mapping Collections</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Mapping Lists</strong></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyAnimalMojo</span> <span class="kd">extends</span> <span class="nc">AbstractMojo</span> <span class="o">{</span>
    <span class="nd">@Parameter</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">"animals"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">List</span> <span class="n">animals</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">MojoExecutionException</span> <span class="o">{</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;animals&gt;</span>
    <span class="nt">&lt;animal&gt;</span>cat<span class="nt">&lt;/animal&gt;</span>
    <span class="nt">&lt;animal&gt;</span>dog<span class="nt">&lt;/animal&gt;</span>
    <span class="nt">&lt;animal&gt;</span>aardvark<span class="nt">&lt;/animal&gt;</span>
  <span class="nt">&lt;/animals&gt;</span>
<span class="nt">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>Mapping Properties</strong></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">    <span class="nd">@Parameter</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">"myProperties"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Properties</span> <span class="n">myProperties</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;myProperties&gt;</span>
    <span class="nt">&lt;property&gt;</span>
      <span class="nt">&lt;name&gt;</span>propertyName1<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;value&gt;</span>propertyValue1<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property&gt;</span>
      <span class="nt">&lt;name&gt;</span>propertyName2<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;value&gt;</span>propertyValue2<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;/myProperties&gt;</span>
<span class="nt">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Configuring Build Plugins</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Using the <code>&lt;executions&gt;</code> Tag</strong></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>maven-myquery-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
          <span class="nt">&lt;id&gt;</span>execution1<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;phase&gt;</span>test<span class="nt">&lt;/phase&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            ...
          <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;goals&gt;</span>
            <span class="nt">&lt;goal&gt;</span>query<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;/goals&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
          <span class="nt">&lt;id&gt;</span>execution2<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            ...
          <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;goals&gt;</span>
            <span class="nt">&lt;goal&gt;</span>query<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;/goals&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
      <span class="nt">&lt;/executions&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span></code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The first execution with id "execution1" binds this configuration to the <strong>test</strong> phase.</p>
</li>
<li>
<p>The second execution does not have a <em>&lt;phase&gt;</em> tag, have a default phase binding.</p>
</li>
<li>
<p>If the goal has a default phase binding then it will execute in that phase.</p>
</li>
<li>
<p>But if the goal is not bound to any lifecycle phase then it simply won&#8217;t be executed during the build lifecycle.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that while execution id&#8217;s have to be unique among all executions of a single plugin within a POM, they don&#8217;t have to be unique across an inheritance hierarchy of POMs.</p>
</div>
<div class="paragraph">
<p>Executions of the same id from different POMs are merged.</p>
</div>
<div class="paragraph">
<p>The same applies to executions that are defined by profiles.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p><strong>Using the <code>&lt;dependencies&gt;</code> Tag</strong></p>
<div class="paragraph">
<p>You could configure the dependencies of the Build plugins, commonly to use a more recent dependency version.</p>
</div>
<div class="paragraph">
<p>For instance, the Maven Antrun Plugin version 1.2 uses Ant version 1.6.5, if you want to use the latest Ant version when running this plugin, you need to add &lt;dependencies&gt; element like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.2<span class="nt">&lt;/version&gt;</span>
    ...
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.apache.ant<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>ant<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.7.1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.apache.ant<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>ant-launcher<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.7.1<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>Using the <code>&lt;inherited&gt;</code> Tag In Build Plugins</strong></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.2<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;inherited&gt;</span>false<span class="nt">&lt;/inherited&gt;</span>
    ...
<span class="nt">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="maven-help-plugin">5.8. Maven Help Plugin</h3>
<div class="ulist">
<ul>
<li>
<p>The <strong>help:active-profiles</strong> Goal<a href="#mvnhelpplugin">[13]</a></p>
<div class="paragraph">
<p>The active-profiles goal is used to discover which profiles have been applied to the projects currently being built.</p>
</div>
<div class="paragraph">
<p>For each project in the build session, it will output a list of profiles which have been applied to that project, along with the source of the profile (<strong>POM</strong>, <strong>settings.xml</strong> or <strong>profiles.xml</strong>).</p>
</div>
<div class="paragraph">
<p>You can execute this goal using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># mvn help:active-profiles</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you could also use the output parameter to redirect output to a file.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <strong>help:all-profiles</strong> Goal</p>
<div class="paragraph">
<p>The all-profiles goal is used to discover all available profiles under the current project.</p>
</div>
<div class="paragraph">
<p>You can execute this goal using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># mvn help:all-profiles</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you could also use the output parameter to redirect output to a file.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <strong>help:describe</strong> Goal</p>
<div class="paragraph">
<p>The describe goal is used to discover information about Maven plugins.</p>
</div>
<div class="paragraph">
<p>Given either a plugin or a groupId, an artifactId and optionally a version, the goal will lookup that plugin and output details about it.</p>
</div>
<div class="paragraph">
<p>If the user also specifies which goal to describe, the describe goal will limit output to the details of that goal, including parameters.</p>
</div>
<div class="paragraph">
<p>You can execute this goal using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># mvn help:describe -DgroupId=org.somewhere -DartifactId=some-plugin -Dversion=0.0.0</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you could also use the output parameter to redirect output to a file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Refer to Configuring Describe Goal for more information about its configuration.</p>
</div>
</li>
<li>
<p>The <strong>help:effective-pom</strong> Goal</p>
<div class="paragraph">
<p>The effective-pom goal is used to make visible the POM that results from the application of interpolation, inheritance and active profiles.</p>
</div>
<div class="paragraph">
<p>It provides a useful way of removing the guesswork about just what ends up in the POM that Maven uses to build your project.</p>
</div>
<div class="paragraph">
<p>It will iterate over all projects in the current build session, printing the effective POM for each.</p>
</div>
<div class="paragraph">
<p>You can execute this goal using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># mvn help:effective-pom</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you could also use the output parameter to redirect output to a file.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <strong>help:effective-settings</strong> Goal</p>
<div class="paragraph">
<p>The effective-settings goal is used to view the settings that Maven actually uses to run the build.</p>
</div>
<div class="paragraph">
<p>These settings are a result of merging the global file with the user&#8217;s file, with the user&#8217;s file taking precedence.</p>
</div>
<div class="paragraph">
<p>You can execute this goal using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># mvn help:effective-settings</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you could also use the output parameter to redirect output to a file.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <strong>help:system</strong> Goal</p>
<div class="paragraph">
<p>The system goal is used to view the system information like system properties and environment variables.</p>
</div>
<div class="paragraph">
<p>You can execute this goal using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># mvn help:system</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
you could also use the output parameter to redirect output to a file.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The <strong>help:evaluate</strong> Goal</p>
<div class="paragraph">
<p>You could use this interactive goal to evaluate some Maven expressions. To do it, just call the <code>help:evaluate</code> goal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>mvn <span class="nb">help</span>:evaluate <span class="nt">-Dartifact</span><span class="o">=</span>org.apache.maven.plugins:maven-help-plugin
<span class="c">...
</span><span class="go">[INFO] [help:evaluate]
</span><span class="gp">[INFO] Enter the Maven expression i.e. $</span><span class="o">{</span>project.groupId<span class="o">}</span> or 0 to <span class="nb">exit</span>?:
<span class="gp">$</span><span class="o">{</span>project.artifactId<span class="o">}</span>
<span class="go">[INFO]
maven-help-plugin
</span><span class="gp">[INFO] Enter the Maven expression i.e. $</span><span class="o">{</span>project.groupId<span class="o">}</span> or 0 to <span class="nb">exit</span>?:
<span class="gp">$</span><span class="o">{</span>project.none<span class="o">}</span>
<span class="go">[INFO]
null object or invalid expression
</span><span class="c">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The artifact parameter refers to ask expressions on the artifact POM. If omitted, the evaluate goal uses the current pom.</p>
</div>
<div class="paragraph">
<p>You could ask for all Maven expressions listed in the Javadoc of the PluginParameterExpressionEvaluator class.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="maven-dependency-plugin">5.9. Maven Dependency Plugin</h3>
<div class="paragraph">
<p>The <a href="https://maven.apache.org/plugins/maven-dependency-plugin/">dependency</a> plugin provides the capability to manipulate artifacts. It can copy and/or unpack artifacts from local or remote repositories to a specified location.<a href="#mvndeplug">[19]</a></p>
</div>
<div class="paragraph">
<p>The Dependency plugin has several goals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dependency:analyze</code> analyzes the dependencies of this project and determines which are: used and declared; used and undeclared; unused and declared.</p>
</li>
<li>
<p><code>dependency:analyze-dep-mgt</code> analyzes your projects dependencies and lists mismatches between resolved dependencies and those listed in your <code>dependencyManagement</code> section.</p>
</li>
<li>
<p><code>dependency:analyze-only</code> is the same as analyze, but is meant to be bound in a pom. It does not fork the build and execute test-compile.</p>
</li>
<li>
<p><code>dependency:analyze-report</code> analyzes the dependencies of this project and produces a report that summarises which are: used and declared; used and undeclared; unused and declared.</p>
</li>
<li>
<p><code>dependency:analyze-duplicate</code> analyzes the <code>&lt;dependencies/&gt;</code> and <code>&lt;dependencyManagement/&gt;</code> tags in the <code>pom.xml</code> and determines the duplicate declared dependencies.</p>
</li>
<li>
<p><code>dependency:build-classpath</code> tells Maven to output the path of the dependencies from the local repository in a classpath format to be used in <code>java -cp</code>. The classpath file may also be attached and installed/deployed along with the main artifact.</p>
</li>
<li>
<p><code>dependency:copy</code> takes a list of artifacts defined in the plugin configuration section and copies them to a specified location, renaming them or stripping the version if desired. This goal can resolve the artifacts from remote repositories if they don&#8217;t exist in either the local repository or the reactor.</p>
</li>
<li>
<p><code>dependency:copy-dependencies</code> takes the list of project direct dependencies and optionally transitive dependencies and copies them to a specified location, stripping the version if desired. This goal can also be run from the command line.</p>
</li>
<li>
<p><code>dependency:display-ancestors</code> displays all ancestor POMs of the project. This may be useful in a continuous integration system where you want to know all parent poms of the project. This goal can also be run from the command line.</p>
</li>
<li>
<p><code>dependency:get</code> resolves a single artifact, eventually transitively, from a specified remote repository.</p>
</li>
<li>
<p><code>dependency:go-offline</code> tells Maven to resolve everything this project is dependent on (dependencies, plugins, reports) in preparation for going offline.</p>
</li>
<li>
<p><code>dependency:list</code> alias for resolve that lists the dependencies for this project.</p>
</li>
<li>
<p><code>dependency:list-classes</code> displays the fully package-qualified names of all classes found in a specified artifact.</p>
</li>
<li>
<p><code>dependency:list-repositories</code> collect all project dependencies and then lists the repositories used by the build and by the transitive dependencies.</p>
</li>
<li>
<p><code>dependency:properties</code> set a property for each project dependency containing the to the artifact on the file system.</p>
</li>
<li>
<p><code>dependency:purge-local-repository</code> tells Maven to clear dependency artifact files out of the local repository, and optionally re-resolve them.</p>
</li>
<li>
<p><code>dependency:resolve</code> tells Maven to resolve all dependencies and displays the version. JAVA 9 NOTE: will display the module name when running with Java 9.</p>
</li>
<li>
<p><code>dependency:resolve-plugins</code> tells Maven to resolve plugins and their dependencies.</p>
</li>
<li>
<p><code>dependency:sources</code> tells Maven to resolve all dependencies and their source attachments, and displays the version.</p>
</li>
<li>
<p><code>dependency:tree</code> displays the dependency tree for this project.</p>
</li>
<li>
<p><code>dependency:unpack</code> like copy but unpacks.</p>
</li>
<li>
<p><code>dependency:unpack-dependencies</code> like copy-dependencies but unpacks.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, Maven only downloads the actual JAR file of each dependency, not the sources and documentation files.<a href="#baeldungmvndeplug">[20]</a></p>
</div>
<div class="paragraph">
<p>To download just the sources, first, we should navigate to the directory containing the <code>pom.xml</code> and then execute the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">mvn dependency:sources</code></pre>
</div>
</div>
<div class="paragraph">
<p>It may take a while to download the sources. Similarly, to download just the Javadocs, we can issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">mvn dependency:resolve <span class="nt">-Dclassifier</span><span class="o">=</span>javadoc</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, we can download both of them in one command, too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">mvn dependency:sources dependency:resolve <span class="nt">-Dclassifier</span><span class="o">=</span>javadoc</code></pre>
</div>
</div>
<div class="paragraph">
<p>Obviously, if we add a new dependency after issuing these commands, we have to re-issue the commands to download sources and Javadocs for the new dependency.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-boot-maven-plugin">5.10. Spring Boot Maven Plugin</h3>
<div class="ulist">
<ul>
<li>
<p>Create a Spring MVC project with <a href="start.spring.io" class="bare">start.spring.io</a></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-sS</span> <span class="nt">-o</span> demo.zip <span class="s2">"https://start.spring.io/starter.zip?type=maven-project&amp;language=java&amp;bootVersion=2.5.6&amp;baseDir=demo&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;packaging=jar&amp;javaVersion=11&amp;dependencies=web,devtools,actuator"</span>
<span class="gp">$</span><span class="w"> </span>unzip demo.zip <span class="o">&amp;&amp;</span> <span class="nb">cd </span>demo</code></pre>
</div>
</div>
</li>
<li>
<p>Display help information on spring-boot-maven-plugin.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mvn spring-boot:help
<span class="go">
</span><span class="c">...
</span><span class="go">
This plugin has 7 goals:

spring-boot:build-image
  Package an application into a OCI image using a buildpack.

spring-boot:build-info
  Generate a build-info.properties file based on the content of the current
  MavenProject.

spring-boot:help
  Display help information on spring-boot-maven-plugin.
</span><span class="gp">  Call mvn spring-boot:help -Ddetail=true -Dgoal=&lt;goal-name&gt;</span><span class="w"> </span>to display
<span class="go">  parameter details.

spring-boot:repackage
  Repackage existing JAR and WAR archives so that they can be executed from the
  command line using java -jar. With layout=NONE can also be used simply to
  package a JAR with nested dependencies (and no main class, so not executable).

spring-boot:run
  Run an application in place.

spring-boot:start
  Start a spring application. Contrary to the run goal, this does not block and
  allows other goals to operate on the application. This goal is typically used
  in integration test scenario where the application is started before a test
  suite and stopped after.

spring-boot:stop
  Stop an application that has been started by the 'start' goal. Typically
  invoked once a test suite has completed.

</span><span class="c">...</span></code></pre>
</div>
</div>
</li>
<li>
<p>Build and run Spring boot</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mvn package
<span class="gp">$</span><span class="w"> </span>java <span class="nt">-Dmanagement</span>.endpoints.web.exposure.include<span class="o">=</span>health <span class="nt">-Dserver</span>.port<span class="o">=</span>8088 <span class="nt">-jar</span> target/demo-0.0.1-SNAPSHOT.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open another command shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-i</span> localhost:8088/actuator/health
<span class="go">HTTP/1.1 200
Content-Type: application/vnd.spring-boot.actuator.v3+json
Transfer-Encoding: chunked
Date: Mon, 01 Nov 2021 10:52:48 GMT

{"status":"UP"}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Show <code>META-INF/MANIFEST.MF</code> of <em>demo-0.0.1-SNAPSHOT.jar</em></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>jar <span class="nt">-xf</span> target/demo-0.0.1-SNAPSHOT.jar META-INF/MANIFEST.MF

<span class="gp">$</span><span class="w"> </span><span class="nb">cat </span>META-INF/MANIFEST.MF
<span class="go">Manifest-Version: 1.0</span>
<span class="go">Created-By: Maven Jar Plugin 3.2.0</span>
<span class="go">Build-Jdk-Spec: 11</span>
<span class="go">Implementation-Title: demo</span>
<span class="go">Implementation-Version: 0.0.1-SNAPSHOT</span>
<span class="hll"><span class="go">Main-Class: org.springframework.boot.loader.JarLauncher</span>
</span><span class="go">Start-Class: com.example.demo.DemoApplication</span>
<span class="go">Spring-Boot-Version: 2.5.6</span>
<span class="go">Spring-Boot-Classes: BOOT-INF/classes/</span>
<span class="go">Spring-Boot-Lib: BOOT-INF/lib/</span>
<span class="go">Spring-Boot-Classpath-Index: BOOT-INF/classpath.idx</span>
<span class="hll"><span class="go">Spring-Boot-Layers-Index: BOOT-INF/layers.idx</span>
</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="java-in-container">6. Java in Container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The linux <code>free</code> command detects memory info from <code>/proc/meminfo</code> instead of <code>/sys/fs/cgroup/memory/memory.stat</code>, that&#8217;s the container total memory is always the same with the virtual machine host total memory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>free
<span class="go">               total        used        free      shared  buff/cache   available
Mem:         8096728     3038492      219336        3208     5155612     5058236
Swap:              0           0           0
</span><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> eclipse-temurin:17 free
<span class="go">               total        used        free      shared  buff/cache   available
Mem:         8096728     2783748      157320        3232     5155660     4996244
Swap:              0           0           0
</span><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">-m</span> 512m eclipse-temurin:17 free
<span class="go">               total        used        free      shared  buff/cache   available
Mem:         8096728     2770564      170104        3208     5156060     5009280
Swap:              0           0           0
</span><span class="gp">$</span><span class="w"> </span><span class="c"># For Cgroup v1, use /sys/fs/cgroup/memory/memory.limit_in_bytes, instead of /sys/fs/cgroup/memory.max</span>
<span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">-m</span> 512m eclipse-temurin:17 <span class="nb">cat</span> /sys/fs/cgroup/memory.max
<span class="go">536870912
</span><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="k">$((</span><span class="m">536870912</span> <span class="o">/</span> <span class="m">1024</span> <span class="o">/</span> <span class="m">1024</span><span class="k">))</span>m
<span class="go">512m</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Identify the cgroup version on Linux</div>
<div class="paragraph">
<p>The cgroup version depends on the Linux distribution being used and the default cgroup version configured on the OS. To check which cgroup version your distribution uses, run the <code>stat -fc %T /sys/fs/cgroup/</code> command on the node: <a href="#k8scgroups">[18]</a></p>
</div>
<div class="paragraph">
<p>For cgroup v2, the output is <code>cgroup2fs</code>.</p>
</div>
<div class="paragraph">
<p>For cgroup v1, the output is <code>tmpfs</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We will use the <a href="https://docs.oracle.com/en/java/javase/17/gctuning/parallel-collector1.html">parallel collector</a> to demostrate the java VM container support. Unless the initial and maximum heap sizes are specified on the command line, they&#8217;re calculated based on the amount of memory on the machine. The default maximum heap size is one-fourth of the physical memory while the initial heap size is 1/64th of physical memory. The maximum amount of space allocated to the young generation is one third of the total heap size. <a href="#parallel-gc">[3]</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># Run Java in virtual machine host</span>
<span class="nv">$ </span>java <span class="nt">-XX</span>:+UseParallelGC <span class="nt">-XshowSettings</span>:vm <span class="nt">-version</span>
VM settings:
<span class="hll">    Max. Heap Size <span class="o">(</span>Estimated<span class="o">)</span>: 1.72G
</span>    Using VM: OpenJDK 64-Bit Server VM

openjdk version <span class="s2">"17.0.8"</span> 2023-07-18
OpenJDK Runtime Environment <span class="o">(</span>build 17.0.8+7-Debian-1deb12u1<span class="o">)</span>
OpenJDK 64-Bit Server VM <span class="o">(</span>build 17.0.8+7-Debian-1deb12u1, mixed mode, sharing<span class="o">)</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="container-detection-support">6.1. Container detection support</h3>
<div class="paragraph">
<p>The runtime <code>UseContainerSupport</code> option now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers. It uses this information to allocate system resources. This support is only available on Linux x64 platforms. If supported, the default for this flag is true, and container support is enabled by default. It can be disabled with <em>-XX:-UseContainerSupport</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>-XX:-UseContainerSupport</code> to disable container support</p>
<div class="paragraph">
<p>As we can see, the default java VM maximum heap size is always same with the host, and the maximum  heap size <em>873M</em> is about one fourth of the physical memory 4G.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run Java in container without memory limit</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> eclipse-temurin:17 java <span class="nt">-XX</span>:-UseContainerSupport <span class="nt">-XX</span>:+UseParallelGC <span class="nt">-XshowSettings</span>:vm <span class="nt">-version</span>
<span class="go">VM settings:</span>
<span class="hll"><span class="go">    Max. Heap Size (Estimated): 1.72G</span>
</span><span class="go">    Using VM: OpenJDK 64-Bit Server VM</span>

<span class="go">openjdk version "17.0.8" 2023-07-18</span>
<span class="go">OpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7)</span>
<span class="go">OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Run Java in container with memory limit</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">-m</span> 512m eclipse-temurin:17 java <span class="nt">-XX</span>:-UseContainerSupport <span class="nt">-XX</span>:+UseParallelGC <span class="nt">-XshowSettings</span>:vm <span class="nt">-version</span>
<span class="go">VM settings:</span>
<span class="hll"><span class="go">    Max. Heap Size (Estimated): 1.72G</span>
</span><span class="go">    Using VM: OpenJDK 64-Bit Server VM</span>

<span class="go">openjdk version "17.0.8" 2023-07-18</span>
<span class="go">OpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7)</span>
<span class="go">OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Use <code>-XX:+UseContainerSupport</code> to enable container support</p>
<div class="paragraph">
<p>The default value for this flag <code>-XX:+UseContainerSupport</code> is true, so we can run java without it. Now, the default maximum heap size is <em>114M</em>, which is about one fourth of the memory limit 512m.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run Java in container with memory limit</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">-m</span> 512m eclipse-temurin:17 java <span class="nt">-XX</span>:+UseParallelGC <span class="nt">-XshowSettings</span>:vm <span class="nt">-version</span>
<span class="go">VM settings:</span>
<span class="hll"><span class="go">    Max. Heap Size (Estimated): 114.00M</span>
</span><span class="go">    Using VM: OpenJDK 64-Bit Server VM</span>

<span class="go">openjdk version "17.0.8" 2023-07-18</span>
<span class="go">OpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7)</span>
<span class="go">OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use <code>-Xlog:os+container=trace</code> for maximum logging of container information.</p>
<div class="ulist">
<ul>
<li>
<p>cgroup v2</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">-m</span> 512m eclipse-temurin:17 java <span class="nt">-Xlog</span>:os+container<span class="o">=</span>trace <span class="nt">-version</span>
<span class="go">[0.000s][trace][os,container] OSContainer::init: Initializing Container Support</span>
<span class="go">[0.000s][debug][os,container] Detected optional pids controller entry in /proc/cgroups</span>
<span class="hll"><span class="go">[0.001s][debug][os,container] Detected cgroups v2 unified hierarchy</span>
</span><span class="go">[0.001s][trace][os,container] Path to /cpu.max is /sys/fs/cgroup/cpu.max</span>
<span class="go">[0.001s][trace][os,container] Raw value for CPU quota is: max</span>
<span class="go">[0.001s][trace][os,container] CPU Quota is: -1</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Path to /cpu.max is /sys/fs/cgroup/cpu.max</span>
</span><span class="hll"><span class="go">[0.001s][trace][os,container] CPU Period is: 100000</span>
</span><span class="go">[0.001s][trace][os,container] OSContainer::active_processor_count: 4</span>
<span class="go">[0.001s][trace][os,container] CgroupSubsystem::active_processor_count (cached): 4</span>
<span class="go">[0.001s][trace][os,container] total physical memory: 8291049472</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Path to /memory.max is /sys/fs/cgroup/memory.max</span>
</span><span class="go">[0.001s][trace][os,container] Raw value for memory limit is: 536870912</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Memory Limit is: 536870912</span>
</span><span class="go">[0.002s][trace][os,container] CgroupSubsystem::active_processor_count (cached): 4</span>
<span class="go">[0.016s][trace][os,container] CgroupSubsystem::active_processor_count (cached): 4</span>
<span class="go">[0.024s][trace][os,container] total physical memory: 8291049472</span>
<span class="go">[0.025s][trace][os,container] Path to /memory.max is /sys/fs/cgroup/memory.max</span>
<span class="go">[0.025s][trace][os,container] Raw value for memory limit is: 536870912</span>
<span class="go">[0.025s][trace][os,container] Memory Limit is: 536870912</span>
<span class="go">[0.025s][trace][os,container] Path to /memory.current is /sys/fs/cgroup/memory.current</span>
<span class="go">[0.025s][trace][os,container] Memory Usage is: 18276352</span>
<span class="go">. . .</span>
<span class="go">openjdk version "17.0.8" 2023-07-18</span>
<span class="go">OpenJDK Runtime Environment Temurin-17.0.8+7 (build 17.0.8+7)</span>
<span class="go">[0.046s][trace][os,container] Path to /memory.current is /sys/fs/cgroup/memory.current</span>
<span class="go">OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (build 17.0.8+7, mixed mode, sharing)</span>
<span class="go">[0.046s][trace][os,container] Memory Usage is: 19017728</span></code></pre>
</div>
</div>
</li>
<li>
<p>cgroup v1</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">-m</span> 512m openjdk:11 java <span class="nt">-Xlog</span>:os+container<span class="o">=</span>trace <span class="nt">-version</span>
<span class="go">WARNING: Your kernel does not support swap limit capabilities or the cgroup is not mounted. Memory limited without swap.</span>
<span class="go">[0.000s][trace][os,container] OSContainer::init: Initializing Container Support</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Path to /memory.use_hierarchy is /sys/fs/cgroup/memory/memory.use_hierarchy</span>
</span><span class="go">[0.001s][trace][os,container] Use Hierarchy is: 1</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Path to /memory.limit_in_bytes is /sys/fs/cgroup/memory/memory.limit_in_bytes</span>
</span><span class="go">[0.001s][trace][os,container] Memory Limit is: 536870912</span>
<span class="go">[0.001s][info ][os,container] Memory Limit is: 536870912</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Path to /cpu.cfs_quota_us is /sys/fs/cgroup/cpu,cpuacct/cpu.cfs_quota_us</span>
</span><span class="go">[0.001s][trace][os,container] CPU Quota is: -1</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Path to /cpu.cfs_period_us is /sys/fs/cgroup/cpu,cpuacct/cpu.cfs_period_us</span>
</span><span class="go">[0.001s][trace][os,container] CPU Period is: 100000</span>
<span class="hll"><span class="go">[0.001s][trace][os,container] Path to /cpu.shares is /sys/fs/cgroup/cpu,cpuacct/cpu.shares</span>
</span><span class="go">[0.001s][trace][os,container] CPU Shares is: 1024</span>
<span class="go">[0.001s][trace][os,container] OSContainer::active_processor_count: 2</span>
<span class="go">[0.001s][trace][os,container] OSContainer::active_processor_count (cached): 2</span>
<span class="go">[0.003s][trace][os,container] OSContainer::active_processor_count (cached): 2</span>
<span class="go">[0.039s][trace][os,container] Path to /cpu.cfs_quota_us is /sys/fs/cgroup/cpu,cpuacct/cpu.cfs_quota_us</span>
<span class="go">[0.040s][trace][os,container] CPU Quota is: -1</span>
<span class="go">[0.040s][trace][os,container] Path to /cpu.cfs_period_us is /sys/fs/cgroup/cpu,cpuacct/cpu.cfs_period_us</span>
<span class="go">[0.040s][trace][os,container] CPU Period is: 100000</span>
<span class="go">[0.040s][trace][os,container] Path to /cpu.shares is /sys/fs/cgroup/cpu,cpuacct/cpu.shares</span>
<span class="go">[0.041s][trace][os,container] CPU Shares is: 1024</span>
<span class="go">[0.041s][trace][os,container] OSContainer::active_processor_count: 2</span>
<span class="go">[0.063s][trace][os,container] Path to /memory.limit_in_bytes is /sys/fs/cgroup/memory/memory.limit_in_bytes</span>
<span class="go">[0.064s][trace][os,container] Memory Limit is: 536870912</span>
<span class="go">[0.064s][trace][os,container] Path to /memory.usage_in_bytes is /sys/fs/cgroup/memory/memory.usage_in_bytes</span>
<span class="go">[0.065s][trace][os,container] Memory Usage is: 10055680</span>
<span class="go">. . .</span>
<span class="go">openjdk version "11.0.13" 2021-10-19</span>
<span class="go">OpenJDK Runtime Environment 18.9 (build 11.0.13+8)</span>
<span class="go">OpenJDK 64-Bit Server VM 18.9 (build 11.0.13+8, mixed mode, sharing)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="spring-boot-in-kubernetes">6.2. Spring Boot in Kubernetes</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create Spring MVC project with <a href="https://start.spring.io/">start.spring.io</a></p>
<div class="paragraph">
<p>Use <a href="https://start.spring.io/">start.spring.io</a> to create a "web" project. In the "Dependencies" dialog search for and add the "web", "devtools", and "actuator" dependencies as shown in the screenshot, and select "Project" as "Maven", "Packaging" as "Jar", "Java" as "17".</p>
</div>
<div class="paragraph">
<p>Hit the "Generate" button, download the zip, and unpack it into a folder on your computer.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/compile-and-run-java-in-container/start.spring.io.png" alt="start.spring.io" width="75%" height="75%">
</div>
</div>
</li>
<li>
<p>Build OCI image with <code>Dockerfile</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="dockerfile"><span class="c"># Dockerfile</span>
<span class="k">FROM</span><span class="s"> eclipse-temurin:17</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> ./target/*.jar /app/app.jar</span>
<span class="k">CMD</span><span class="s"> ["java", "-jar", "/app/app.jar"]</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mvn package <span class="o">&amp;&amp;</span> docker build <span class="nb">.</span> <span class="nt">-t</span> demo:0.0.1-SNAPSHOT
<span class="go">[INFO] Scanning for projects...
. . .
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  6.251 s
[INFO] Finished at: 2023-08-24T19:17:59+08:00
[INFO] ------------------------------------------------------------------------
[+] Building 1.0s (8/8) FINISHED                                  docker:default
</span><span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load build definition from Dockerfile                        0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> transferring dockerfile: 157B                                        0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load .dockerignore                                           0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> transferring context: 2B                                             0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load metadata <span class="k">for </span>docker.io/library/eclipse-temurin:17       0.9s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>1/3] FROM docker.io/library/eclipse-temurin:17@sha256:80c017af9fdd791  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> resolve docker.io/library/eclipse-temurin:17@sha256:80c017af9fdd791  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load build context                                           0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> transferring context: 80B                                            0.0s
<span class="gp"> =&gt;</span><span class="w"> </span>CACHED <span class="o">[</span>2/3] WORKDIR /app                                               0.0s
<span class="gp"> =&gt;</span><span class="w"> </span>CACHED <span class="o">[</span>3/3] COPY ./target/<span class="k">*</span>.jar /app/app.jar                           0.0s
<span class="gp"> =&gt;</span><span class="w"> </span>exporting to image                                                      0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting layers                                                     0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting manifest sha256:e4a012ec0d765e96c790f0d38013b5921ed06ba71  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting config sha256:fca9cba8c7dda76c92f2165b135af18e0059ea8f2db  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting attestation manifest sha256:1230a2e4c5f1f369ee7ee1e57d5a3  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting manifest list sha256:3d33699c48a6990ffe8cbc2cecc868508ca3  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> naming to docker.io/library/demo:0.0.1-SNAPSHOT                      0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> unpacking to docker.io/library/demo:0.0.1-SNAPSHOT                   0.0s</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">--name</span> demo -^Cp 8088:8080 demo:0.0.1-SNAPSHOT
<span class="gp">$</span><span class="w"> </span>docker ps
<span class="go">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS                                       NAMES
</span><span class="gp">3c25db97db8b   demo:0.0.1-SNAPSHOT   "/__cacert_entrypoin…"   21 seconds ago   Up 19 seconds   0.0.0.0:8088-&gt;</span>8080/tcp, :::8088-&gt;8080/tcp   demo
<span class="gp">$</span><span class="w"> </span>curl <span class="nt">-iI</span> localhost:8088/actuator/health
<span class="go">HTTP/1.1 200
Content-Type: application/vnd.spring-boot.actuator.v3+json
Transfer-Encoding: chunked
Date: Thu, 24 Aug 2023 11:11:37 GMT

</span><span class="gp">$</span><span class="w"> </span>docker stop demo
<span class="go">demo</span></code></pre>
</div>
</div>
</li>
<li>
<p>Build OCI image with multiple layers with layertools</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To make it easier to create optimized Docker images, Spring Boot supports adding a layer index file to the jar. It provides a list of layers and the parts of the jar that should be contained within them. The list of layers in the index is ordered based on the order in which the layers should be added to the Docker/OCI image. Out-of-the-box, the following layers are supported: <a href="#idxspringboot">[15]</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>dependencies (for regular released dependencies)</p>
</li>
<li>
<p>spring-boot-loader (for everything under org/springframework/boot/loader)</p>
</li>
<li>
<p>snapshot-dependencies (for snapshot dependencies)</p>
</li>
<li>
<p>application (for application classes and resources)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>java <span class="nt">-Djarmode</span><span class="o">=</span>layertools <span class="se">\</span>
<span class="gp">&gt;</span><span class="w"> </span><span class="nt">-jar</span> target/demo-0.0.1-SNAPSHOT.jar extract <span class="nt">--destination</span> layers
<span class="go">
</span><span class="gp">$</span><span class="w"> </span>tree <span class="nt">-L</span> 3 layers/
<span class="go">layers/
├── application
│   ├── BOOT-INF
│   │   ├── classes
│   │   ├── classpath.idx
│   │   └── layers.idx
│   └── META-INF
│       ├── MANIFEST.MF
│       └── maven
├── dependencies
│   └── BOOT-INF
│       └── lib
├── snapshot-dependencies
└── spring-boot-loader
    └── org
        └── springframework</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This layering is designed to separate code based on how likely it is to change between application builds. Library code is less likely to change between builds, so it is placed in its own layers to allow tooling to re-use the layers from cache. Application code is more likely to change between builds so it is isolated in a separate layer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="dockerfile"><span class="c"># Dockerfile.layers</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">eclipse-temurin:17</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="s">builder</span>
<span class="k">WORKDIR</span><span class="s"> /build</span>
<span class="k">COPY</span><span class="s"> target/*.jar build.jar</span>
<span class="k">RUN </span>java <span class="nt">-Djarmode</span><span class="o">=</span>layertools <span class="nt">-jar</span> build.jar extract

<span class="k">FROM</span><span class="s"> eclipse-temurin:17</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> --from=builder /build/dependencies/ ./</span>
<span class="k">COPY</span><span class="s"> --from=builder /build/spring-boot-loader/ ./</span>
<span class="k">COPY</span><span class="s"> --from=builder /build/snapshot-dependencies/ ./</span>
<span class="k">COPY</span><span class="s"> --from=builder /build/application/ ./</span>

<span class="k">CMD</span><span class="s"> ["java", "org.springframework.boot.loader.JarLauncher"]</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker build <span class="nb">.</span> <span class="nt">--no-cache</span> <span class="nt">-t</span> demo:0.0.2-SNAPSHOT <span class="nt">-f</span> Dockerfile.layers
<span class="go">[+] Building 3.0s (13/13) FINISHED                                docker:default
</span><span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load build definition from Dockerfile.layers                 0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> transferring dockerfile: 472B                                        0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load .dockerignore                                           0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> transferring context: 2B                                             0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load metadata <span class="k">for </span>docker.io/library/eclipse-temurin:17       0.9s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>builder 1/4] FROM docker.io/library/eclipse-temurin:17@sha256:80c017a  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> resolve docker.io/library/eclipse-temurin:17@sha256:80c017af9fdd791  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>internal] load build context                                           0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> transferring context: 80B                                            0.0s
<span class="gp"> =&gt;</span><span class="w"> </span>CACHED <span class="o">[</span>builder 2/4] WORKDIR /build                                       0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>builder 3/4] COPY target/<span class="k">*</span>.jar build.jar                                 0.1s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>builder 4/4] RUN java <span class="nt">-Djarmode</span><span class="o">=</span>layertools <span class="nt">-jar</span> build.jar extract        0.7s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>stage-1 3/6] COPY <span class="nt">--from</span><span class="o">=</span>builder /build/dependencies/ ./                 0.1s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>stage-1 4/6] COPY <span class="nt">--from</span><span class="o">=</span>builder /build/spring-boot-loader/ ./           0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>stage-1 5/6] COPY <span class="nt">--from</span><span class="o">=</span>builder /build/snapshot-dependencies/ ./        0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">[</span>stage-1 6/6] COPY <span class="nt">--from</span><span class="o">=</span>builder /build/application/ ./                  0.1s
<span class="gp"> =&gt;</span><span class="w"> </span>exporting to image                                                      1.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting layers                                                     0.7s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting manifest sha256:1a91d5a8cc8375daa315d4c5cb805abf4bcc093ad  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting config sha256:2279f2bdfba548c53026f7f906bf46d596b86c3d380  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting attestation manifest sha256:0d7aa2da9d689d08e3209b2ac922e  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> exporting manifest list sha256:874e4bcc01e000241869369b16107740548d  0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> naming to docker.io/library/demo:0.0.2-SNAPSHOT                      0.0s
<span class="gp"> =&gt;</span><span class="w"> </span><span class="o">=&gt;</span> unpacking to docker.io/library/demo:0.0.2-SNAPSHOT                   0.2s</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">--name</span> demo2 <span class="nt">-d</span> <span class="nt">-p</span> 8088:8080 demo:0.0.2-SNAPSHOT
<span class="go">d1abf1fb78010bc1c2e5253657e3952ecb626abcac6a71c2a6752e7d8065481f
</span><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-iI</span> localhost:8088/actuator/health
<span class="go">HTTP/1.1 200
Content-Type: application/vnd.spring-boot.actuator.v3+json
Transfer-Encoding: chunked
Date: Thu, 24 Aug 2023 11:25:45 GMT

</span><span class="gp">$</span><span class="w"> </span>docker stop demo2
<span class="go">demo2</span></code></pre>
</div>
</div>
</li>
<li>
<p>Build OCI image with Jib</p>
<div class="paragraph">
<p>Jib, a Maven plugin for building Docker and OCI images for your Java applications, developed by Google. Unlike dockerfile-maven, it does not require a Dockerfile.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-maven-plugin">Google&#8217;s Jib</a> recognizes that Spring Boot applications are packaged as fat JARs and automatically separates the application into multiple layers: dependencies, resources, and classes. However, Jib is not directly compatible with Spring Boot&#8217;s layered JAR feature which uses <code>layertools</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;plugins&gt;</span>
  <span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.google.cloud.tools<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>jib-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.4.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
      <span class="nt">&lt;from&gt;</span>
        <span class="nt">&lt;image&gt;</span>
          eclipse-temurin:17@sha256:80c017af9fdd7913c7ffaffe398c1a5ca808d29befcc9a74c0f542b1b133f53c
        <span class="nt">&lt;/image&gt;</span>
      <span class="nt">&lt;/from&gt;</span>
      <span class="nt">&lt;to&gt;</span>
        <span class="nt">&lt;image&gt;</span>${docker.image.prefix}/${project.artifactId}<span class="nt">&lt;/image&gt;</span>
        <span class="nt">&lt;tags&gt;</span>
          <span class="nt">&lt;tag&gt;</span>${project.version}<span class="nt">&lt;/tag&gt;</span>
        <span class="nt">&lt;/tags&gt;</span>
      <span class="nt">&lt;/to&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
  <span class="nt">&lt;/plugin&gt;</span>
  ...
<span class="nt">&lt;/plugins&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">mvn compile jib:build</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>jib:build</code> goal builds and pushes the image. If you would rather just build the image without pushing, you can use <code>jib:dockerBuild</code>.</p>
</div>
</li>
<li>
<p>Build OCI image with <code>mvn spring-boot:build-image</code> (<a href="https://paketo.io/">paketo.io</a>)</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mvn spring-boot:build-image
<span class="go">[INFO] Scanning for projects...
. . .
[INFO] Building image 'docker.io/library/demo:0.0.1-SNAPSHOT'
. . .
[INFO]     [creator]     Paketo Buildpack for BellSoft Liberica 10.2.6
[INFO]     [creator]       https://github.com/paketo-buildpacks/bellsoft-liberica
[INFO]     [creator]       Build Configuration:
</span><span class="gp">[INFO]     [creator]         $</span>BP_JVM_JLINK_ARGS           <span class="nt">--no-man-pages</span> <span class="nt">--no-header-files</span> <span class="nt">--strip-debug</span> <span class="nt">--compress</span><span class="o">=</span>1  configure custom <span class="nb">link </span>arguments <span class="o">(</span><span class="nt">--output</span> must be omitted<span class="o">)</span>
<span class="gp">[INFO]     [creator]         $</span>BP_JVM_JLINK_ENABLED        <span class="nb">false            </span>enables running jlink tool to generate custom JRE
<span class="gp">[INFO]     [creator]         $</span>BP_JVM_TYPE                 JRE              the JVM <span class="nb">type</span> - JDK or JRE
<span class="gp">[INFO]     [creator]         $</span>BP_JVM_VERSION              17               the Java version
<span class="go">[INFO]     [creator]       Launch Configuration:
</span><span class="gp">[INFO]     [creator]         $</span>BPL_DEBUG_ENABLED           <span class="nb">false            </span>enables Java remote debugging support
<span class="gp">[INFO]     [creator]         $</span>BPL_DEBUG_PORT              8000             configure the remote debugging port
<span class="gp">[INFO]     [creator]         $</span>BPL_DEBUG_SUSPEND           <span class="nb">false            </span>configure whether to <span class="nb">suspend </span>execution <span class="k">until </span>a debugger has attached
<span class="gp">[INFO]     [creator]         $</span>BPL_HEAP_DUMP_PATH                           write heap dumps on error to this path
<span class="gp">[INFO]     [creator]         $</span>BPL_JAVA_NMT_ENABLED        <span class="nb">true             </span>enables Java Native Memory Tracking <span class="o">(</span>NMT<span class="o">)</span>
<span class="gp">[INFO]     [creator]         $</span>BPL_JAVA_NMT_LEVEL          summary          configure level of NMT, summary or detail
<span class="gp">[INFO]     [creator]         $</span>BPL_JFR_ARGS                                 configure custom Java Flight Recording <span class="o">(</span>JFR<span class="o">)</span> arguments
<span class="gp">[INFO]     [creator]         $</span>BPL_JFR_ENABLED             <span class="nb">false            </span>enables Java Flight Recording <span class="o">(</span>JFR<span class="o">)</span>
<span class="gp">[INFO]     [creator]         $</span>BPL_JMX_ENABLED             <span class="nb">false            </span>enables Java Management Extensions <span class="o">(</span>JMX<span class="o">)</span>
<span class="gp">[INFO]     [creator]         $</span>BPL_JMX_PORT                5000             configure the JMX port
<span class="gp">[INFO]     [creator]         $</span>BPL_JVM_HEAD_ROOM           0                the headroom <span class="k">in </span>memory calculation
<span class="gp">[INFO]     [creator]         $</span>BPL_JVM_LOADED_CLASS_COUNT  35% of classes   the number of loaded classes <span class="k">in </span>memory calculation
<span class="gp">[INFO]     [creator]         $</span>BPL_JVM_THREAD_COUNT        250              the number of threads <span class="k">in </span>memory calculation
<span class="gp">[INFO]     [creator]         $</span>JAVA_TOOL_OPTIONS                            the JVM launch flags
<span class="go">[INFO]     [creator]         Using Java version 17 extracted from MANIFEST.MF
[INFO]     [creator]       BellSoft Liberica JRE 17.0.7: Contributing to layer
. . .
[INFO]     [creator]     Saving docker.io/library/demo:0.0.1-SNAPSHOT...
[INFO]     [creator]     *** Images (702b824ba18f):
[INFO]     [creator]           docker.io/library/demo:0.0.1-SNAPSHOT
[INFO]
[INFO] Successfully built image 'docker.io/library/demo:0.0.1-SNAPSHOT'
. . .</span></code></pre>
</div>
</div>
</li>
<li>
<p>Deploy demo.app into Kubernetes</p>
<div class="ulist">
<ul>
<li>
<p>unable to calculate memory configuration</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># demo.yaml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">demo</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">demo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">demo:0.0.1-SNAPSHOT</span>
          <span class="na">resources</span><span class="pi">:</span>
            <span class="na">requests</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>
            <span class="na">limits</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s">250m</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">256Mi</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>kubectl apply <span class="nt">-f</span> demo.yaml
<span class="go">deployment.apps/demo created</span>

<span class="gp">$</span><span class="w"> </span>kubectl get po demo-f74fb85d9-gh28w
<span class="go">NAME                   READY   STATUS   RESTARTS      AGE</span>
<span class="go">demo-f74fb85d9-gh28w   0/1     Error    3 (34s ago)   52s</span>

<span class="gp">$</span><span class="w"> </span>kubectl logs demo-f74fb85d9-gh28w
<span class="go">Setting Active Processor Count to 2</span>
<span class="go">unable to calculate memory configuration</span>
<span class="hll"><span class="go">fixed memory regions require 597169K which is greater than 256M available for allocation: -XX:MaxDirectMemorySize=10M, -XX:MaxMetaspaceSize=85169K, -XX:ReservedCodeCacheSize=240M, -Xss1M * 250 threads</span>
</span><span class="go">ERROR: failed to launch: exec.d: failed to execute exec.d file at path '/layers/paketo-buildpacks_bellsoft-liberica/helper/exec.d/memory-calculator': exit status 1</span></code></pre>
</div>
</div>
</li>
<li>
<p>Java VM  Garbage Collection Tuning</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yml"><span class="c1"># demo.yaml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">demo</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">demo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">demo:0.0.1-SNAPSHOT</span>
<span class="hll">          <span class="na">env</span><span class="pi">:</span>
</span><span class="hll">            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">JAVA_TOOL_OPTIONS</span>
</span><span class="hll">              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-XX:MaxDirectMemorySize=8M</span><span class="nv"> </span><span class="s">-XX:MaxMetaspaceSize=64M</span><span class="nv"> </span><span class="s">-XX:ReservedCodeCacheSize=16M</span><span class="nv"> </span><span class="s">-Xss512K"</span>
</span>          <span class="na">resources</span><span class="pi">:</span>
            <span class="na">requests</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>
            <span class="na">limits</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s">250m</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">256Mi</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>kubectl get po <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>demo
<span class="go">NAME                    READY   STATUS    RESTARTS   AGE
demo-7b848bcfd6-82lms   1/1     Running   0          25s

</span><span class="gp">$</span><span class="w"> </span>kubectl logs <span class="nt">-f</span> demo-7b848bcfd6-82lms
<span class="go">Setting Active Processor Count to 2
Calculated JVM Memory Configuration: -Xmx43M (Total Memory: 256M, Thread Count: 250, Loaded Class Count: 12623, Headroom: 0%)
Enabling Java Native Memory Tracking
Adding 128 container CA certificates to JVM truststore
Spring Cloud Bindings Enabled
Picked up JAVA_TOOL_OPTIONS: -XX:MaxDirectMemorySize=8M -XX:MaxMetaspaceSize=64M -XX:ReservedCodeCacheSize=16M -Xss512K -Djava.security.properties=/layers/paketo-buildpacks_bellsoft-liberica/java-security-properties/java-security.properties -XX:+ExitOnOutOfMemoryError -XX:ActiveProcessorCount=2 -Xmx43M -XX:+UnlockDiagnosticVMOptions -XX:NativeMemoryTracking=summary -XX:+PrintNMTStatistics -Dorg.springframework.cloud.bindings.boot.enable=true

</span><span class="c">...
</span><span class="go">
2021-11-02 07:34:06.238  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2021-11-02 07:34:06.432  INFO 1 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 28.591 seconds (JVM running for 32.397)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>kubectl expose deployment demo <span class="nt">--port</span> 8080 <span class="nt">--type</span> NodePort
<span class="go">service/demo exposed

</span><span class="gp">$</span><span class="w"> </span>kubectl get svc <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>demo
<span class="go">NAME   TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
</span><span class="gp">demo   NodePort   10.99.172.195   &lt;none&gt;</span><span class="w">        </span>8080:30227/TCP   6s
<span class="go">
</span><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-i</span> localhost:30227
<span class="go">HTTP/1.1 404
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
Content-Type: application/json
Transfer-Encoding: chunked
Date: Tue, 02 Nov 2021 07:42:29 GMT

{"timestamp":"2021-11-02T07:42:29.133+00:00","status":404,"error":"Not Found","path":"/"}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Liveness and Readiness Probes with Spring Boot</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># demo.yaml</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">demo</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">demo</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">demo</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">demo:0.0.1-SNAPSHOT</span>
          <span class="na">env</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">JAVA_TOOL_OPTIONS</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-XX:MaxDirectMemorySize=8M</span><span class="nv"> </span><span class="s">-XX:MaxMetaspaceSize=64M</span><span class="nv"> </span><span class="s">-XX:ReservedCodeCacheSize=16M</span><span class="nv"> </span><span class="s">-Xss512K"</span>
<span class="hll">          <span class="na">args</span><span class="pi">:</span>
</span><span class="hll">            <span class="pi">-</span> <span class="s">Dmanagement.endpoint.health.group.health.include=readiness,liveness</span>
</span><span class="hll">            <span class="pi">-</span> <span class="s">Dmanagement.endpoints.web.exposure.include=health</span>
</span><span class="hll">          <span class="na">livenessProbe</span><span class="pi">:</span>
</span><span class="hll">            <span class="na">initialDelaySeconds</span><span class="pi">:</span> <span class="m">60</span>
</span><span class="hll">            <span class="na">httpGet</span><span class="pi">:</span>
</span><span class="hll">              <span class="na">path</span><span class="pi">:</span> <span class="s">/actuator/health/liveness</span>
</span><span class="hll">              <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>
</span><span class="hll">          <span class="na">readinessProbe</span><span class="pi">:</span>
</span><span class="hll">            <span class="na">initialDelaySeconds</span><span class="pi">:</span> <span class="m">60</span>
</span><span class="hll">            <span class="na">httpGet</span><span class="pi">:</span>
</span><span class="hll">              <span class="na">path</span><span class="pi">:</span> <span class="s">/actuator/health/readiness</span>
</span><span class="hll">              <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>
</span>          <span class="na">resources</span><span class="pi">:</span>
            <span class="na">requests</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">128Mi</span>
            <span class="na">limits</span><span class="pi">:</span>
              <span class="na">cpu</span><span class="pi">:</span> <span class="s">250m</span>
              <span class="na">memory</span><span class="pi">:</span> <span class="s">256Mi</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>kubectl get po <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>demo
<span class="go">NAME                    READY   STATUS    RESTARTS   AGE
demo-5f9cd9c556-mwkrx   1/1     Running   0          110s

</span><span class="gp">$</span><span class="w"> </span>curl <span class="nt">-i</span> localhost:30227/actuator/health
<span class="go">HTTP/1.1 200
Content-Type: application/vnd.spring-boot.actuator.v3+json
Transfer-Encoding: chunked
Date: Tue, 02 Nov 2021 07:48:07 GMT

{"status":"UP","groups":["liveness","readiness"]}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="java-programming-lanuage">7. Java programming lanuage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java provides three types of comments: <code>//</code> for single-line, <code>/* &#8230;&#8203; */</code> for multi-line, and <code>/** &#8230;&#8203; */</code> for Javadoc comments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Comments</span> <span class="o">{</span>
    <span class="cm">/**
     * This is a **Javadoc comment**.
     * It is used to document the main method and can be processed by Javadoc tools.
     *
     * @param args Command-line arguments passed to the program
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// This is a single-line comment</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello, World!"</span><span class="o">);</span> <span class="c1">// This prints a message to the console</span>

        <span class="cm">/*
         * This is a multi-line comment.
         * It spans multiple lines.
         */</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Multi-line comment example"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Java is a strongly typed language, which means that every variable must have a declared type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// variables</span>
<span class="kt">double</span> <span class="n">salary</span><span class="o">;</span>
<span class="n">salary</span> <span class="o">=</span> <span class="mf">65_000.0</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">vacationDays</span> <span class="o">=</span> <span class="mi">12</span><span class="o">;</span>

<span class="c1">// constants</span>
<span class="kd">final</span> <span class="kt">double</span> <span class="no">CM_PER_INCH</span> <span class="o">=</span> <span class="mf">2.54</span><span class="o">;</span>

<span class="c1">// var: local variable type inference</span>
<span class="kt">var</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">;</span> <span class="c1">// double x = 3.14</span>

<span class="c1">// enumerated types: a restricted set of values</span>
<span class="c1">// enum Size { SMALL, MEDIUM, LARGE, EXTRA_LARGE };</span>
<span class="nc">Size</span> <span class="n">s</span> <span class="o">=</span> <span class="nc">Size</span><span class="o">.</span><span class="na">MEDIUM</span><span class="o">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span>   <span class="c1">// 4 bytes</span>
<span class="kt">short</span> <span class="c1">// 2 bytes</span>
<span class="kt">long</span>  <span class="c1">// 8 bytes</span>
<span class="kt">byte</span>  <span class="c1">// 1 bytes</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Java does not have any <code>unsigned</code> versions of the <code>int</code>, <code>long</code>, <code>short</code>, or <code>byte</code> types.</p>
</li>
<li>
<p>Long integer numbers have a suffix <code>L</code> or <code>l</code> (e.g., <code>4000000000L</code>).</p>
</li>
<li>
<p>Hexadecimal numbers have a prefix <code>0x</code> or <code>0X</code> (e.g., <code>0xCAFE</code>).</p>
</li>
<li>
<p>Octal numbers have a prefix <code>0</code> (e.g., <code>010</code> is <code>8</code>)—few programmers use octal constants.</p>
</li>
<li>
<p>Numbers can write in binary with a prefix <code>0b</code> or <code>0B</code> (e.g., <code>0b1001</code> is <code>9</code>).</p>
</li>
<li>
<p>Underscores can be added to number literals, such as <code>1_000_000</code> (or <code>0b1111_0100_0010_0100_0000</code>) to denote one million.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">float</span>  <span class="c1">// 4 bytes</span>
<span class="kt">double</span> <span class="c1">// 8 bytes</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Numbers of type <code>float</code> have a suffix <code>F</code> or <code>f</code> (e.g., <code>3.14F</code>).</p>
</li>
<li>
<p>Numbers of type <code>double</code> have an optional suffix <code>D</code> or <code>d</code> (e.g., <code>3.14</code>, <code>3.14D</code>).</p>
</li>
<li>
<p>An <code>E</code> or <code>e</code> denotes a decimal exponent (e.g., <code>1.729E3</code> is the same as <code>1729</code>).</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The constants <code>Double.POSITIVE_INFINITY</code>, <code>Double.NEGATIVE_INFINITY</code>, and <code>Double.NaN</code> (as well as corresponding <code>Float</code> constants) represent these special values, but rarely used in practice.</p>
</div>
<div class="paragraph">
<p>All “not a number” (<code>NaN</code>) values are considered distinct.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">var</span> <span class="n">x</span> <span class="o">=</span> <span class="nc">Double</span><span class="o">.</span><span class="na">NaN</span><span class="o">;</span> <span class="c1">// NaN</span>
<span class="kt">var</span> <span class="n">isNaN</span> <span class="o">=</span> <span class="nc">Double</span><span class="o">.</span><span class="na">isNaN</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>  <span class="c1">// true</span>
<span class="kt">var</span> <span class="n">isSame</span> <span class="o">=</span> <span class="n">x</span> <span class="o">==</span> <span class="nc">Double</span><span class="o">.</span><span class="na">NaN</span><span class="o">;</span> <span class="c1">// false</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Floating-point numbers are not suitable for financial calculations in which roundoff errors cannot be tolerated, caused by the fact that floating-point numbers are represented in the binary number system without precise representation of the fraction <code>1/10</code>, or <code>1/3</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">jshell</span><span class="o">&gt;</span> <span class="kt">var</span> <span class="n">diff</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">1.1</span> <span class="c1">// expect 0.9, but got 0.8999999999999999</span>
<span class="n">diff</span> <span class="o">==&gt;</span> <span class="mf">0.8999999999999999</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If there&#8217;s precise numerical computations without roundoff errors, use the <code>BigDecimal</code> class.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">char</span> <span class="c1">// 2 bytes</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In Java, the <code>char</code> type describes a code unit in the UTF-16 encoding.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// Unicode literal for Latin letter 'A' (U+0041)</span>
<span class="kt">char</span> <span class="n">letterA</span> <span class="o">=</span> <span class="sc">'\u0041'</span><span class="o">;</span>
<span class="c1">// Unicode literal for the Chinese character '中' (U+4E2D)</span>
<span class="kt">char</span> <span class="n">chineseChar</span> <span class="o">=</span> <span class="err">'\</span><span class="n">u4E2D</span><span class="err">'</span><span class="o">;</span>
<span class="c1">// Unicode literal for the smiley face '😊' (U+263A)</span>
<span class="kt">char</span> <span class="n">smileyFace</span> <span class="o">=</span> <span class="err">'\</span><span class="n">u263A</span><span class="err">'</span><span class="o">;</span>
<span class="c1">// using a string to wrap surrogate pairs to represent U+1F602 (😂)</span>
<span class="nc">String</span> <span class="n">emoji</span> <span class="o">=</span> <span class="s">"\uD83D\uDE02"</span><span class="o">;</span> <span class="c1">// Surrogate pair for U+1F602 (😂)</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>code point</em> is a code value that is associated with a character in an encoding scheme.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// code point to char</span>
<span class="kt">int</span> <span class="n">codePoint</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span> <span class="c1">// BMP, 'A'</span>
<span class="kt">char</span> <span class="n">character</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="n">codePoint</span><span class="o">;</span>

<span class="kt">int</span> <span class="n">codePoint</span> <span class="o">=</span> <span class="mh">0x1F602</span><span class="o">;</span> <span class="c1">// supplementary, '😂'</span>
<span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="nc">Character</span><span class="o">.</span><span class="na">toChars</span><span class="o">(</span><span class="n">codePoint</span><span class="o">);</span> <span class="c1">// convert code point to surrogate pair</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// char to code point</span>
<span class="kt">char</span> <span class="n">character</span> <span class="o">=</span> <span class="sc">'A'</span><span class="o">;</span> <span class="c1">// BMP</span>
<span class="kt">int</span> <span class="n">codePoint</span> <span class="o">=</span> <span class="n">character</span><span class="o">;</span> <span class="c1">// 65, implicit conversion to code point</span>

<span class="nc">String</span> <span class="n">emoji</span> <span class="o">=</span> <span class="s">"😂"</span><span class="o">;</span> <span class="c1">// supplementary character</span>
<span class="kt">int</span> <span class="n">codePoint</span> <span class="o">=</span> <span class="n">emoji</span><span class="o">.</span><span class="na">codePointAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// get the code point at index 0</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Unicode standard, code points are written in hexadecimal and prefixed with <code>U+</code>, such as <code>U+0041</code> for the code point of the Latin letter <code>A</code>.</p>
</li>
<li>
<p>Initially, a 16-bit code could represent all characters, but as Unicode expanded, it now uses two 16-bit values (surrogate pairs) to represent characters outside the basic multilingual plane.</p>
<div class="ulist">
<ul>
<li>
<p>Unicode has code points that are grouped into 17 code planes.</p>
</li>
<li>
<p>The first code plane, called the <em>basic multilingual plane</em>, consists of the classic Unicode characters with code points <code>U+0000</code> to <code>U+FFFF</code>.</p>
</li>
<li>
<p>Sixteen additional planes, with code points <code>U+10000</code> to <code>U+10FFFF</code>, hold the <em>supplementary characters</em>.</p>
</li>
<li>
<p>For characters outside the BMP (i.e., those with code points above <code>U+FFFF</code>), Java uses surrogate pairs.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cs"><span class="c1">// using a string to wrap surrogate pairs to represent U+1F602 (😂)</span>
<span class="n">String</span> <span class="n">emoji</span> <span class="p">=</span> <span class="s">"\uD83D\uDE02"</span><span class="p">;</span> <span class="c1">// Surrogate pair for U+1F602 (😂)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>In Java, Unicode escape sequences are processed before the code is parsed.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hello</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// \u000A is a newline</span>
        <span class="c1">// look inside c:\users</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>javac Hello.java
<span class="gp">Hello.java:3: error: ';</span><span class="s1">' expected
</span><span class="go">        // \u000A is a newline
                      ^
Hello.java:4: error: illegal Unicode escape
        // look inside c:\users
                           ^
Hello.java:3: error: not a statement
        // \u000A is a newline
                       ^
</span><span class="gp">Hello.java:3: error: ';</span><span class="s1">' expected
</span><span class="go">        // \u000A is a newline
                              ^
4 errors</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">boolean</span> <span class="c1">// true, false</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span><span class="o">[]</span> <span class="n">a</span><span class="o">;</span> <span class="c1">// or int[] a;</span>

<span class="kt">int</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">100</span><span class="o">];</span> <span class="c1">// or var a = new int[100];</span>

<span class="c1">// shortcut</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">smallPrimes</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="o">};</span>

<span class="kt">int</span><span class="o">[]</span> <span class="n">smallPrimes</span><span class="o">;</span>
<span class="n">smallPrimes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="o">};</span> <span class="c1">// anonymous array</span>

<span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span> <span class="o">=</span> <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">};</span>

<span class="c1">// sort the array in ascending order</span>
<span class="nc">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">nums</span><span class="o">);</span>

<span class="c1">// reverse the array</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">arr</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">i</span><span class="o">];</span>
    <span class="n">nums</span><span class="o">[</span><span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// Arrays.sort() cannot be used directly to sort primitive arrays in descending order.</span>
<span class="nc">Integer</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">};</span>

<span class="c1">// sort the array in reverse order</span>
<span class="nc">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">arr</span><span class="o">,</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">reverseOrder</span><span class="o">());</span>

<span class="c1">// arrays of arrays: multidimensional arrays</span>
<span class="kt">double</span><span class="o">[][]</span> <span class="n">balances</span><span class="o">;</span>

<span class="kt">int</span><span class="o">[][]</span> <span class="n">magicSquare</span> <span class="o">=</span>
<span class="o">{</span>
    <span class="o">{</span><span class="mi">16</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">13</span><span class="o">},</span>
    <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">8</span><span class="o">},</span>
    <span class="o">{</span><span class="mi">9</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">12</span><span class="o">},</span>
    <span class="o">{</span><span class="mi">4</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">1</span><span class="o">}</span>
<span class="o">};</span>

<span class="c1">// Ragged array with Pascal's Triangle</span>
<span class="kt">int</span><span class="o">[][]</span> <span class="n">pascal</span> <span class="o">=</span> <span class="o">{</span>
    <span class="o">{</span><span class="mi">1</span><span class="o">},</span>        <span class="c1">// First row</span>
    <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">},</span>     <span class="c1">// Second row</span>
    <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">}</span>   <span class="c1">// Third row</span>
<span class="o">};</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span> <span class="n">greeting</span> <span class="o">=</span> <span class="s">"Hi\uD83D\uDE02"</span><span class="o">;</span> <span class="c1">// "Hi😂"</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Java strings are sequences of Unicode characters.</p>
</li>
<li>
<p>To test whether two strings are equal, use the <code>equals</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">s</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">t</span><span class="o">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>To test whether two strings are identical except for the upper/lowercase letter distinction, use the <code>equalsIgnoreCase</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>s.equalsIgnoreCase(t)</code></pre>
</div>
</div>
</li>
<li>
<p>Do not use the <code>==</code> operator to test whether two strings are equal, which only determines whether or not the strings are stored in the same location.</p>
</li>
<li>
<p>Java strings are sequences of <code>char</code> values.</p>
<div class="ulist">
<ul>
<li>
<p>The <code>length</code> method yields the number of code units required for a given string in the UTF-16 encoding.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span> <span class="n">greeting</span> <span class="o">=</span> <span class="s">"Hi\uD83D\uDE02"</span><span class="o">;</span> <span class="c1">// "Hi😂"</span>

<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">.</span><span class="na">length</span><span class="o">();</span> <span class="c1">// is 4</span></code></pre>
</div>
</div>
</li>
<li>
<p>To get the true length—that is, the number of code points—call</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">cpCount</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">.</span><span class="na">codePointCount</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">greeting</span><span class="o">.</span><span class="na">length</span><span class="o">());</span> <span class="c1">// 3</span></code></pre>
</div>
</div>
</li>
<li>
<p>The call <code>s.charAt(n)</code> returns the code unit at position <code>n</code>, where <code>n</code> is between <code>0</code> and <code>s.length() – 1</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">char</span> <span class="n">first</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="c1">// 'H'</span>
<span class="kt">char</span> <span class="n">last</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>  <span class="c1">// '?'</span></code></pre>
</div>
</div>
</li>
<li>
<p>To get at the ith code point, use the statements</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">.</span><span class="na">offsetByCodePoints</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">i</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">cp</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">.</span><span class="na">codePointAt</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">cp</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">.</span><span class="na">codePointAt</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span> <span class="c1">// 56834</span></code></pre>
</div>
</div>
</li>
<li>
<p>To turn a single code point into a string, use the <code>Character.toString(int)</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">codePoint</span> <span class="o">=</span> <span class="mh">0x1F37A</span><span class="o">;</span>
<span class="n">str</span> <span class="o">=</span> <span class="nc">Character</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">codePoint</span><span class="o">);</span></code></pre>
</div>
</div>
</li>
<li>
<p>Traverse a string to look by code points or code units</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">greeting</span><span class="o">.</span><span class="na">codePoints</span><span class="o">().</span><span class="na">toArray</span><span class="o">();</span>  <span class="c1">// int[3]  { 72, 105, 128514 } - Unicode code points</span>
<span class="n">greeting</span><span class="o">.</span><span class="na">chars</span><span class="o">().</span><span class="na">toArray</span><span class="o">();</span>       <span class="c1">// int[4]  { 72, 105, 55357, 56834 } - UTF-16 code units</span>
<span class="n">greeting</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>           <span class="c1">// char[4] { 'H', 'i', '?', '?' } - individual char elements</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The <code>StringBuffer</code> class is less efficient than <code>StringBuilder</code>, but it allows multiple threads to add or remove characters.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// Using StringBuffer (Thread-Safe)</span>
<span class="nc">StringBuffer</span> <span class="n">stringBuffer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuffer</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">);</span>
<span class="n">stringBuffer</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" World"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"StringBuffer: "</span> <span class="o">+</span> <span class="n">stringBuffer</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

<span class="c1">// Using StringBuilder (Faster, but Not Thread-Safe)</span>
<span class="nc">StringBuilder</span> <span class="n">stringBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">);</span>
<span class="n">stringBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" World"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"StringBuilder: "</span> <span class="o">+</span> <span class="n">stringBuilder</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <em>block</em>, or compound statement, consists of a number of Java statements, surrounded by a pair of braces, which define the scope of the variables.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hello</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// main block</span>
        <span class="o">{</span> <span class="c1">// outer block</span>
            <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>
            <span class="o">{</span> <span class="c1">// nested inner block</span>
                <span class="kt">int</span> <span class="n">k</span><span class="o">;</span>
                <span class="kt">int</span> <span class="n">n</span><span class="o">;</span> <span class="c1">// ERROR--can't redeclare n in inner block</span>
            <span class="o">}</span> <span class="c1">// k is only defined up to here</span>

            <span class="kt">int</span> <span class="n">k</span><span class="o">;</span> <span class="c1">// fine, 'k' from the inner block is no longer in scope</span>
        <span class="o">}</span> <span class="c1">// 'n' and 'k' go out of scope here</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>if / if-else</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The number is positive."</span><span class="o">);</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The number is negative."</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"The number is zero or positive."</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>while / do-while / for / for-each / break / continue</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="k">while</span> <span class="o">(</span><span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Count: "</span> <span class="o">+</span> <span class="n">count</span><span class="o">);</span>
    <span class="n">count</span><span class="o">++;</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="k">do</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Count: "</span> <span class="o">+</span> <span class="n">count</span><span class="o">);</span>
    <span class="n">count</span><span class="o">++;</span>
<span class="o">}</span> <span class="k">while</span> <span class="o">(</span><span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">};</span>

<span class="c1">// for-each loop to iterate through the array</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">num</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">num</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span> <span class="c1">// break the loop when i is 3</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"i = "</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="c1">// break with label</span>
<span class="nl">outerLoop:</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="k">break</span> <span class="n">outerLoop</span><span class="o">;</span> <span class="c1">// break the outer loop</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"i = "</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">", j = "</span> <span class="o">+</span> <span class="n">j</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// i = 1, j = 1</span>
<span class="c1">// i = 1, j = 2</span>
<span class="c1">// i = 1, j = 3</span>
<span class="c1">// i = 2, j = 1</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="k">continue</span><span class="o">;</span> <span class="c1">// skip when i is 3</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"i = "</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>switch</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A <code>case</code> label can be</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A constant expression of type <code>char</code>, <code>byte</code>, <code>short</code>, or <code>int</code></p>
</li>
<li>
<p>An enumerated constant</p>
</li>
<li>
<p>A <code>string</code> literal</p>
</li>
<li>
<p>More than one of these, separated by commas</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">switch</span> <span class="o">(</span><span class="n">day</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">7</span><span class="o">:</span> <span class="c1">// weekend</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"weekend!"</span><span class="o">);</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">:</span> <span class="c1">// weekdays</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"weekday."</span><span class="o">);</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"invalid day."</span><span class="o">);</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">String</span> <span class="n">dayType</span> <span class="o">=</span> <span class="k">switch</span> <span class="o">(</span><span class="n">day</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">7</span> <span class="o">-&gt;</span> <span class="s">"weekend!"</span><span class="o">;</span>
    <span class="k">default</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"work and work!"</span><span class="o">);</span>
        <span class="n">yield</span> <span class="s">"weekday."</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">};</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">enum</span> <span class="nc">Day</span> <span class="o">{</span>
    <span class="no">MONDAY</span><span class="o">,</span> <span class="no">TUESDAY</span><span class="o">,</span> <span class="no">WEDNESDAY</span><span class="o">,</span> <span class="no">THURSDAY</span><span class="o">,</span> <span class="no">FRIDAY</span><span class="o">,</span> <span class="no">SATURDAY</span><span class="o">,</span> <span class="no">SUNDAY</span>
<span class="o">}</span>

<span class="nc">Day</span> <span class="n">today</span> <span class="o">=</span> <span class="nc">Day</span><span class="o">.</span><span class="na">SATURDAY</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">dayType</span> <span class="o">=</span> <span class="k">switch</span> <span class="o">(</span><span class="n">today</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="no">SATURDAY</span><span class="o">,</span> <span class="no">SUNDAY</span> <span class="o">-&gt;</span> <span class="s">"weekend!"</span><span class="o">;</span>
    <span class="k">default</span> <span class="o">-&gt;</span> <span class="s">"weekday."</span><span class="o">;</span>
<span class="o">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references">References</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="specjava"></a>[1] <a href="https://docs.oracle.com/en/java/javase/17/docs/specs/man/index.html" class="bare">https://docs.oracle.com/en/java/javase/17/docs/specs/man/index.html</a></p>
</li>
<li>
<p><a id="cmdjava"></a>[2] <a href="https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html" class="bare">https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html</a></p>
</li>
<li>
<p><a id="parallel-gc"></a>[3] <a href="https://docs.oracle.com/en/java/javase/17/gctuning/parallel-collector1.html" class="bare">https://docs.oracle.com/en/java/javase/17/gctuning/parallel-collector1.html</a></p>
</li>
<li>
<p><a id="mvn"></a>[4] <a href="https://maven.apache.org/index.html" class="bare">https://maven.apache.org/index.html</a></p>
</li>
<li>
<p><a id="mvnpom"></a>[5] <a href="https://maven.apache.org/pom.html" class="bare">https://maven.apache.org/pom.html</a></p>
</li>
<li>
<p><a id="mvnintropom"></a>[6] <a href="https://maven.apache.org/guides/introduction/introduction-to-the-pom.html" class="bare">https://maven.apache.org/guides/introduction/introduction-to-the-pom.html</a></p>
</li>
<li>
<p><a id="baeldungmvnmultimod"></a>[7] <a href="https://www.baeldung.com/maven-multi-module" class="bare">https://www.baeldung.com/maven-multi-module</a></p>
</li>
<li>
<p><a id="mvnsettings"></a>[8] <a href="https://maven.apache.org/settings.html" class="bare">https://maven.apache.org/settings.html</a></p>
</li>
<li>
<p><a id="mvnconfiguringplugins"></a>[9] <a href="https://maven.apache.org/guides/mini/guide-configuring-plugins.html" class="bare">https://maven.apache.org/guides/mini/guide-configuring-plugins.html</a></p>
</li>
<li>
<p><a id="mvnplugin"></a>[10] <a href="https://maven.apache.org/plugins/index.html" class="bare">https://maven.apache.org/plugins/index.html</a></p>
</li>
<li>
<p><a id="mvndeppluginusage"></a>[11] <a href="https://maven.apache.org/plugins/maven-dependency-plugin/usage.html" class="bare">https://maven.apache.org/plugins/maven-dependency-plugin/usage.html</a></p>
</li>
<li>
<p><a id="mvnplugindev"></a>[12] <a href="https://maven.apache.org/guides/plugin/guide-java-plugin-development.html" class="bare">https://maven.apache.org/guides/plugin/guide-java-plugin-development.html</a></p>
</li>
<li>
<p><a id="mvnhelpplugin"></a>[13] <a href="https://maven.apache.org/plugins/maven-help-plugin/usage.html" class="bare">https://maven.apache.org/plugins/maven-help-plugin/usage.html</a></p>
</li>
<li>
<p><a id="mvnlifecycle"></a>[14] <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html" class="bare">https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html</a></p>
</li>
<li>
<p><a id="idxspringboot"></a>[15] <a href="https://docs.spring.io/spring-boot/docs/2.5.x/reference/htmlsingle/#features.container-images.layering" class="bare">https://docs.spring.io/spring-boot/docs/2.5.x/reference/htmlsingle/#features.container-images.layering</a></p>
</li>
<li>
<p><a id="wikiopenjdk"></a>[16] <a href="https://en.wikipedia.org/wiki/OpenJDK" class="bare">https://en.wikipedia.org/wiki/OpenJDK</a></p>
</li>
<li>
<p><a id="whichjdk"></a>[17] <a href="https://whichjdk.com/" class="bare">https://whichjdk.com/</a></p>
</li>
<li>
<p><a id="k8scgroups"></a>[18] <a href="https://kubernetes.io/docs/concepts/architecture/cgroups/" class="bare">https://kubernetes.io/docs/concepts/architecture/cgroups/</a></p>
</li>
<li>
<p><a id="mvndeplug"></a>[19] <a href="https://maven.apache.org/plugins/maven-dependency-plugin/" class="bare">https://maven.apache.org/plugins/maven-dependency-plugin/</a></p>
</li>
<li>
<p><a id="baeldungmvndeplug"></a>[20] <a href="https://www.baeldung.com/maven-download-sources-javadoc" class="bare">https://www.baeldung.com/maven-download-sources-javadoc</a></p>
</li>
<li>
<p><a id="mvndeps"></a>[21] <a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" class="bare">https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html</a></p>
</li>
</ul>
</div>
</div>
</div>
    
<style>
  .utterances {
      max-width: 100%;
  }
</style>
<script src="https://utteranc.es/client.js"
        repo="ousiax/utterances"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>


  </div>

  <ul class="post-navigation">
    <li>
      
      <a href="/2021/10/28/forwarded-http-extension-ingress-nginx-spring/">&laquo; Forwarded Headers and Kubernetes Ingress Nginx</a>
      
    </li>
    <li>
      
      <a href="/2021/11/11/kubernetes-authn-authz/">kubernetes Users and RBAC &raquo;</a>
      
    </li>
  </ul>
</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="license">
    <span>Article licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></span>
  </div>
  
  <details open>
    <summary>Extral Links</summary>
    <div>
      
      <a href="https://jekyllrb.com/">Jekyll</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://shopify.github.io/">Liquid</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://docs.asciidoctor.org/">Asciidoctor</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://github.com/qqbuby/">GitHub</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="/feed.xml">RSS</a>
      
      
    </div>
  </details>
  
</footer>


<!-- https://github.com/bryanbraun/anchorjs -->
<script src="/js/anchor.min.js"></script>
<script>
  anchors.add();
  anchors.remove(".site-title");
</script>




  </body>

</html>
