<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bing WebMaster -->
  <meta name="msvalidate.01" content="AB2FFF876C37F59D9121882CC8395DE5" />

  <title>JavaScript Learning Notes</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.codefarm.me/2024/04/15/javascript-learning-notes/">
  <link rel="alternate" type="application/rss+xml" title="CODE FARM" href="https://blog.codefarm.me/feed.xml">

  <!--<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" />-->

  <!-- https://cdn.jsdelivr.net/gh/lurongkai/anti-baidu/js/anti-baidu-latest.min.js -->
<script type="text/javascript" src="/js/anti-baidu.min.js" charset="UTF-8"></script>

  
<!-- Google Analytics Website tracking -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83971182-1', 'auto');
  ga('send', 'pageview');

</script>


  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SN88FJ18E5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SN88FJ18E5');
</script>



</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <h2 class="site-title">
      <a class="site-title" href="/">CODE FARM</a>
    </h2>

     <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
        <div class="trigger">
            <ul>
                <li><a href="/">home</a>
                <li><a href="/category">category</a>
                <li><a href="/tag">tag</a>
                <li><a href="/archive">archive</a>
                <li><a href="/about">about</a>
                <li><a href="https://resume.github.io/?ousiax" target="_blank">R&eacute;sum&eacute;</a>
            </ul>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">JavaScript Learning Notes</h1>
    
    
    <p class="post-meta"><time datetime="2024-04-15T13:40:59+08:00" itemprop="datePublished">Apr 15, 2024</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>JavaScript is a cross-platform, <a href="https://en.wikipedia.org/wiki/Prototype-based_programming">prototype-based</a>, <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented</a> <a href="https://en.wikipedia.org/wiki/Scripting_language">scripting</a> language. The core language of JavaScript is standardized by the ECMA TC39 committee as a language named ECMAScript.</p>
</div>
<div class="paragraph">
<p>Among other things, ECMAScript defines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Language syntax (parsing rules, keywords, control flow, object literal initialization, &#8230;&#8203;)</p>
</li>
<li>
<p>Error handling mechanisms (<code>throw</code>, <code>try&#8230;&#8203;catch</code>, ability to create user-defined <code>Error</code> types)</p>
</li>
<li>
<p>Types (<code>boolean</code>, <code>number</code>, <code>string</code>, <code>function</code>, <code>object</code>, &#8230;&#8203;)</p>
</li>
<li>
<p>A prototype-based inheritance mechanism</p>
</li>
<li>
<p>Built-in objects and functions, including <code>JSON</code>, <code>Math</code>, <code>Array</code> methods, <code>parseInt</code>, <code>decodeURI</code>, etc.</p>
</li>
<li>
<p>Strict mode</p>
</li>
<li>
<p>A module system</p>
</li>
<li>
<p>Basic memory model</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <a href="https://www.ecma-international.org/">ECMAScript specification</a> does not describe the Document Object Model (DOM), which is standardized by the <a href="https://www.w3.org/">World Wide Web Consortium (W3C)</a> and/or <a href="https://whatwg.org/">WHATWG (Web Hypertext Application Technology Working Group)</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
"ECMAScript" is the term for the language standard, but "ECMAScript" and "JavaScript" can be used interchangeably.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<a href="https://www.typescriptlang.org/">TypeScript</a> stands in an unusual relationship to JavaScript, that offers all of JavaScript’s features, and an additional layer on top of these: TypeScript’s type system.
</td>
</tr>
</table>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#grammar-and-types">1. Grammar and types</a>
<ul class="sectlevel2">
<li><a href="#comments">1.1. Comments</a></li>
<li><a href="#variable-declarations">1.2. Variable declarations</a></li>
<li><a href="#scopes">1.3. Scopes</a></li>
<li><a href="#data-types">1.4. Data types</a></li>
<li><a href="#literals">1.5. Literals</a></li>
</ul>
</li>
<li><a href="#control-flow-and-error-handling">2. Control flow and error handling</a>
<ul class="sectlevel2">
<li><a href="#conditional-statements">2.1. Conditional statements</a></li>
<li><a href="#error-handling">2.2. Error handling</a></li>
</ul>
</li>
<li><a href="#loops-and-iteration">3. Loops and iteration</a>
<ul class="sectlevel2">
<li><a href="#for">3.1. For</a></li>
<li><a href="#while">3.2. While</a></li>
<li><a href="#label-break-continue">3.3. Label, break, continue</a></li>
</ul>
</li>
<li><a href="#functions">4. Functions</a>
<ul class="sectlevel2">
<li><a href="#function-definition">4.1. Function definition</a></li>
<li><a href="#function-expression">4.2. Function expression</a></li>
<li><a href="#function-object">4.3. Function object</a></li>
<li><a href="#recursion-and-closures">4.4. Recursion and closures</a></li>
<li><a href="#arguments-object">4.5. Arguments object</a></li>
<li><a href="#default-parameters-and-rest-parameters">4.6. Default parameters and rest parameters</a></li>
<li><a href="#arrow-functions">4.7. Arrow functions</a></li>
</ul>
</li>
<li><a href="#expressions-and-operators">5. Expressions and operators</a>
<ul class="sectlevel2">
<li><a href="#assignment-operators">5.1. Assignment operators</a>
<ul class="sectlevel3">
<li><a href="#assigning-to-properties">5.1.1. Assigning to properties</a></li>
<li><a href="#destructuring">5.1.2. Destructuring</a></li>
<li><a href="#evaluation-and-nesting">5.1.3. Evaluation and nesting</a></li>
</ul>
</li>
<li><a href="#comparison-operators">5.2. Comparison operators</a></li>
<li><a href="#arithmetic-operators">5.3. Arithmetic operators</a></li>
<li><a href="#bitwise-operators">5.4. Bitwise operators</a></li>
<li><a href="#logical-operators">5.5. Logical operators</a></li>
<li><a href="#conditional-ternary-operator">5.6. Conditional (ternary) operator</a></li>
<li><a href="#comma-operator">5.7. Comma operator</a></li>
<li><a href="#unary-operators">5.8. Unary operators</a></li>
<li><a href="#relational-operators">5.9. Relational operators</a></li>
<li><a href="#grouping-operator">5.10. Grouping operator</a></li>
<li><a href="#optional-chaining-operator">5.11. Optional chaining operator</a></li>
</ul>
</li>
<li><a href="#regular-expressions">6. Regular expressions</a></li>
<li><a href="#indexed-and-keyed-collections">7. Indexed and keyed Collections</a>
<ul class="sectlevel2">
<li><a href="#arrays">7.1. Arrays</a></li>
<li><a href="#typed-arrays">7.2. Typed arrays</a></li>
<li><a href="#maps-and-sets">7.3. Maps and sets</a></li>
</ul>
</li>
<li><a href="#prototypes-objects-and-classes">8. Prototypes, objects and classes</a>
<ul class="sectlevel2">
<li><a href="#prototype">8.1. Prototype</a></li>
<li><a href="#properties">8.2. Properties</a></li>
<li><a href="#constructors">8.3. Constructors</a></li>
<li><a href="#objects">8.4. Objects</a></li>
<li><a href="#classes">8.5. Classes</a></li>
</ul>
</li>
<li><a href="#promises-and-asynchronous-programming">9. Promises and asynchronous programming</a>
<ul class="sectlevel2">
<li><a href="#promises">9.1. Promises</a></li>
<li><a href="#workers">9.2. Workers</a></li>
</ul>
</li>
<li><a href="#iterators-and-generators">10. Iterators and generators</a></li>
<li><a href="#events">11. Events</a></li>
<li><a href="#modules">12. Modules</a></li>
<li><a href="#volta-the-hassle-free-javascript-tool-manager">13. Volta: The Hassle-Free JavaScript Tool Manager</a></li>
<li><a href="#npm">14. npm</a>
<ul class="sectlevel2">
<li><a href="#manage-the-npm-configuration-files">14.1. Manage the npm configuration files</a></li>
<li><a href="#creating-a-package-json-file">14.2. Creating a package.json file</a></li>
<li><a href="#specifying-dependencies-and-devdependencies-in-a-package-json-file">14.3. Specifying dependencies and devDependencies in a package.json file</a></li>
<li><a href="#run-arbitrary-package-scripts">14.4. Run arbitrary package scripts</a></li>
<li><a href="#pnpm-fast-disk-space-efficient-package-manager">14.5. pnpm: Fast, disk space efficient package manager</a></li>
</ul>
</li>
<li><a href="#references">15. References</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="grammar-and-types">1. Grammar and types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JavaScript is <strong>case-sensitive</strong> and uses the <strong>Unicode</strong> character set.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">Hello世界</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">Hello世界</span><span class="p">);</span> <span class="c1">// logs "Hello World!"</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">hello世界</span><span class="p">);</span> <span class="c1">// Uncaught ReferenceError: hello世界 is not defined</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A semicolon (<code>;</code>) is not necessary after a statement if it is written on its own line. But if more than one statement on a line is desired, then they MUST be separated by semicolons.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">Hello世界</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">Hello世界</span><span class="p">)</span> <span class="c1">// logs "Hello World!"</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="comments">1.1. Comments</h3>
<div class="paragraph">
<p>The syntax of comments is the same as in C++ and in many other languages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// a one line comment</span>

<span class="cm">/* this is a longer,
 * multi-line comment
 */</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="variable-declarations">1.2. Variable declarations</h3>
<div class="paragraph">
<p>JavaScript has three kinds of variable declarations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>var</code></p>
<div class="paragraph">
<p>Declares both local and global variables, depending on the execution context, optionally initializing it to a value.</p>
</div>
</li>
<li>
<p><code>let</code></p>
<div class="paragraph">
<p>Declares a block-scoped, local variable, optionally initializing it to a value.</p>
</div>
</li>
<li>
<p><code>const</code></p>
<div class="paragraph">
<p>Declares a block-scoped, read-only named constant.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Variables should always be declared before they are used. JavaScript used to allow assigning to undeclared variables, which creates an <strong>undeclared global</strong> variable.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a variable is declared without an initializer, it is assigned the value <code>undefined</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">x</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// logs "undefined"</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scopes">1.3. Scopes</h3>
<div class="paragraph">
<p>A variable may belong to one of the following scopes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Global scope: The default scope for all code running in script mode.</p>
</li>
<li>
<p>Module scope: The scope for code running in module mode.</p>
</li>
<li>
<p>Function scope: The scope created with a function.</p>
</li>
<li>
<p>Block scope: The scope created (<code>let</code>, <code>const</code>) with a pair of curly braces (a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block">block</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you declare a variable outside of any function, it is called a <strong>global variable</strong>, because it is available to any other code in the current document. When you declare a variable within a function, it is called a <strong>local variable</strong>, because it is available only within that function.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Global variables are in fact properties of the global object.</p>
</li>
<li>
<p>In web pages, the global object is <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window">window</a>, so you can read and set global variables using the <code>window.variable</code> syntax.</p>
</li>
<li>
<p>In all environments, the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis">globalThis</a> variable (which itself is a global variable) may be used to read and set global variables. This is to provide a consistent interface among various JavaScript runtimes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Blocks only scope <code>let</code> and <code>const</code> declarations, but not <code>var</code> declarations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// 1</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">{</span>
  <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// ReferenceError: x is not defined</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>var</code>-declared variables are <a href="https://developer.mozilla.org/en-US/docs/Glossary/Hoisting">hoisted</a>, meaning the variable can be referred anywhere in its scope, even if its declaration isn&#8217;t reached yet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">);</span> <span class="c1">// true</span>
<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Same as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">var</span> <span class="nx">x</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="data-types">1.4. Data types</h3>
<div class="paragraph">
<p>The latest ECMAScript standard defines eight data types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Seven data types that are primitives:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Boolean">Boolean</a>. <code>true</code> and <code>false</code>.</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Null">null</a>. A special keyword denoting a null value. (Because JavaScript is case-sensitive, <code>null</code> is not the same as <code>Null</code>, <code>NULL</code>, or any other variant.)</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Undefined">undefined</a>. A top-level property whose value is not defined.</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Number">Number</a>. An integer or floating point number. For example: <code>42</code> or <code>3.14159</code>.</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/BigInt">BigInt</a>. An integer with arbitrary precision. For example: <code>9007199254740992n</code>.</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/String">String</a>. A sequence of characters that represent a text value. For example: <code>"Howdy"</code>.</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>. A data type whose instances are unique and immutable.</p>
</li>
</ol>
</div>
</li>
<li>
<p>and <a href="https://developer.mozilla.org/en-US/docs/Glossary/Object">Object</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JavaScript is a <strong>dynamically typed language</strong>, which means that data types are automatically converted as-needed during script execution.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">answer</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="nx">answer</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Thanks for all the fish!</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">x</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">The answer is </span><span class="dl">"</span> <span class="o">+</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// "The answer is 42"</span>
<span class="nx">y</span> <span class="o">=</span> <span class="mi">42</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> is the answer</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// "42 is the answer"</span>
<span class="nx">z</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">37</span><span class="dl">"</span> <span class="o">+</span> <span class="mi">7</span><span class="p">;</span> <span class="c1">// "377"</span>

<span class="dl">"</span><span class="s2">37</span><span class="dl">"</span> <span class="o">-</span> <span class="mi">7</span><span class="p">;</span> <span class="c1">// 30</span>
<span class="dl">"</span><span class="s2">37</span><span class="dl">"</span> <span class="o">*</span> <span class="mi">7</span><span class="p">;</span> <span class="c1">// 259</span>

<span class="c1">// An alternative method of retrieving a number from a string is with the `+` (unary plus) operator:</span>
<span class="c1">// Note: the parentheses are added for clarity, not required.</span>
<span class="dl">"</span><span class="s2">1.1</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">1.1</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// '1.11.1'</span>
<span class="p">(</span><span class="o">+</span><span class="dl">"</span><span class="s2">1.1</span><span class="dl">"</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="o">+</span><span class="dl">"</span><span class="s2">1.1</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// 2.2</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="literals">1.5. Literals</h3>
<div class="paragraph">
<p>An <strong>array literal</strong> is a list of zero or more expressions, each of which represents an array element, enclosed in square brackets (<code>[]</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">coffees</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">French Roast</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Colombian</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Kona</span><span class="dl">"</span><span class="p">];</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If you put two commas in a row in an array literal, the array leaves an empty slot for the unspecified element. The following example creates the fish array:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">fish</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Lion</span><span class="dl">"</span><span class="p">,</span> <span class="cm">/* empty */</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Angel</span><span class="dl">"</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">fish</span><span class="p">);</span>
<span class="c1">// [ 'Lion', &lt;1 empty item&gt;, 'Angel' ]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the second item is "empty", which is not exactly the same as the actual <code>undefined</code> value. When using array-traversing methods like <code>Array.prototype.map</code>, empty slots are skipped. However, index-accessing <code>fish[1]</code> still returns <code>undefined</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">fish</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Lion</span><span class="dl">"</span><span class="p">,</span> <span class="cm">/* empty */</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Angel</span><span class="dl">"</span><span class="p">];</span>
<span class="nx">fish</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
<span class="c1">// Lion</span>
<span class="c1">// Angel</span></code></pre>
</div>
</div>
</li>
<li>
<p>If you include a trailing comma at the end of the list of elements, the comma is ignored.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// Only the last comma is ignored.</span>
<span class="kd">const</span> <span class="nx">myList</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">home</span><span class="dl">"</span><span class="p">,</span> <span class="cm">/* empty */</span><span class="p">,</span> <span class="dl">"</span><span class="s2">school</span><span class="dl">"</span><span class="p">,</span> <span class="cm">/* empty */</span><span class="p">,];</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Integer and BigInt literals</strong> can be written in decimal (base 10), hexadecimal (base 16), octal (base 8) and binary (base 2).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>decimal</em> integer literal is a sequence of digits without a leading <code>0</code> (zero).</p>
</li>
<li>
<p>A leading <code>0</code> (zero) on an integer literal, or a leading <code>0o</code> (or <code>0O</code>) indicates it is in <em>octal</em>.</p>
</li>
<li>
<p>A leading <code>0x</code> (or <code>0X</code>) indicates a <em>hexadecimal</em> integer literal.</p>
</li>
<li>
<p>A leading <code>0b</code> (or <code>0B</code>) indicates a <em>binary</em> integer literal.</p>
</li>
<li>
<p>A trailing <code>n</code> suffix on an integer literal indicates a <em>BigInt</em> literal. The BigInt literal can use any of the above bases. Note that leading-zero octal syntax like <code>0123n</code> is not allowed, but <code>0o123n</code> is fine.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="mi">0</span><span class="p">,</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">123456789123456789</span><span class="nf">n             </span><span class="p">(</span><span class="nx">decimal</span><span class="p">,</span> <span class="nx">base</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">015</span><span class="p">,</span> <span class="mi">0001</span><span class="p">,</span> <span class="mo">0o777777777777</span><span class="nf">n              </span><span class="p">(</span><span class="nx">octal</span><span class="p">,</span> <span class="nx">base</span> <span class="mi">8</span><span class="p">)</span>
<span class="mh">0x1123</span><span class="p">,</span> <span class="mh">0x00111</span><span class="p">,</span> <span class="mh">0x123456789ABCDEF</span><span class="nf">n     </span><span class="p">(</span><span class="nx">hexadecimal</span><span class="p">,</span> <span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span> <span class="nx">or</span> <span class="nx">base</span> <span class="mi">16</span><span class="p">)</span>
<span class="mb">0b11</span><span class="p">,</span> <span class="mb">0b0011</span><span class="p">,</span> <span class="mb">0b11101001010101010101</span><span class="nf">n   </span><span class="p">(</span><span class="nx">binary</span><span class="p">,</span> <span class="nx">base</span> <span class="mi">2</span><span class="p">)</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <strong>floating-point literal</strong> can have the following parts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">[</span><span class="nx">digits</span><span class="p">].[</span><span class="nx">digits</span><span class="p">][(</span><span class="nx">E</span><span class="o">|</span><span class="nx">e</span><span class="p">)[(</span><span class="o">+|-</span><span class="p">)]</span><span class="nx">digits</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>An unsigned decimal integer,</p>
</li>
<li>
<p>A decimal point (<code>.</code>),</p>
</li>
<li>
<p>A fraction (another decimal number),</p>
</li>
<li>
<p>An exponent (<code>e</code> or <code>E</code>).</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="mf">3.1415926</span>
<span class="p">.</span><span class="mi">123456789</span>
<span class="o">-</span><span class="p">.</span><span class="mi">123456789</span> <span class="c1">// -0.123456789</span>
<span class="mf">3.1</span><span class="nx">E</span><span class="o">+</span><span class="mi">12</span>
<span class="p">.</span><span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">23</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the language specification requires numeric literals to be unsigned. Nevertheless, code fragments like <code>-123.4</code> are fine, being interpreted as a unary <code>-</code> operator applied to the numeric literal <code>123.4</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An <strong>object literal</strong> is a list of zero or more pairs of property names and associated values of an object, enclosed in curly braces (<code>{}</code>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Object property names can be any string, including the empty string. If the property name would not be a valid JavaScript <a href="https://developer.mozilla.org/en-US/docs/Glossary/Identifier">identifier</a> or number, it must be enclosed in quotes.</p>
</li>
<li>
<p>Property names that are not valid identifiers cannot be accessed as a dot (<code>.</code>) property.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">unusualPropertyNames</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">''</span><span class="p">:</span> <span class="dl">'</span><span class="s1">An empty string</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">!</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bang!</span><span class="dl">'</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">.</span><span class="dl">''</span><span class="p">);</span>   <span class="c1">// SyntaxError: Unexpected string</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">.</span><span class="o">!</span><span class="p">);</span>    <span class="c1">// SyntaxError: Unexpected token !</span></code></pre>
</div>
</div>
</li>
<li>
<p>Instead, they must be accessed with the bracket notation (<code>[]</code>).</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">[</span><span class="dl">""</span><span class="p">]);</span> <span class="c1">// An empty string</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">unusualPropertyNames</span><span class="p">[</span><span class="dl">"</span><span class="s2">!</span><span class="dl">"</span><span class="p">]);</span> <span class="c1">// Bang!</span></code></pre>
</div>
</div>
</li>
<li>
<p>Object literals support a range of shorthand syntaxes that include setting the prototype at construction, shorthand for <code>foo: foo</code> assignments, defining methods, making <code>super</code> calls, and computing property names with expressions.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// __proto__</span>
  <span class="na">__proto__</span><span class="p">:</span> <span class="nx">theProtoObj</span><span class="p">,</span>
  <span class="c1">// Shorthand for 'handler: handler'</span>
  <span class="nx">handler</span><span class="p">,</span>
  <span class="c1">// Methods</span>
  <span class="nf">toString</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Super calls</span>
    <span class="k">return</span> <span class="dl">"</span><span class="s2">d </span><span class="dl">"</span> <span class="o">+</span> <span class="k">super</span><span class="p">.</span><span class="nf">toString</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="c1">// Computed (dynamic) property names</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">prop_</span><span class="dl">"</span> <span class="o">+</span> <span class="p">(()</span> <span class="o">=&gt;</span> <span class="mi">42</span><span class="p">)()]:</span> <span class="mi">42</span><span class="p">,</span>
<span class="p">};</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions"><strong>regex</strong></a> <strong>literal</strong> is a pattern enclosed between slashes: <code>/pattern/flags</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">re1</span> <span class="o">=</span> <span class="sr">/ab+c/</span><span class="p">;</span> <span class="c1">// new RegExp("ab+c");</span>
<span class="kd">const</span> <span class="nx">re2</span> <span class="o">=</span> <span class="sr">/</span><span class="se">\w</span><span class="sr">+</span><span class="se">\s</span><span class="sr">/g</span><span class="p">;</span> <span class="c1">// new RegExp("\\w+\\s", "g");</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A <strong>string literal</strong> is zero or more characters enclosed in double (<code>"</code>) or single (<code>'</code>) quotation marks. A string must be delimited by quotation marks of the same type (that is, either both single quotation marks, or both double quotation marks).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span>
<span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span>
<span class="dl">'</span><span class="s1">1234</span><span class="dl">'</span>
<span class="dl">'</span><span class="s1">one line </span><span class="se">\n</span><span class="s1"> another line</span><span class="dl">'</span>
<span class="dl">"</span><span class="s2">Joyo's cat</span><span class="dl">"</span>
<span class="dl">"</span><span class="s2">He read </span><span class="se">\"</span><span class="s2">The Cremation of Sam McGee</span><span class="se">\"</span><span class="s2"> by R.W. Service.</span><span class="dl">"</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals"><strong>Template literals</strong></a> are literals delimited with backtick (<code>`</code>) characters, allowing for <em>multi-line strings</em>, <em>string interpolation</em> with embedded expressions, and special constructs called <em>tagged templates</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="s2">`string text`</span>

<span class="s2">`string text line 1
 string text line 2`</span>

<span class="s2">`string text </span><span class="p">${</span><span class="nx">expression</span><span class="p">}</span><span class="s2"> string text`</span>

<span class="nx">tagFunction</span><span class="s2">`string text </span><span class="p">${</span><span class="nx">expression</span><span class="p">}</span><span class="s2"> string text`</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="control-flow-and-error-handling">2. Control flow and error handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The most basic statement is a <strong>block statement</strong>, which is used to group statements. The block is delimited by a pair of curly braces:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">{</span>
  <span class="nx">statement1</span><span class="p">;</span>
  <span class="nx">statement2</span><span class="p">;</span>
  <span class="c1">// …</span>
  <span class="nx">statementN</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="conditional-statements">2.1. Conditional statements</h3>
<div class="paragraph">
<p>A <strong>conditional statement</strong> is a set of commands that executes if a specified condition is true. JavaScript supports two conditional statements: <code>if&#8230;&#8203;else</code> and <code>switch</code>. The following values evaluate to false (also known as <a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy">Falsy</a> values):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the keyword <code>false</code></p>
</li>
<li>
<p><code>undefined</code>, <code>null</code></p>
</li>
<li>
<p><code>0</code>, <code>-0</code>, <code>0n</code></p>
</li>
<li>
<p><code>NaN</code></p>
</li>
<li>
<p>the empty string (<code>""</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All other values—including all objects—evaluate to <code>true</code> when passed to a conditional statement.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A <strong>falsy</strong> (sometimes written <strong>falsey</strong>) value is a value that is considered false when encountered in a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Boolean">Boolean</a> context.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note: Do not confuse the primitive boolean values <code>true</code> and <code>false</code> with the true and false values of the <code>Boolean</code> object!</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Boolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="k">if </span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// this condition evaluates to true</span>
<span class="p">}</span>
<span class="k">if </span><span class="p">(</span><span class="nx">b</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// this condition evaluates to false</span>
<span class="p">}</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <code>if</code> statement to execute a statement if a logical condition is <code>true</code>. Use the optional <code>else</code> clause to execute a statement if the condition is <code>false</code>. Use the optional <code>else if</code> to have multiple conditions tested in sequence.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">if </span><span class="p">(</span><span class="nx">condition1</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">statement1</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">condition2</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">statement2</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">conditionN</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">statementN</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">statementLast</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>A <code>switch</code> statement allows a program to evaluate an expression and attempt to match the expression&#8217;s value to a <code>case</code> label. If a match is found, the program executes the associated statement.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">switch </span><span class="p">(</span><span class="nx">expression</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="nx">label1</span><span class="p">:</span>
    <span class="nx">statements1</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="nx">label2</span><span class="p">:</span>
    <span class="nx">statements2</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="c1">// …</span>
  <span class="nl">default</span><span class="p">:</span>
    <span class="nx">statementsDefault</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="error-handling">2.2. Error handling</h3>
<div class="ulist">
<ul>
<li>
<p>Use the <code>throw</code> statement to throw an exception. A throw statement specifies the value to be thrown: <code>throw expression</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">throw</span> <span class="dl">"</span><span class="s2">Error2</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// String type</span>
<span class="k">throw</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// Number type</span>
<span class="k">throw</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// Boolean type</span>
<span class="k">throw</span> <span class="p">{</span>
  <span class="nf">toString</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">"</span><span class="s2">I'm an object!</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Whoops!</span><span class="dl">"</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is common to throw numbers or strings as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">errors</a>, it is frequently more effective to use one of the exception types specifically created for this purpose: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#error_types">ECMAScript exceptions</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMException">DOMException</a>.</p>
</div>
</li>
<li>
<p>The <code>try&#8230;&#8203;catch</code> statement marks a block of statements to try, and specifies one or more responses should an exception be thrown.</p>
<div class="ulist">
<ul>
<li>
<p>If an exception is thrown, the <code>try&#8230;&#8203;catch</code> statement catches it.</p>
</li>
<li>
<p>The <code>finally</code> block executes after the try and catch blocks execute but before the statements following the <code>try&#8230;&#8203;catch</code> statement.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Throwing a generic error</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">try</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Whoops!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Handling a specific error type</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">try</span> <span class="p">{</span>
  <span class="nx">foo</span><span class="p">.</span><span class="nf">bar</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">e</span> <span class="k">instanceof</span> <span class="nx">EvalError</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">e</span> <span class="k">instanceof</span> <span class="nx">RangeError</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// etc.</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// If none of our cases matched leave the Error unhandled</span>
    <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Using <code>finally</code> ensures that the file is never left open, even if an error occurs.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nf">openMyFile</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nf">writeMyFile</span><span class="p">(</span><span class="nx">theData</span><span class="p">);</span> <span class="c1">// This may throw an error</span>
<span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">handleError</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span> <span class="c1">// If an error occurred, handle it</span>
<span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
  <span class="nf">closeMyFile</span><span class="p">();</span> <span class="c1">// Always close the resource</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>If the <code>finally</code> block returns a value, this value becomes the return value of the entire <code>try…catch…finally</code> production, regardless of any <code>return</code> statements in the <code>try</code> and <code>catch</code> blocks:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">throw</span> <span class="dl">"</span><span class="s2">bogus</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="c1">// This return statement is suspended</span>
    <span class="c1">// until finally block has completed</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// not reachable</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// overwrites the previous "return"</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1">// not reachable</span>
  <span class="p">}</span>
  <span class="c1">// "return false" is executed now</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// not reachable</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">f</span><span class="p">());</span> <span class="c1">// 0, 1, 3, false</span></code></pre>
</div>
</div>
</li>
<li>
<p>Overwriting of return values by the <code>finally</code> block also applies to exceptions thrown or re-thrown inside of the <code>catch</code> block:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="dl">"</span><span class="s2">bogus</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">caught inner "bogus"</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// This throw statement is suspended until</span>
    <span class="c1">// finally block has completed</span>
    <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// overwrites the previous "throw"</span>
  <span class="p">}</span>
  <span class="c1">// "return false" is executed now</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">f</span><span class="p">());</span>
<span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// this is never reached!</span>
  <span class="c1">// while f() executes, the `finally` block returns false,</span>
  <span class="c1">// which overwrites the `throw` inside the above `catch`</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">caught outer "bogus"</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Logs:</span>
<span class="c1">// caught inner "bogus"</span>
<span class="c1">// false</span></code></pre>
</div>
</div>
</li>
<li>
<p>Custom error types</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">class</span> <span class="nc">CustomError</span> <span class="kd">extends</span> <span class="nc">Error</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="nx">foo</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span> <span class="p">...</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Pass remaining arguments (including vendor specific ones) to parent constructor</span>
    <span class="k">super</span><span class="p">(...</span><span class="nx">params</span><span class="p">);</span>

    <span class="c1">// Maintains proper stack trace for where our error was thrown (only available on V8)</span>
    <span class="k">if </span><span class="p">(</span><span class="nb">Error</span><span class="p">.</span><span class="nx">captureStackTrace</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">Error</span><span class="p">.</span><span class="nf">captureStackTrace</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">CustomError</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">CustomError</span><span class="dl">"</span><span class="p">;</span>
    <span class="c1">// Custom debugging information</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nc">CustomError</span><span class="p">(</span><span class="dl">"</span><span class="s2">baz</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bazMessage</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// CustomError</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span> <span class="c1">// baz</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span> <span class="c1">// bazMessage</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span> <span class="c1">// stacktrace</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="loops-and-iteration">3. Loops and iteration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="for">3.1. For</h3>
<div class="ulist">
<ul>
<li>
<p>A <code>for</code> loop repeats until a specified condition evaluates to false. The JavaScript for loop is similar to the Java and C <code>for</code> loop.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// similar to the Java and C for loop.</span>
<span class="k">for </span><span class="p">(</span><span class="nx">initialization</span><span class="p">;</span> <span class="nx">condition</span><span class="p">;</span> <span class="nx">afterthought</span><span class="p">)</span>
  <span class="nx">statement</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 0</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>for&#8230;&#8203;in</code> statement iterates a specified variable over all the enumerable properties of an object. For each distinct property, JavaScript executes the specified statements.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">for </span><span class="p">(</span><span class="nx">variable</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span>
  <span class="nx">statement</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">car</span> <span class="o">=</span> <span class="p">{</span> <span class="na">make</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Ford</span><span class="dl">"</span><span class="p">,</span> <span class="na">model</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Mustang</span><span class="dl">"</span> <span class="p">};</span>
<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">car</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`car.</span><span class="p">${</span><span class="nx">p</span><span class="p">}</span><span class="s2"> = </span><span class="p">${</span><span class="nx">car</span><span class="p">[</span><span class="nx">p</span><span class="p">]}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// car.make = Ford</span>
<span class="c1">// car.model = Mustang</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Although it may be tempting to use this as a way to iterate over Array elements, the <code>for&#8230;&#8203;in</code> statement will return the name of the user-defined properties in addition to the numeric indexes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
<span class="nx">nums</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">;</span>
<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">idx</span> <span class="k">in</span> <span class="nx">nums</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`nums[</span><span class="p">${</span><span class="nx">idx</span><span class="p">}</span><span class="s2">] = </span><span class="p">${</span><span class="nx">nums</span><span class="p">[</span><span class="nx">idx</span><span class="p">]}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// nums[0] = 3</span>
<span class="c1">// nums[1] = 4</span>
<span class="c1">// nums[2] = 5</span>
<span class="c1">// nums[foo] = bar</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>for&#8230;&#8203;of</code> statement creates a loop Iterating over <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols">iterable objects</a> (including <code>Array</code>, <code>Map</code>, <code>Set</code>, <code>arguments</code> object and so on), invoking a custom iteration hook with statements to be executed for the value of each distinct property.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">for </span><span class="p">(</span><span class="nx">variable</span> <span class="k">of</span> <span class="nx">object</span><span class="p">)</span>
  <span class="nx">statement</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
<span class="nx">nums</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">;</span>
<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">num</span> <span class="k">of</span> <span class="nx">nums</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 3</span>
<span class="c1">// 4</span>
<span class="c1">// 5</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>for&#8230;&#8203;of</code> and <code>for&#8230;&#8203;in</code> statements can also be used with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">destructuring</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">]</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// "foo" 1</span>
<span class="c1">// "bar" 2</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="while">3.2. While</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>while</code> statement executes its statements as long as a specified condition evaluates to <code>true</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">while </span><span class="p">(</span><span class="nx">condition</span><span class="p">)</span>
  <span class="nx">statement</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">while </span><span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// 0</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>do&#8230;&#8203;while</code> statement repeats until a specified condition evaluates to false.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">do</span>
  <span class="c1">// statement is always executed once before the condition is checked.</span>
  <span class="nx">statement</span>
<span class="k">while </span><span class="p">(</span><span class="nx">condition</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">do</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span> <span class="k">while</span><span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1">// 0</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="label-break-continue">3.3. Label, break, continue</h3>
<div class="ulist">
<ul>
<li>
<p>A <code>label</code> provides a statement with an identifier that lets you refer to it elsewhere in your program.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">label</span><span class="p">:</span>
  <span class="nx">statement</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use the <code>break</code> statement to terminate a loop, <code>switch</code>, or in conjunction with a labeled statement.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>When you use <code>break</code> without a label, it terminates the innermost enclosing <code>while</code>, <code>do-while</code>, <code>for</code>, or <code>switch</code> immediately and transfers control to the following statement.</p>
</li>
<li>
<p>When you use <code>break</code> with a label, it terminates the specified labeled statement.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">break</span><span class="p">;</span>
<span class="k">break</span> <span class="nx">label</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nl">labelCancelLoops</span><span class="p">:</span> <span class="k">while </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Outer loops:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
  <span class="nx">x</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nx">z</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">while </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Inner loops:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">z</span><span class="p">);</span>
    <span class="nx">z</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">z</span> <span class="o">===</span> <span class="mi">10</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">===</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span> <span class="nx">labelCancelLoops</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">z</span> <span class="o">===</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>continue</code> statement can be used to restart a <code>while</code>, <code>do-while</code>, <code>for</code>, or <code>label</code> statement.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>When you use <code>continue</code> without a label, it terminates the current iteration of the innermost enclosing <code>while</code>, <code>do-while</code>, or <code>for</code> statement and continues execution of the loop with the next iteration.</p>
<div class="paragraph">
<p>In contrast to the <code>break</code> statement, <code>continue</code> does not terminate the execution of the loop entirely.</p>
</div>
<div class="paragraph">
<p>In a <code>while</code> loop, it jumps back to the condition.</p>
</div>
<div class="paragraph">
<p>In a <code>for</code> loop, it jumps to the <code>increment-expression</code>.</p>
</div>
</li>
<li>
<p>When you use <code>continue</code> with a label, it applies to the looping statement identified with that label.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">continue</span><span class="p">;</span>
<span class="k">continue</span> <span class="nx">label</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="nl">checkiandj</span><span class="p">:</span> <span class="k">while </span><span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nl">checkj</span><span class="p">:</span> <span class="k">while </span><span class="p">(</span><span class="nx">j</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span>
    <span class="nx">j</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">j</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">continue</span> <span class="nx">checkj</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="dl">"</span><span class="s2">is odd.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">i =</span><span class="dl">"</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">j =</span><span class="dl">"</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="functions">4. Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In JavaScript, functions are <a href="https://developer.mozilla.org/en-US/docs/Glossary/First-class_Function">first-class objects</a>, because they can be passed to other functions, returned from functions, and assigned to variables and properties, and can also have properties and methods just like any other object.</p>
</div>
<div class="sect2">
<h3 id="function-definition">4.1. Function definition</h3>
<div class="ulist">
<ul>
<li>
<p>A <strong>function definition</strong> (also called a <strong>function declaration</strong>, or <strong>function statement</strong>) consists of the <code>function</code> keyword, followed by:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The name of the function.</p>
</li>
<li>
<p>A list of parameters to the function, enclosed in parentheses and separated by commas.</p>
<div class="ulist">
<ul>
<li>
<p>Parameters are essentially passed to functions by value.</p>
</li>
<li>
<p>When pass an object as a parameter, if the function changes the object&#8217;s properties, that change is visible outside the function.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The JavaScript statements that define the function, enclosed in curly braces, <code>{ /* … */ }</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">square</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">number</span> <span class="o">*</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="function-expression">4.2. Function expression</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>function</code> keyword can be used to define a function inside an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function">expression</a>.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Such a function can be <strong>anonymous</strong>; it does not have to have a name.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="nf">function </span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">number</span> <span class="o">*</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">square</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span> <span class="c1">// 16</span></code></pre>
</div>
</div>
</li>
<li>
<p>Providing a name allows the function to refer to itself, and also makes it easier to identify the function in a debugger&#8217;s stack traces:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">factorial</span> <span class="o">=</span> <span class="kd">function</span> <span class="nf">fac</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="nx">n</span> <span class="o">*</span> <span class="nf">fac</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="c1">// 6</span></code></pre>
</div>
</div>
</li>
<li>
<p>Function expressions are convenient when passing a function as an argument to another function.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="nx">nums</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">num</span> <span class="o">*</span> <span class="nx">num</span><span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">square</span><span class="p">.</span><span class="nf">join</span><span class="p">());</span> <span class="c1">// 1,9,25</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="function-object">4.3. Function object</h3>
<div class="paragraph">
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a> object provides methods for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions">functions</a>. In JavaScript, every function is actually a <code>Function</code> object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <code>Function</code> constructor to create functions from a string at runtime, much like <code>eval()</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Function</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">console.log(a + b)</span><span class="dl">'</span><span class="p">);</span>
<span class="nf">sum</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span> <span class="c1">// 8</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>call()</code> and <code>apply()</code> methods of the Function object can also be used to call functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">sum</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// 2</span>
<span class="nx">sum</span><span class="p">.</span><span class="nf">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]);</span> <span class="c1">// 2</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>A <strong>method</strong> is a function that is a property of an object.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">car</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">make</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Ford</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">model</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Mustang</span><span class="dl">"</span><span class="p">,</span>
  <span class="nf">greet</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">make</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span> <span class="p">}</span>
<span class="p">};</span>
<span class="nx">car</span><span class="p">.</span><span class="nf">greet</span><span class="p">();</span> <span class="c1">// Ford, Mustang</span></code></pre>
</div>
</div>
</li>
<li>
<p>JavaScript interpreter <strong>hoists</strong> the entire function <em>declaration</em> — not with function <em>expressions</em> to the top of the current scope.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">square</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span> <span class="c1">// 25</span>

<span class="kd">function</span> <span class="nf">square</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">n</span> <span class="o">*</span> <span class="nx">n</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">square</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span> <span class="c1">// ReferenceError: Cannot access 'square' before initialization</span>
<span class="kd">const</span> <span class="nx">square</span> <span class="o">=</span> <span class="nf">function </span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">n</span> <span class="o">*</span> <span class="nx">n</span><span class="p">;</span>
<span class="p">};</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="recursion-and-closures">4.4. Recursion and closures</h3>
<div class="ulist">
<ul>
<li>
<p>A function that calls itself is called a <strong>recursive function</strong>. There are three ways for a function to refer to itself:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The function&#8217;s name</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments/callee">arguments.callee</a></p>
</li>
<li>
<p>An in-scope variable that refers to the function</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// statements go here</span>

  <span class="c1">// bar()</span>
  <span class="c1">// arguments.callee()</span>
  <span class="c1">// foo()</span>
<span class="p">};</span></code></pre>
</div>
</div>
</li>
<li>
<p>A function can be nested within another function, which forms a <strong>closure</strong>. The nested (inner) function is private to its containing (outer) function.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">outside</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">inside</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">inside</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">fnInside</span> <span class="o">=</span> <span class="nf">outside</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// Think of it like: give me a function that adds 3 to whatever you give it</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">fnInside</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span> <span class="c1">// 8</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">outside</span><span class="p">(</span><span class="mi">3</span><span class="p">)(</span><span class="mi">5</span><span class="p">));</span> <span class="c1">// 8</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A closure is an expression (most commonly, a function) that can have free variables together with an environment that binds those variables (that "closes" the expression).
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A closure must preserve the arguments and variables in all scopes it references. Since each call provides potentially different arguments, a new closure is created for each call to <code>outside</code>. The memory can be freed only when the returned <code>inside</code> is no longer accessible.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>When two arguments or variables in the scopes (<em>scope chaning</em>) of a closure have the same name, the more nested scopes take precedence.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">outside</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nf">inside</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">inside</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">outside</span><span class="p">()(</span><span class="mi">10</span><span class="p">));</span> <span class="c1">// 20 (instead of 10)</span></code></pre>
</div>
</div>
</li>
<li>
<p>Creating closures in loops: a common mistake</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">funcs</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">for </span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// var-based index</span>
  <span class="nx">funcs</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nf">function </span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> <span class="p">});</span>
  <span class="c1">// solution: using the scope chaining to override the outer variable.</span>
  <span class="c1">// funcs.push(function (i) { return function () { console.log(i); } }(i));</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kd">const</span> <span class="nx">func</span> <span class="k">of</span> <span class="nx">funcs</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">func</span><span class="p">();</span>
<span class="p">}</span>
<span class="c1">// 3</span>
<span class="c1">// 3</span>
<span class="c1">// 3</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">funcs</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// let-based index</span>
  <span class="nx">funcs</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nf">function </span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> <span class="p">});</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kd">const</span> <span class="nx">func</span> <span class="k">of</span> <span class="nx">funcs</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">func</span><span class="p">();</span>
<span class="p">}</span>
<span class="c1">// 0</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="arguments-object">4.5. Arguments object</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>arguments</code> of a function are maintained in an array-like object, but not an array.</p>
</li>
<li>
<p>It is array-like in that it has a numbered index and a <code>length</code> property. However, it does not possess all of the array-manipulation methods.</p>
</li>
<li>
<p>Using the <code>arguments</code> object, a function can be called with more arguments than it is formally declared to accept.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">seq</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">arg</span> <span class="k">of</span> <span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nf">seq</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="c1">// 3</span>
<span class="c1">// 0</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="default-parameters-and-rest-parameters">4.6. Default parameters and rest parameters</h3>
<div class="ulist">
<ul>
<li>
<p>In JavaScript, parameters of functions default to <code>undefined</code>. However, in some situations it might be useful to set a different default value. This is exactly what <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters">default parameters</a> do.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// function multiply(a, b) {</span>
<span class="c1">//   b = typeof b !== "undefined" ? b : 1;</span>
<span class="c1">//   return a * b;</span>
<span class="c1">// }</span>
<span class="c1">// With default parameters, a manual check in the function body is no longer necessary.</span>
<span class="kd">function</span> <span class="nf">multiply</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">multiply</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span> <span class="c1">// 5</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">rest parameter</a> (i.e., <a href="https://en.wikipedia.org/wiki/Variadic_function">variadic</a>) syntax allows us to represent an indefinite number of arguments as an array.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">multiply</span><span class="p">(</span><span class="nx">multiplier</span><span class="p">,</span> <span class="p">...</span><span class="nx">theArgs</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">theArgs</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">multiplier</span> <span class="o">*</span> <span class="nx">x</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nf">multiply</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span> <span class="c1">// [2, 4, 6]</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="arrow-functions">4.7. Arrow functions</h3>
<div class="paragraph">
<p>An <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">arrow function expression</a> (also called a <em>fat arrow</em> to distinguish from a hypothetical <code>-></code> syntax in future JavaScript) has a shorter syntax compared to function expressions and does not have its own <code>this</code>, <code>arguments</code>, <code>super</code>, or <code>new.target</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Arrow functions are always anonymous.</p>
</li>
<li>
<p>Two factors influenced the introduction of arrow functions: <em>shorter functions</em> and <em>non-binding</em> of <code>this</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Hydrogen</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Helium</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Lithium</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Beryllium</span><span class="dl">"</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">a2</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nf">function </span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">a2</span><span class="p">);</span> <span class="c1">// [8, 6, 7, 9]</span>

<span class="kd">const</span> <span class="nx">a3</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// shorter functions</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">a3</span><span class="p">);</span> <span class="c1">// [8, 6, 7, 9]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Until arrow functions, every new function defined its own <code>this</code> value (a new object in the case of a constructor, undefined in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">strict mode</a> function calls, the base object if the function is called as an "object method", etc.).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">Person</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// The Person() constructor defines `this` as itself.</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nf">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="nf">growUp</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// In nonstrict mode, the growUp() function defines `this`</span>
    <span class="c1">// as the global object, which is different from the `this`</span>
    <span class="c1">// defined by the Person() constructor.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span><span class="p">;</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In ECMAScript 3/5, this issue was fixed by assigning the value in <code>this</code> to a variable that could be closed over.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// ECMAScript 3/5 closures</span>
<span class="kd">function</span> <span class="nf">Person</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Some choose `that` instead of `self`.</span>
  <span class="c1">// Choose one and be consistent.</span>
  <span class="kd">const</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nb">self</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nf">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="nf">growUp</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// The callback refers to the `self` variable of which</span>
    <span class="c1">// the value is the expected object.</span>
    <span class="nb">self</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span><span class="p">;</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">bound function</a> could be created so that the proper <code>this</code> value would be passed to the <code>growUp()</code> function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">Person</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nf">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="nf">growUp</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}.</span><span class="nf">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An arrow function does not have its own <code>this</code>; the <code>this</code> value of the enclosing execution context is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">Person</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nf">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="o">++</span><span class="p">;</span> <span class="c1">// `this` properly refers to the person object</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="expressions-and-operators">5. Expressions and operators</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">operand1</span> <span class="nx">operator</span> <span class="nx">operand2</span> <span class="c1">// infix binary operator, e.g., 3 + 4 or x * y</span>
<span class="nx">operator</span> <span class="nx">operand</span>           <span class="c1">// prefix unary operator, e.g., ++x</span>
<span class="nx">operand</span> <span class="nx">operator</span>           <span class="c1">// postfix unary operator, e.g., x++</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="assignment-operators">5.1. Assignment operators</h3>
<div class="paragraph">
<p>An assignment operator assigns a value to its left operand based on the value of its right operand. The simple assignment operator is equal (<code>=</code>), which assigns the value of its right operand to its left operand. There are also <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_operators#assignment_operators">compound assignment operators</a> that are shorthand for the operations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">x</span> <span class="o">=</span> <span class="nf">f</span><span class="p">()</span>      <span class="c1">// x = f()</span>
<span class="nx">x</span> <span class="o">+=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x + f()</span>
<span class="nx">x</span> <span class="o">-=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x - f()</span>
<span class="nx">x</span> <span class="o">*=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x * f()</span>
<span class="nx">x</span> <span class="o">/=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x / f()</span>
<span class="nx">x</span> <span class="o">%=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x % f()</span>
<span class="nx">x</span> <span class="o">**=</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// x = x ** f()</span>
<span class="nx">x</span> <span class="o">&lt;&lt;=</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// x = x &lt;&lt; f()</span>
<span class="nx">x</span> <span class="o">&gt;&gt;=</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// x = x &gt;&gt; f()</span>
<span class="nx">x</span> <span class="o">&gt;&gt;&gt;=</span> <span class="nf">f</span><span class="p">()</span>   <span class="c1">// x = x &gt;&gt;&gt; f()</span>
<span class="nx">x</span> <span class="o">&amp;=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x &amp; f()</span>
<span class="nx">x</span> <span class="o">^=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x ^ f()</span>
<span class="nx">x</span> <span class="o">|=</span> <span class="nf">f</span><span class="p">()</span>     <span class="c1">// x = x | f()</span>
<span class="nx">x</span> <span class="o">&amp;&amp;=</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// x &amp;&amp; (x = f())</span>
<span class="nx">x</span> <span class="o">||=</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// x || (x = f())</span>
<span class="nx">x</span> <span class="o">??=</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// x ?? (x = f())</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="assigning-to-properties">5.1.1. Assigning to properties</h4>
<div class="ulist">
<ul>
<li>
<p>If an expression evaluates to an object, then the left-hand side of an assignment expression may make assignments to properties of that expression.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// Prints 3.</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span> <span class="c1">// Prints { x: 3 }.</span>

<span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">y</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span> <span class="c1">// Prints 5.</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span> <span class="c1">// Prints { x: 3, y: 5 }.</span></code></pre>
</div>
</div>
</li>
<li>
<p>If an expression does not evaluate to an object, then assignments to properties of that expression do not assign:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">val</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// Prints undefined.</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span> <span class="c1">// Prints 0.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In strict mode, the code above throws, because one cannot assign properties to primitives.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span>
<span class="kd">const</span> <span class="nx">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">val</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// Uncaught TypeError: can't assign to property "x" on 0: not an object</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="destructuring">5.1.2. Destructuring</h4>
<div class="paragraph">
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">destructuring assignment</a> syntax is a JavaScript expression that makes it possible to extract data from arrays or objects using a syntax that mirrors the construction of array and object literals.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Without destructuring, it takes multiple statements to extract values from arrays and objects:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">one</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">two</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">three</span><span class="dl">"</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">one</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">two</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">three</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span></code></pre>
</div>
</div>
</li>
<li>
<p>With destructuring, you can extract multiple values into distinct variables using a single statement:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="p">[</span><span class="nx">one</span><span class="p">,</span> <span class="nx">two</span><span class="p">,</span> <span class="nx">three</span><span class="p">]</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="evaluation-and-nesting">5.1.3. Evaluation and nesting</h4>
<div class="paragraph">
<p>In general, assignments are used within a variable declaration (i.e., with <code>const</code>, <code>let</code>, or <code>var</code>) or as standalone statements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// Declares a variable x and initializes it to the result of f().</span>
<span class="c1">// The result of the x = f() assignment expression is discarded.</span>
<span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="nf">f</span><span class="p">();</span>

<span class="nx">x</span> <span class="o">=</span> <span class="nf">g</span><span class="p">();</span> <span class="c1">// Reassigns the variable x to the result of g().</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, like other expressions, assignment expressions like <code>x = f()</code> evaluate into a result value. Although this result value is usually not used, it can then be used by another expression.</p>
</div>
<div class="paragraph">
<p>By chaining or nesting an assignment expression, its result can itself be assigned to another variable. It can be logged, it can be put inside an array literal or function call, and so on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">x</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nf">f</span><span class="p">());</span> <span class="c1">// Or equivalently: const y = x = f();</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span> <span class="c1">// Logs the return value of the assignment x = f().</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nf">f</span><span class="p">());</span> <span class="c1">// Logs the return value directly.</span>

<span class="c1">// An assignment expression can be nested in any place</span>
<span class="c1">// where expressions are generally allowed,</span>
<span class="c1">// such as array literals' elements or as function calls' arguments.</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nf">f</span><span class="p">(),</span> <span class="mi">0</span><span class="p">]);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nf">f</span><span class="p">(),</span> <span class="mi">0</span><span class="p">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Avoid assignment chains</strong></p>
</div>
<div class="paragraph">
<p>Chaining assignments or nesting assignments in other expressions can result in surprising behavior. For this reason, <a href="https://github.com/airbnb/javascript/blob/master/README.md#variables&#8212;&#8203;no-chain-assignment">chaining assignments in the same statement is discouraged</a>.</p>
</div>
<div class="paragraph">
<p>In particular, putting a variable chain in a <code>const</code>, <code>let</code>, or <code>var</code> statement often does not work. Only the outermost/leftmost variable would get declared; other variables within the assignment chain are not declared by the <code>const/let/var</code> statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=</span> <span class="nf">f</span><span class="p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This statement seemingly declares the variables <code>x</code>, <code>y</code>, and <code>z</code>. However, it only actually declares the variable <code>z</code>. <code>y</code> and <code>x</code> are either invalid references to nonexistent variables (in strict mode) or, worse, would implicitly create global variables for <code>x</code> and <code>y</code> in sloppy mode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// "use strict"</span>
<span class="p">{</span> <span class="kd">const</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span> <span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span> <span class="c1">// 3.141592653589793 3.141592653589793</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">z</span><span class="p">);</span>    <span class="c1">// Uncaught ReferenceError: z is not defined</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span>
<span class="p">{</span> <span class="kd">const</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// Uncaught ReferenceError: assignment to undeclared variable x</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="comparison-operators">5.2. Comparison operators</h3>
<div class="ulist">
<ul>
<li>
<p>The <strong>strict equality</strong> (<code>===</code>) operator checks whether its two operands are equal, returning a Boolean result. Unlike the equality (<code>==</code>) operator, the strict equality operator always considers operands of different types to be different. See also <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is">Object.is</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness">sameness in JS</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: false</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="kc">false</span><span class="p">);</span>
<span class="c1">// Expected output: false</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="kc">false</span><span class="p">);</span>
<span class="c1">// Expected output: true</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <strong>strict inequality</strong> (<code>!==</code>) operator checks whether its two operands are not equal, returning a Boolean result. Unlike the inequality (<code>!=</code>) operator, the strict inequality operator always considers operands of different types to be different.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: false</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// Expected output: false</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">0</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">);</span>
<span class="c1">// Expected output: true</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: false</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span> <span class="o">!=</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// Expected output: false</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">);</span>
<span class="c1">// Expected output: false</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">0</span> <span class="o">!=</span> <span class="kc">false</span><span class="p">);</span>
<span class="c1">// Expected output: false</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="arithmetic-operators">5.3. Arithmetic operators</h3>
<div class="paragraph">
<p>In addition to the standard arithmetic operations (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>), JavaScript provides also the arithmetic operators: <code>%</code>, <code>++</code>, <code>--</code>, <code>-</code>, <code>+</code>, <code>**</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
division by zero produces <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity">Infinity</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="bitwise-operators">5.4. Bitwise operators</h3>
<div class="paragraph">
<p>A bitwise operator treats their operands as a set of 32 bits (zeros and ones), rather than as decimal, hexadecimal, or octal numbers.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&amp;</code>, <code>|</code>, <code>^</code>, <code>~</code>, <code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>&gt;&gt;&gt;</code></p>
</li>
<li>
<p>The operands are converted to thirty-two-bit integers and expressed by a series of bits (zeros and ones). Numbers with more than 32 bits get their most significant bits discarded. For example, the following integer with more than 32 bits will be converted to a 32-bit integer:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">Before: 1110 0110 1111 1010 0000 0000 0000 0110 0000 0000 0001
After:                 1010 0000 0000 0000 0110 0000 0000 0001</code></pre>
</div>
</div>
</li>
<li>
<p>The bitwise shift operators take two operands: the first is a quantity to be shifted, and the second specifies the number of bit positions by which the first operand is to be shifted. The direction of the shift operation is controlled by the operator used.</p>
</li>
<li>
<p>Shift operators convert their operands to thirty-two-bit integers and return a result of either type <code>Number</code> or <code>BigInt</code>: specifically, if the type of the left operand is <code>BigInt</code>, they return <code>BigInt</code>; otherwise, they return <code>Number</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="logical-operators">5.5. Logical operators</h3>
<div class="ulist">
<ul>
<li>
<p>Logical operators are typically used with Boolean (logical) values; when they are, they return a Boolean value.</p>
</li>
<li>
<p>The <code>&amp;&amp;</code> and <code>||</code> operators actually return the value of one of the specified operands, so if these operators are used with non-Boolean values, they may return a non-Boolean value.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">a1</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// t &amp;&amp; t returns true</span>
<span class="kd">const</span> <span class="nx">a2</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// t &amp;&amp; f returns false</span>
<span class="kd">const</span> <span class="nx">a3</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// f &amp;&amp; t returns false</span>
<span class="kd">const</span> <span class="nx">a4</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="mi">3</span> <span class="o">===</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// f &amp;&amp; f returns false</span>
<span class="kd">const</span> <span class="nx">a5</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="dl">"</span><span class="s2">Dog</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// t &amp;&amp; t returns Dog</span>
<span class="kd">const</span> <span class="nx">a6</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// f &amp;&amp; t returns false</span>
<span class="kd">const</span> <span class="nx">a7</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// t &amp;&amp; f returns false</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">o1</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">||</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// t || t returns true</span>
<span class="kd">const</span> <span class="nx">o2</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">||</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// f || t returns true</span>
<span class="kd">const</span> <span class="nx">o3</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// t || f returns true</span>
<span class="kd">const</span> <span class="nx">o4</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">||</span> <span class="mi">3</span> <span class="o">===</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// f || f returns false</span>
<span class="kd">const</span> <span class="nx">o5</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Dog</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// t || t returns Cat</span>
<span class="kd">const</span> <span class="nx">o6</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// f || t returns Cat</span>
<span class="kd">const</span> <span class="nx">o7</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// t || f returns Cat</span></code></pre>
</div>
</div>
</li>
<li>
<p>As logical expressions are evaluated left to right, they are tested for possible "<strong>short-circuit</strong>" evaluation using the following rules:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>false &amp;&amp; anything</code> is short-circuit evaluated to false.</p>
</li>
<li>
<p><code>true || anything</code> is short-circuit evaluated to true.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>The <strong>nullish coalescing</strong> (<code>??</code>) operator is a logical operator that returns its right-hand side operand when its left-hand side operand is <code>null</code> or <code>undefined</code>, and otherwise returns its left-hand side operand.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="kc">null</span> <span class="o">??</span> <span class="dl">'</span><span class="s1">default string</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
<span class="c1">// Expected output: "default string"</span>

<span class="kd">const</span> <span class="nx">baz</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">??</span> <span class="mi">42</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">baz</span><span class="p">);</span>
<span class="c1">// Expected output: 0</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="conditional-ternary-operator">5.6. Conditional (ternary) operator</h3>
<div class="paragraph">
<p>The conditional operator is the only JavaScript operator that takes three operands. The operator can have one of two values based on a condition. The syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">condition</span> <span class="p">?</span> <span class="nx">val1</span> <span class="p">:</span> <span class="nx">val2</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="comma-operator">5.7. Comma operator</h3>
<div class="paragraph">
<p>The comma operator (<code>,</code>) evaluates both of its operands and returns the value of the last operand.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This operator is primarily used inside a for loop, to allow multiple variables to be updated each time through the loop.</p>
</li>
<li>
<p>It is regarded bad style to use it elsewhere, when it is not necessary. Often two separate statements can and should be used instead.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x</span><span class="p">];</span>

<span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">,</span> <span class="nx">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//                              ^</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`a[</span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">][</span><span class="p">${</span><span class="nx">j</span><span class="p">}</span><span class="s2">]= </span><span class="p">${</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="unary-operators">5.8. Unary operators</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>delete</code> operator removes a property from an object. If the property&#8217;s value is an object and there are no more references to the object, the object held by that property is eventually released automatically.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">delete</span> <span class="nx">object</span><span class="p">.</span><span class="nx">property</span>
<span class="k">delete</span> <span class="nx">object</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">car</span> <span class="o">=</span> <span class="p">{</span> <span class="na">make</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Ford</span><span class="dl">"</span><span class="p">,</span> <span class="na">model</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Mustang</span><span class="dl">"</span> <span class="p">};</span>
<span class="k">delete</span> <span class="nx">car</span><span class="p">.</span><span class="nx">make</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">car</span><span class="p">);</span> <span class="c1">// { model: "Mustang" }</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="k">delete</span> <span class="nx">nums</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">nums</span><span class="p">);</span> <span class="c1">// [ 0, &lt;1 empty slot&gt;, 2, 3 ]</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>typeof</code> operator returns a string indicating the type of the unevaluated operand. operand is the string, variable, keyword, or object for which the type is to be returned. The parentheses are optional.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">typeof</span> <span class="k">new</span> <span class="nc">Function</span><span class="p">(</span><span class="dl">"</span><span class="s2">5 + 2</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// "function"</span>
<span class="k">typeof</span> <span class="dl">"</span><span class="s2">round</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// "string"</span>
<span class="k">typeof</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// "number"</span>
<span class="k">typeof</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Apple</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Mango</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Orange</span><span class="dl">"</span><span class="p">];</span> <span class="c1">// "object"</span>
<span class="k">typeof</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">();</span> <span class="c1">// "object"</span>
<span class="k">typeof</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// "boolean"</span>
<span class="k">typeof</span> <span class="p">{};</span> <span class="c1">// "boolean"</span>
<span class="k">typeof</span> <span class="sr">/ab+c/</span><span class="p">;</span> <span class="c1">// "object"</span>
<span class="k">typeof</span> <span class="kc">undefined</span><span class="p">;</span> <span class="c1">// "undefined"</span>
<span class="k">typeof</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// "object"</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>void</code> operator specifies an expression to be evaluated without returning a value. <code>expression</code> is a JavaScript expression to evaluate. The parentheses surrounding the expression are optional, but it is good style to use them to avoid precedence issues.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">output</span> <span class="o">=</span> <span class="k">void</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>
<span class="c1">// Expected output: undefined</span>

<span class="k">void</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">expression evaluated</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// Expected output: "expression evaluated"</span>

<span class="k">void </span><span class="p">(</span><span class="kd">function</span> <span class="nf">iife</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">iife is executed</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>
<span class="c1">// Expected output: "iife is executed"</span>

<span class="k">void</span> <span class="kd">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">test function executed</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nf">test</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">test function is not defined</span><span class="dl">'</span><span class="p">);</span>
  <span class="c1">// Expected output: "test function is not defined"</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="relational-operators">5.9. Relational operators</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>in</code> operator returns <code>true</code> if the specified property is in the specified object or its prototype chain. The <code>in</code> operator cannot be used to search for values in other collections. To test if a certain value exists in an array, use <code>Array.prototype.includes()</code>. For sets, use <code>Set.prototype.has()</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// Arrays</span>
<span class="kd">const</span> <span class="nx">trees</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">redwood</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bay</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">cedar</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">oak</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">maple</span><span class="dl">"</span><span class="p">];</span>
<span class="mi">0</span> <span class="k">in</span> <span class="nx">trees</span><span class="p">;</span> <span class="c1">// returns true</span>
<span class="mi">3</span> <span class="k">in</span> <span class="nx">trees</span><span class="p">;</span> <span class="c1">// returns true</span>
<span class="mi">6</span> <span class="k">in</span> <span class="nx">trees</span><span class="p">;</span> <span class="c1">// returns false</span>
<span class="dl">"</span><span class="s2">bay</span><span class="dl">"</span> <span class="k">in</span> <span class="nx">trees</span><span class="p">;</span> <span class="c1">// returns false</span>
<span class="c1">// (you must specify the index number, not the value at that index)</span>
<span class="dl">"</span><span class="s2">length</span><span class="dl">"</span> <span class="k">in</span> <span class="nx">trees</span><span class="p">;</span> <span class="c1">// returns true (length is an Array property)</span>

<span class="c1">// built-in objects</span>
<span class="dl">"</span><span class="s2">PI</span><span class="dl">"</span> <span class="k">in</span> <span class="nb">Math</span><span class="p">;</span> <span class="c1">// returns true</span>
<span class="kd">const</span> <span class="nx">myString</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="p">(</span><span class="dl">"</span><span class="s2">coral</span><span class="dl">"</span><span class="p">);</span>
<span class="dl">"</span><span class="s2">length</span><span class="dl">"</span> <span class="k">in</span> <span class="nx">myString</span><span class="p">;</span> <span class="c1">// returns true</span>

<span class="c1">// Custom objects</span>
<span class="kd">const</span> <span class="nx">mycar</span> <span class="o">=</span> <span class="p">{</span> <span class="na">make</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Honda</span><span class="dl">"</span><span class="p">,</span> <span class="na">model</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Accord</span><span class="dl">"</span><span class="p">,</span> <span class="na">year</span><span class="p">:</span> <span class="mi">1998</span> <span class="p">};</span>
<span class="dl">"</span><span class="s2">make</span><span class="dl">"</span> <span class="k">in</span> <span class="nx">mycar</span><span class="p">;</span> <span class="c1">// returns true</span>
<span class="dl">"</span><span class="s2">model</span><span class="dl">"</span> <span class="k">in</span> <span class="nx">mycar</span><span class="p">;</span> <span class="c1">// returns true</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>instanceof</code> operator tests to see if the prototype property of a constructor appears anywhere in the prototype chain of an object. The return value is a boolean value. Its behavior can be customized with <code>Symbol.hasInstance</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">Car</span><span class="p">(</span><span class="nx">make</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">make</span> <span class="o">=</span> <span class="nx">make</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">auto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Car</span><span class="p">(</span><span class="dl">'</span><span class="s1">Honda</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Accord</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1998</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">auto</span> <span class="k">instanceof</span> <span class="nx">Car</span><span class="p">);</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">auto</span> <span class="k">instanceof</span> <span class="nb">Object</span><span class="p">);</span>
<span class="c1">// Expected output: true</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="grouping-operator">5.10. Grouping operator</h3>
<div class="paragraph">
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Grouping"><strong>grouping</strong></a> <code>( )</code> operator controls the precedence of evaluation in expressions. It also acts as a container for arbitrary expressions in certain syntactic constructs, where ambiguity or syntax errors would otherwise occur.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Evaluating addition and subtraction before multiplication and division.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="c1">// default precedence</span>
<span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span> <span class="c1">// 7</span>
<span class="c1">// evaluated by default like this</span>
<span class="nx">a</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span> <span class="nx">c</span><span class="p">);</span> <span class="c1">// 7</span>

<span class="c1">// now overriding precedence</span>
<span class="c1">// addition before multiplication</span>
<span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">)</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span> <span class="c1">// 9</span>

<span class="c1">// which is equivalent to</span>
<span class="nx">a</span> <span class="o">*</span> <span class="nx">c</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span> <span class="c1">// 9</span></code></pre>
</div>
</div>
</li>
<li>
<p>Using the grouping operator to eliminate parsing ambiguity</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// An IIFE (Immediately Invoked Function Expression)</span>
<span class="p">(</span><span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// code</span>
<span class="p">})();</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// an arrow function expression body</span>
<span class="kd">const</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span> <span class="p">});</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// a property accessor dot `.` may be ambiguous with a decimal point</span>
<span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nf">toString</span><span class="p">();</span> <span class="c1">// "1"</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="optional-chaining-operator">5.11. Optional chaining operator</h3>
<div class="paragraph">
<p>The <strong>optional chaining (<code>?.</code>)</strong> operator accesses an object&#8217;s property or calls a function. If the object accessed or function called using this operator is <code>undefined</code> or <code>null</code>, the expression short circuits and evaluates to <code>undefined</code> instead of throwing an error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">adventurer</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Alice</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">cat</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Dinah</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">dogName</span> <span class="o">=</span> <span class="nx">adventurer</span><span class="p">.</span><span class="nx">dog</span><span class="p">?.</span><span class="nx">name</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">dogName</span><span class="p">);</span>
<span class="c1">// Expected output: undefined</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">adventurer</span><span class="p">.</span><span class="nx">someNonExistentMethod</span><span class="p">?.());</span>
<span class="c1">// Expected output: undefined</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="regular-expressions">6. Regular expressions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Regular expression literals (<code>/pattern/flags</code>) provide compilation of the regular expression when the script is loaded. If the regular expression remains constant, using this can improve performance.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/ab+c/i</span><span class="p">;</span> <span class="c1">// literal notation</span></code></pre>
</div>
</div>
</li>
<li>
<p>Using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp">RegExp</a> constructor function provides runtime compilation of the regular expression.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// OR</span>
<span class="kd">const</span> <span class="nx">re</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RegExp</span><span class="p">(</span><span class="dl">"</span><span class="s2">ab+c</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">i</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// constructor with string pattern as first argument</span>
<span class="c1">// OR</span>
<span class="kd">const</span> <span class="nx">re</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RegExp</span><span class="p">(</span><span class="sr">/ab+c/</span><span class="p">,</span> <span class="dl">"</span><span class="s2">i</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// constructor with regular expression literal as first argument</span></code></pre>
</div>
</div>
</li>
<li>
<p>Regular expressions are used with the <code>RegExp</code> methods <code>test()</code> and <code>exec()</code> and with the <code>String</code> methods <code>match()</code>, <code>matchAll()</code>, <code>replace()</code>, <code>replaceAll()</code>, <code>search()</code>, and <code>split()</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="indexed-and-keyed-collections">7. Indexed and keyed Collections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Indexed collections (data which are ordered by an index value) includes arrays and array-like constructs such as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> objects and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">TypedArray</a> objects.</p>
</div>
<div class="sect2">
<h3 id="arrays">7.1. Arrays</h3>
<div class="paragraph">
<p>At the implementation level, JavaScript&#8217;s arrays actually store their elements as standard object properties, using the array index as the property name.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>length</code> property is special. Its value is always a positive integer greater than the index of the last element if one exists.</p>
</li>
<li>
<p>Writing a value that is shorter than the number of stored items truncates the array.</p>
</li>
<li>
<p>Arrays can also be used like objects, to store related information.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// same as: const nums = new Array(); OR const nums = new Array(0);</span>
<span class="nx">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nx">nums</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">nums</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="p">};</span> <span class="c1">// a user-defined extension method</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">nums</span><span class="p">);</span> <span class="c1">// Array(3) [ 0, &lt;1 empty slot&gt;, 2 ]</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">nums</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">nums</span><span class="p">.</span><span class="nf">size</span><span class="p">());</span> <span class="c1">// 3 3</span>
<span class="nx">nums</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">nums</span><span class="p">);</span> <span class="c1">// Array [ 0, &lt;1 empty slot&gt; ]</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>forEach()</code> method executes callback on every array item and returns <code>undefined</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">red</span><span class="dl">"</span><span class="p">,</span> <span class="cm">/* empty */</span><span class="p">,</span> <span class="dl">"</span><span class="s2">green</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">blue</span><span class="dl">"</span><span class="p">];</span>
<span class="c1">// Unassigned values are not iterated in a forEach loop.</span>
<span class="nx">colors</span><span class="p">.</span><span class="nf">forEach</span><span class="p">((</span><span class="nx">color</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">color</span><span class="p">));</span>
<span class="c1">// red</span>
<span class="c1">// green</span>
<span class="c1">// blue</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>concat()</code> method joins two or more arrays and returns a new array.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">let</span> <span class="nx">myArray</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">2</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">3</span><span class="dl">"</span><span class="p">];</span>
<span class="nx">myArray</span> <span class="o">=</span> <span class="nx">myArray</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">c</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// myArray is now ["1", "2", "3", "a", "b", "c"]</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>flat()</code> method returns a new array with all sub-array elements concatenated into it recursively up to the specified depth.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">arr1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]];</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">arr1</span><span class="p">.</span><span class="nf">flat</span><span class="p">());</span>
<span class="c1">// expected output: Array [0, 1, 2, 3, 4]</span>

<span class="kd">const</span> <span class="nx">arr2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]]];</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">arr2</span><span class="p">.</span><span class="nf">flat</span><span class="p">());</span>
<span class="c1">// expected output: Array [0, 1, 2, Array [3, Array [4, 5]]]</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">arr2</span><span class="p">.</span><span class="nf">flat</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
<span class="c1">// expected output: Array [0, 1, 2, 3, Array [4, 5]]</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">arr2</span><span class="p">.</span><span class="nf">flat</span><span class="p">(</span><span class="kc">Infinity</span><span class="p">));</span>
<span class="c1">// expected output: Array [0, 1, 2, 3, 4, 5]</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>map()</code> method returns a new array of the return value from executing callback on every array item.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">a1</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">c</span><span class="dl">"</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">a2</span> <span class="o">=</span> <span class="nx">a1</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">());</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">a2</span><span class="p">);</span> <span class="c1">// ['A', 'B', 'C']</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>flatMap()</code> method runs <code>map()</code> followed by a <code>flat()</code> of depth 1.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">a1</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">c</span><span class="dl">"</span><span class="p">];</span>
<span class="kd">const</span> <span class="nx">a2</span> <span class="o">=</span> <span class="nx">a1</span><span class="p">.</span><span class="nf">flatMap</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">(),</span> <span class="nx">item</span><span class="p">.</span><span class="nf">toLowerCase</span><span class="p">()]);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">a2</span><span class="p">);</span> <span class="c1">// ['A', 'a', 'B', 'b', 'C', 'c']</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>reduce()</code> method of Array instances executes a user-supplied "reducer" callback function on each element of the array, in order, passing in the return value from the calculation on the preceding element.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The final result of running the reducer across all elements of the array is a single value.</p>
</li>
<li>
<p>The first time that the callback is run there is no "return value of the previous calculation".</p>
<div class="ulist">
<ul>
<li>
<p>If supplied, an initial value may be used in its place.</p>
</li>
<li>
<p>Otherwise the array element at index 0 is used as the initial value and iteration starts from the next element (index 1 instead of index 0).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">array1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>

<span class="c1">// 0 + 1 + 2 + 3 + 4</span>
<span class="kd">const</span> <span class="nx">initialValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">sumWithInitial</span> <span class="o">=</span> <span class="nx">array1</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span>
  <span class="p">(</span><span class="nx">accumulator</span><span class="p">,</span> <span class="nx">currentValue</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">accumulator</span> <span class="o">+</span> <span class="nx">currentValue</span><span class="p">,</span>
  <span class="nx">initialValue</span><span class="p">,</span>
<span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">sumWithInitial</span><span class="p">);</span>
<span class="c1">// Expected output: 10</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>Array.isArray()</code> static method determines whether the passed value is an Array.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nf">isArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]));</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nf">isArray</span><span class="p">(</span><span class="dl">'</span><span class="s1">[]</span><span class="dl">'</span><span class="p">));</span>
<span class="c1">// Expected output: false</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nf">isArray</span><span class="p">(</span><span class="k">new</span> <span class="nc">Array</span><span class="p">(</span><span class="mi">5</span><span class="p">)));</span>
<span class="c1">// Expected output: true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nf">isArray</span><span class="p">(</span><span class="k">new</span> <span class="nc">Int16Array</span><span class="p">([</span><span class="mi">15</span><span class="p">,</span> <span class="mi">33</span><span class="p">])));</span>
<span class="c1">// Expected output: false</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="typed-arrays">7.2. Typed arrays</h3>
<div class="paragraph">
<p>JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Typed_arrays">typed arrays</a> are array-like objects that provide a mechanism for reading and writing raw binary data in memory buffers.</p>
</div>
<div class="paragraph">
<p>To achieve maximum flexibility and efficiency, JavaScript typed arrays split the implementation into <em>buffers</em> and <em>views</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A buffer is an object representing a chunk of data; it has no format to speak of, and offers no mechanism for accessing its contents.</p>
</li>
<li>
<p>In order to access the memory contained in a buffer, it&#8217;s needed to use a view which provides a <em>context</em> — that is, a data type, starting offset, and number of elements.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Typed_arrays/typed_arrays.png" alt="A diagram showing how different typed arrays may be views of the same underlying buffer. Each one has a different element number and width." width="666px" height="278px">
</div>
</div>
</div>
<div class="sect2">
<h3 id="maps-and-sets">7.3. Maps and sets</h3>
<div class="paragraph">
<p>Maps and sets are keyed collections (data which are indexed by a key), and both contain elements which are iterable in the order of insertion.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>Map</code> object is a simple key/value map and can iterate its elements in insertion order.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">sayings</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Map</span><span class="p">();</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">woof</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">cat</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">meow</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">elephant</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">toot</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span> <span class="c1">// 3</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// woof</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">fox</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// undefined</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nf">has</span><span class="p">(</span><span class="dl">"</span><span class="s2">bird</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nx">sayings</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nf">has</span><span class="p">(</span><span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// false</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">]</span> <span class="k">of</span> <span class="nx">sayings</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">key</span><span class="p">}</span><span class="s2"> goes </span><span class="p">${</span><span class="nx">value</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// "cat goes meow"</span>
<span class="c1">// "elephant goes toot"</span>

<span class="nx">sayings</span><span class="p">.</span><span class="nf">clear</span><span class="p">();</span>
<span class="nx">sayings</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span> <span class="c1">// 0</span></code></pre>
</div>
</div>
</li>
<li>
<p>A <code>Set</code> object is a collection of unique values.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Its elements can be iterated in insertion order.</p>
</li>
<li>
<p>A value in a Set may only occur once; it is unique in the <code>Set</code>'s collection.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">mySet</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Set</span><span class="p">();</span>
<span class="nx">mySet</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nx">mySet</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">some text</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">mySet</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">mySet</span><span class="p">.</span><span class="nf">has</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">mySet</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">mySet</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span> <span class="c1">// 2</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">mySet</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 1</span>
<span class="c1">// "some text"</span></code></pre>
</div>
</div>
</li>
<li>
<p>Both the key equality of Map objects and the value equality of Set objects are based on the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value-zero_equality">SameValueZero algorithm</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Equality works like the identity comparison operator <code>===</code>.</p>
</li>
<li>
<p><code>-0</code> and <code>+0</code> are considered equal.</p>
</li>
<li>
<p><code>NaN</code> is considered equal to itself (contrary to <code>===</code>).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prototypes-objects-and-classes">8. Prototypes, objects and classes</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In object-oriented programming, <a href="https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)"><strong>inheritance</strong></a> is the mechanism of basing an object or class upon another object (<a href="https://en.wikipedia.org/wiki/Prototype-based_programming">prototype-based inheritance</a>) or class (<a href="https://en.wikipedia.org/wiki/Class-based_programming">class-based inheritance</a>), retaining similar implementation.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Inheritance (object-oriented programming) - Wikipedia
</div>
</div>
<div class="sect2">
<h3 id="prototype">8.1. Prototype</h3>
<div class="paragraph">
<p>JavaScript is a prototype-based, object-oriented scripting language, which implements inheritance by using objects.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each object has an internal link to another object called its <strong>prototype</strong>.</p>
</li>
<li>
<p>That prototype object has a prototype of its own, and so on until an object is reached with <code>null</code> as its prototype.</p>
</li>
<li>
<p>By definition, <code>null</code> has no prototype and acts as the final link in this <strong>prototype chain</strong>.</p>
</li>
<li>
<p>It is possible to mutate any member of the prototype chain or even swap out the prototype at runtime, so concepts like <a href="https://en.wikipedia.org/wiki/Static_dispatch">static dispatching</a> do not exist in JavaScript.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="properties">8.2. Properties</h3>
<div class="paragraph">
<p>JavaScript objects are dynamic "bags" of properties (referred to as <strong>own properties</strong>) and have a link to a prototype object. When trying to access a property of an object,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the property will not only be sought on the object but on the prototype of the object, the prototype of the prototype,</p>
</li>
<li>
<p>and so on until either a property with a matching name is found or the end of the prototype chain is reached.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Following the ECMAScript standard, the notation <code>someObject.[[Prototype]]</code> is used to designate the prototype of <code>someObject</code>.</p>
</div>
<div class="paragraph">
<p>The <code>[[Prototype]]</code> internal slot can be accessed and modified with the <code>Object.getPrototypeOf()</code> and <code>Object.setPrototypeOf()</code> functions respectively.</p>
</div>
<div class="paragraph">
<p>It is equivalent to the JavaScript accessor <code>__proto__</code> which is non-standard but de-facto implemented by many JavaScript engines.</p>
</div>
<div class="paragraph">
<p>It&#8217;s worth noting that the <code>{ __proto__: ... }</code> syntax is different from the <code>obj.__proto__</code> accessor: the former is standard and not deprecated, and the later is non-standard and deprecated. .</p>
</div>
<div class="paragraph">
<p>It should not be confused with the <code>func.prototype</code> property of functions, which instead specifies the <code><a id="Prototype"></a></code> to be assigned to all instances of objects created by the given function when used as a constructor.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In an object literal like <code>{ a: 1, b: 2, __proto__: c }</code>, the value <code>c</code> (which has to be either <code>null</code> or another object) will become the <code>[[Prototype]]</code> of the object represented by the literal, while the other keys like <code>a</code> and <code>b</code> will become the <em>own properties</em> of the object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="c1">// __proto__ sets the [[Prototype]]. It's specified here as another object literal.</span>
  <span class="na">__proto__</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">b</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="na">c</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="c1">// a longer prototype chain</span>
    <span class="na">__proto__</span><span class="p">:</span> <span class="p">{</span>
      <span class="c1">// Object literals (without the `__proto__` key) automatically</span>
      <span class="c1">// have `Object.prototype` as their `[[Prototype]]`</span>
      <span class="na">d</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="c1">// { a: 1, b: 2 } ---&gt; { b: 3, c: 4 } ---&gt; { d: 5 } ---&gt; Object.prototype ---&gt; null</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In JavaScript, any function can be added to an object in the form of a property, aka <strong>"method"</strong>. When the function is executed, the value of <code>this</code> points to the inheriting object, not to the prototype object where the function is an own property.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">parent</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">value</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nf">method</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nf">method</span><span class="p">());</span> <span class="c1">// 3</span>
<span class="c1">// When calling parent.method in this case, 'this' refers to parent</span>

<span class="c1">// child is an object that inherits from parent</span>
<span class="kd">const</span> <span class="nx">child</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">__proto__</span><span class="p">:</span> <span class="nx">parent</span><span class="p">,</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nf">method</span><span class="p">());</span> <span class="c1">// 3</span>
<span class="c1">// When child.method is called, 'this' refers to child.</span>
<span class="c1">// So when child inherits the method of parent,</span>
<span class="c1">// The property 'value' is sought on child. However, since child</span>
<span class="c1">// doesn't have an own property called 'value', the property is</span>
<span class="c1">// found on the [[Prototype]], which is parent.value.</span>

<span class="nx">child</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// assign the value 4 to the property 'value' on child.</span>
<span class="c1">// This shadows the 'value' property on parent.</span>
<span class="c1">// The child object now looks like:</span>
<span class="c1">// { value: 4, __proto__: { value: 2, method: [Function] } }</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nf">method</span><span class="p">());</span> <span class="c1">// 5</span>
<span class="c1">// Since child now has the 'value' property, 'this.value' means</span>
<span class="c1">// child.value instead</span></code></pre>
</div>
</div>
</li>
<li>
<p>To check whether an object has a property defined on itself, it is necessary to use the <code>Object.hasOwn</code> or <code>Object.prototype.hasOwnProperty</code> methods.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
All objects, except those with <code>null</code> as <code>[[Prototype]]</code>, inherit <code>hasOwnProperty</code> from <code>Object.prototype</code> — unless it has been overridden further down the prototype chain.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>Object.hasOwn()</code> is intended as a replacement for <code>Object.prototype.hasOwnProperty()</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">example</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">example</span><span class="p">.</span><span class="nx">prop</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">exists</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// `hasOwn` will only return true for direct properties:</span>
<span class="nb">Object</span><span class="p">.</span><span class="nf">hasOwn</span><span class="p">(</span><span class="nx">example</span><span class="p">,</span> <span class="dl">"</span><span class="s2">prop</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nb">Object</span><span class="p">.</span><span class="nf">hasOwn</span><span class="p">(</span><span class="nx">example</span><span class="p">,</span> <span class="dl">"</span><span class="s2">toString</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nb">Object</span><span class="p">.</span><span class="nf">hasOwn</span><span class="p">(</span><span class="nx">example</span><span class="p">,</span> <span class="dl">"</span><span class="s2">hasOwnProperty</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// false</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="constructors">8.3. Constructors</h3>
<div class="ulist">
<ul>
<li>
<p>A <strong>constructor</strong> is a function with a special property called <code>prototype</code>, which works with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new"><code>new</code></a> operator.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// A constructor function, with good reason, to use a capital initial letter</span>
<span class="kd">function</span> <span class="nf">Box</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Properties all boxes created from the Box() constructor</span>
<span class="c1">// will have</span>
<span class="nx">Box</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getValue</span> <span class="o">=</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">boxes</span> <span class="o">=</span> <span class="p">[</span><span class="k">new</span> <span class="nc">Box</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="k">new</span> <span class="nc">Box</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="k">new</span> <span class="nc">Box</span><span class="p">(</span><span class="mi">3</span><span class="p">)];</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// class are syntax sugar over constructor functions.</span>
<span class="kd">class</span> <span class="nc">Box</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Methods are created on Box.prototype</span>
  <span class="nf">getValue</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// without constructor</span>
<span class="kd">const</span> <span class="nx">boxPrototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nf">getValue</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">boxes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">__proto__</span><span class="p">:</span> <span class="nx">boxPrototype</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">__proto__</span><span class="p">:</span> <span class="nx">boxPrototype</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">__proto__</span><span class="p">:</span> <span class="nx">boxPrototype</span> <span class="p">},</span>
<span class="p">];</span></code></pre>
</div>
</div>
</li>
<li>
<p>To build longer prototype chains, set the <code>[[Prototype]]</code> of <code>Constructor.prototype</code> via the <code>Object.setPrototypeOf()</code> function.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">Base</span><span class="p">()</span> <span class="p">{}</span>
<span class="kd">function</span> <span class="nf">Derived</span><span class="p">()</span> <span class="p">{}</span>
<span class="c1">// Set the `[[Prototype]]` of `Derived.prototype`</span>
<span class="c1">// to `Base.prototype`</span>
<span class="nb">Object</span><span class="p">.</span><span class="nf">setPrototypeOf</span><span class="p">(</span><span class="nx">Derived</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Derived</span><span class="p">();</span>
<span class="c1">// obj ---&gt; Derived.prototype ---&gt; Base.prototype ---&gt; Object.prototype ---&gt; null</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// It is equivalent to using the `extends` syntax in class terms.</span>
<span class="kd">class</span> <span class="nc">Base</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">Derived</span> <span class="kd">extends</span> <span class="nc">Base</span> <span class="p">{}</span>

<span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Derived</span><span class="p">();</span>
<span class="c1">// obj ---&gt; Derived.prototype ---&gt; Base.prototype ---&gt; Object.prototype ---&gt; null</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="objects">8.4. Objects</h3>
<div class="paragraph">
<p>JavaScript is designed on a simple object-based paradigm.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An object is a collection of <a href="https://developer.mozilla.org/en-US/docs/Glossary/Property/JavaScript">properties</a>, and a property is an association between a name (or key) and a value.</p>
</li>
<li>
<p>A property&#8217;s value can be a function, in which case the property is known as a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Method">method</a>.</p>
</li>
<li>
<p>A property can be accessed in two syntaxes: dot notation (<code>.</code>) and bracket notation (<code>[ ]</code>).</p>
</li>
<li>
<p>A non-inherited property can be removed using the <code>delete</code> operator.</p>
</li>
<li>
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get">getter</a> is a function associated with a property that gets the value of a specific property.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">{</span> <span class="kd">get</span> <span class="nf">prop</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">{</span> <span class="kd">get</span> <span class="p">[</span><span class="nx">expression</span><span class="p">]()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set">setter</a> is a function associated with a property that sets the value of a specific property.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="p">{</span> <span class="kd">set</span> <span class="nf">prop</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">{</span> <span class="kd">set</span> <span class="p">[</span><span class="nx">expression</span><span class="p">](</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>An object can be created using an <em>object initializer</em>, a <em>constructor function</em>, a <em>class</em>, and the <code>Object.create()</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">myHonda</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">color</span><span class="p">:</span> <span class="dl">"</span><span class="s2">red</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">wheels</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="na">engine</span><span class="p">:</span> <span class="p">{</span> <span class="na">cylinders</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">size</span><span class="p">:</span> <span class="mf">2.2</span> <span class="p">},</span>
<span class="p">};</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">Car</span><span class="p">(</span><span class="nx">make</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">make</span> <span class="o">=</span> <span class="nx">make</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">myCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Car</span><span class="p">(</span><span class="dl">"</span><span class="s2">Eagle</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Talon TSi</span><span class="dl">"</span><span class="p">,</span> <span class="mi">1993</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">class</span> <span class="nc">Car</span> <span class="p">{</span>
  <span class="nf">constructor </span><span class="p">(</span><span class="nx">make</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">make</span> <span class="o">=</span> <span class="nx">make</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">model</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">myCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Car</span><span class="p">(</span><span class="dl">"</span><span class="s2">Eagle</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Talon TSi</span><span class="dl">"</span><span class="p">,</span> <span class="mi">1993</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// Animal properties and method encapsulation</span>
<span class="kd">const</span> <span class="nx">Animal</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Invertebrates</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// Default value of properties</span>
  <span class="nf">displayType</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Method which will display type of Animal</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="c1">// Create new animal type called animal1</span>
<span class="kd">const</span> <span class="nx">animal1</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nx">Animal</span><span class="p">);</span>
<span class="nx">animal1</span><span class="p">.</span><span class="nf">displayType</span><span class="p">();</span> <span class="c1">// Logs: Invertebrates</span>

<span class="c1">// Create new animal type called fish</span>
<span class="kd">const</span> <span class="nx">fish</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nx">Animal</span><span class="p">);</span>
<span class="nx">fish</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Fishes</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">fish</span><span class="p">.</span><span class="nf">displayType</span><span class="p">();</span> <span class="c1">// Logs: Fishes</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="classes">8.5. Classes</h3>
<div class="paragraph">
<p>In JavaScript, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">classes</a> are mainly an abstraction over the existing <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">prototypical inheritance mechanism</a> — all patterns are convertible to prototype-based inheritance.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Classes themselves are normal JavaScript values as well, which are syntax sugar over constructor functions, and have their own prototype chains.</p>
</li>
<li>
<p>Classes are in fact "special functions", and just as defining function expressions and function declarations, a class can be defined in two ways: a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/class">class expression</a> or a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class">class declaration</a>.</p>
</li>
<li>
<p>Unlike function declarations, class declarations have the same <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#temporal_dead_zone_tdz">temporal dead zone</a> restrictions as <code>let</code> or <code>const</code> and behave as if they are not hoisted.</p>
</li>
<li>
<p>The body of a class is executed in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">strict mode</a> even without the <code>"use strict"</code> directive.</p>
</li>
<li>
<p>A class element can be characterized by three aspects:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Kind: Getter, setter, method, or field</p>
</li>
<li>
<p>Location: Static or instance</p>
</li>
<li>
<p>Visibility: Public or private</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>A class can have any number of <code>static {}</code> initialization blocks in its class body, which are evaluated, along with any interleaved static field initializers, in the order they are declared. Any static initialization of a super class is performed first, before that of its sub classes.</p>
</li>
<li>
<p>A derived class is declared with an <code>extends</code> clause, which indicates the class it extends from.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// same as implicityly: class MyClass extends Object { ... }</span>
<span class="kd">class</span> <span class="nc">MyClass</span> <span class="p">{</span>
  <span class="c1">// Constructor</span>
  <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Constructor body</span>
  <span class="p">}</span>
  <span class="c1">// Instance field</span>
  <span class="nx">myField</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">;</span>
  <span class="c1">// Instance method</span>
  <span class="nf">myMethod</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// myMethod body</span>
  <span class="p">}</span>
  <span class="c1">// Static field</span>
  <span class="kd">static</span> <span class="nx">myStaticField</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">;</span>
  <span class="c1">// Static method</span>
  <span class="kd">static</span> <span class="nf">myStaticMethod</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// myStaticMethod body</span>
  <span class="p">}</span>
  <span class="c1">// Static block</span>
  <span class="kd">static</span> <span class="p">{</span>
    <span class="c1">// Static initialization code</span>
  <span class="p">}</span>
  <span class="c1">// Fields, methods, static fields, and static methods all have</span>
  <span class="c1">// "private" forms</span>
  <span class="nx">#myPrivateField</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">;</span>
  <span class="c1">// Instance getter</span>
  <span class="kd">get</span> <span class="nf">myPrivateField</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">#myPrivateField</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// Instance setter</span>
  <span class="kd">set</span> <span class="nf">myPrivateField</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">#myPrivateField</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="promises-and-asynchronous-programming">9. Promises and asynchronous programming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JavaScript has a runtime model based on an <strong>event loop</strong>, which is responsible for executing the code, collecting and processing events, and executing queued sub-tasks.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Event_loop/the_javascript_runtime_environment_example.svg" alt="A diagram showing how stacks are comprised of frames, heaps are comprised of objects, and queues are comprised of messages." width="295px" height="271px">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Function calls form a stack of <em>frames</em>.</p>
</li>
<li>
<p>Objects are allocated in a <em>heap</em> which is just a name to denote a large (mostly unstructured) region of memory.</p>
</li>
<li>
<p>A JavaScript runtime uses a message <em>queue</em>, which is a list of messages to be processed one by one by an associated function.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// waits synchronously for a message to arrive</span>
<span class="k">while </span><span class="p">(</span><span class="nx">queue</span><span class="p">.</span><span class="nf">waitForMessage</span><span class="p">())</span> <span class="p">{</span>
  <span class="c1">// Each message is processed completely before any other message is processed.</span>
  <span class="nx">queue</span><span class="p">.</span><span class="nf">processNextMessage</span><span class="p">();</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Handling I/O is typically performed via <em>events</em> and <em>callbacks</em>, so when the application is waiting for an <code>IndexedDB</code> query to return or a <code>fetch()</code> request to return, it can still process other things like user input.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">XMLHttpRequest</span><span class="p">();</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">loadend</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Finished with status: </span><span class="p">${</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">https://httpbin.org/headers</span><span class="dl">"</span><span class="p">,</span>
<span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nf">send</span><span class="p">();</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">fetchPromise</span> <span class="o">=</span> <span class="nf">fetch</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">https://httpbin.org/headers</span><span class="dl">"</span><span class="p">,</span>
<span class="p">);</span>

<span class="nx">fetchPromise</span><span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Received response: </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="promises">9.1. Promises</h3>
<div class="paragraph">
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> is an object representing the eventual completion or failure of an asynchronous operation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/promises.png" alt="Flowchart showing how the Promise state transitions between pending, fulfilled, and rejected via then/catch handlers. A pending promise can become either fulfilled or rejected. If fulfilled, the &quot;on fulfillment&quot; handler, or first parameter of the then() method, is executed and carries out further asynchronous actions. If rejected, the error handler, either passed as the second parameter of the then() method or as the sole parameter of the catch() method, gets executed." width="801px" height="297px">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>With a promise-based API, the asynchronous function starts the operation and returns a Promise object.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// callback hell</span>
<span class="nf">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://httpbin.org/headers</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span>
      <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">User-Agent</span><span class="dl">'</span><span class="p">]);</span>
      <span class="p">});</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">error</span><span class="p">))</span>
  <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">finally</span><span class="dl">"</span><span class="p">));</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// promise chaining</span>
<span class="nf">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://httpbin.org/headers</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">())</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">headers</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">User-Agent</span><span class="dl">'</span><span class="p">]))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">error</span><span class="p">))</span>
  <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">finally</span><span class="dl">"</span><span class="p">));</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// async and await</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nf">fetchRquestHeaders</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://httpbin.org/headers</span><span class="dl">"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">User-Agent</span><span class="dl">'</span><span class="p">]);</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">finally</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>The <code>Promise()</code> constructor creates <code>Promise</code> objects. It is primarily used to wrap callback-based APIs that do not already support promises.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">new</span> <span class="nc">Promise</span><span class="p">(</span><span class="nx">executor</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>executor</code> is a function to be executed by the constructor. Its signature is expected to be:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">executor</span><span class="p">(</span><span class="nx">resolveFunc</span><span class="p">,</span> <span class="nx">rejectFunc</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Typically, some asynchronous operation that accepts a callback,</span>
  <span class="c1">// like the `readFile` function above</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>It receives two functions as parameters: <code>resolveFunc</code> and <code>rejectFunc</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nf">resolveFunc</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// call on resolved</span>
<span class="nf">rejectFunc</span><span class="p">(</span><span class="nx">reason</span><span class="p">);</span> <span class="c1">// call on rejected</span></code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The <code>value</code> parameter passed to <code>resolveFunc</code> can be another promise object, in which case the newly constructed promise&#8217;s state will be "locked in" to the promise passed.</p>
</li>
<li>
<p>The <code>rejectFunc</code> has semantics close to the <code>throw</code> statement, so reason is typically an <code>Error</code> instance. If the <code>executor</code> function throws an error, <code>reject</code> is called automatically.</p>
</li>
<li>
<p>If either <code>value</code> or <code>reason</code> is omitted, the promise is fulfilled/rejected with <code>undefined</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">readFilePromise</span> <span class="o">=</span> <span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">readFile</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">resolve</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>

<span class="nf">readFilePromise</span><span class="p">(</span><span class="dl">"</span><span class="s2">./data.txt</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to read data</span><span class="dl">"</span><span class="p">));</span></code></pre>
</div>
</div>
</li>
<li>
<p>Turning a callback-based API into a promise-based one</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">myGetAsync</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">XMLHttpRequest</span><span class="p">();</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">resolve</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">reject</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nf">send</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nf">myGetAsync</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/headers</span><span class="dl">'</span><span class="p">).</span><span class="nf">then</span><span class="p">(</span><span class="nx">txt</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">txt</span><span class="p">));</span></code></pre>
</div>
</div>
</li>
<li>
<p>If the <code>executor</code> function throws an error, <code>reject</code> is called automatically.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">alarm</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">delay</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nf">reject</span><span class="p">(</span><span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Alarm delay must not be negative</span><span class="dl">"</span><span class="p">));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nf">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">resolve</span><span class="p">(</span><span class="s2">`Wake up, </span><span class="p">${</span><span class="nx">person</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
      <span class="p">},</span> <span class="nx">delay</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nf">alarm</span><span class="p">(</span><span class="dl">"</span><span class="s2">Jon</span><span class="dl">"</span><span class="p">,</span> <span class="mi">500</span><span class="p">).</span><span class="nf">then</span><span class="p">(</span><span class="nx">m</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">m</span><span class="p">));</span> <span class="c1">// Wake up, Jon!</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Same as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">alarm</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nc">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">delay</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Alarm delay must not be negative</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nf">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">resolve</span><span class="p">(</span><span class="s2">`Wake up, </span><span class="p">${</span><span class="nx">person</span><span class="p">}</span><span class="s2">!`</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">delay</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>async and await</p>
<div class="paragraph">
<p>The <code>async</code> keyword can be used to define an define an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">async function</a> to a given name, and an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/async_function">async function</a> inside an expression. The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await">await</a> operator is used to wait for a Promise and get its fulfillment value inside an async function or at the top level of a module, enabling asynchronous, promise-based behavior to be written in a cleaner style and avoiding the need to explicitly configure promise chains.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">async</span> <span class="kd">function</span> <span class="nf">setAlarm</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">alarm</span><span class="p">(</span><span class="nx">person</span><span class="p">,</span> <span class="nx">delay</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nf">setAlarm</span><span class="p">(</span><span class="dl">"</span><span class="s2">Jon</span><span class="dl">"</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span> <span class="c1">// Wake up, Jon!</span>
<span class="nf">setAlarm</span><span class="p">(</span><span class="dl">"</span><span class="s2">Jon</span><span class="dl">"</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">);</span> <span class="c1">// Alarm delay must not be negative</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="workers">9.2. Workers</h3>
<div class="paragraph">
<p>// TODO</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iterators-and-generators">10. Iterators and generators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In JavaScript an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_generators#iterators"><strong>iterator</strong></a> is an object which defines a sequence and potentially a return value upon its termination, and an object is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_generators#iterables"><strong>iterable</strong></a> if it defines its iteration behavior, such as what values are looped over in a <code>for&#8230;&#8203;of</code> construct. A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator">generator</a> is an object returned by a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">generator function</a> and it conforms to both the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol">iterable protocol</a> and the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol">iterator protocol</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When called, generator functions do not initially execute their code, instead, return a special type of iterator, called a <strong>Generator</strong>.</p>
</li>
<li>
<p>When a value is consumed by calling the generator&#8217;s <code>next</code> method, the Generator function executes until it encounters the <code>yield</code> keyword.</p>
</li>
<li>
<p>The function can be called as many times as desired, and returns a new Generator each time. Each Generator may only be iterated once.</p>
</li>
<li>
<p>In order to be iterable, an object must implement the <code>@@iterator</code>, a zero-argument method, meaning that the object (or one of the objects up its prototype chain) must have a property with a <code>@@iterator</code> key which is available via constant <code>Symbol.iterator</code>.</p>
</li>
<li>
<p>Whenever an object needs to be iterated (such as at the beginning of a <code>for&#8230;&#8203;of</code> loop), its <code>@@iterator</code> method is called with no arguments, and the returned iterator is used to obtain the values to be iterated.</p>
</li>
<li>
<p>Iterables which can iterate only once (such as Generators) customarily return <code>this</code> from their <code>@@iterator</code> method, whereas iterables which can be iterated many times must return a new iterator on each invocation of <code>@@iterator</code>.</p>
</li>
<li>
<p>A simple iterator that encapsulates the state in a closure</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">makeRangeIterator</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">nextValue</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">iterationCount</span> <span class="o">=</span> <span class="nx">count</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">iterator</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nf">next</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">while </span><span class="p">(</span><span class="nx">iterationCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="nx">nextValue</span><span class="p">,</span> <span class="na">done</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
        <span class="nx">iterationCount</span><span class="o">--</span><span class="p">;</span>
        <span class="nx">nextValue</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="p">{</span> <span class="na">done</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="nx">iterator</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">iter</span> <span class="o">=</span> <span class="nf">makeRangeIterator</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="k">while </span><span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">result</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="p">}</span>
<span class="c1">// 0</span>
<span class="c1">// 2</span>
<span class="c1">// 4</span></code></pre>
</div>
</div>
</li>
<li>
<p>A simple iterator that encapsulates the state in a constructor function</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">Range</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">nextValue</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">iterationCount</span> <span class="o">=</span> <span class="nx">count</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">step</span> <span class="o">=</span> <span class="nx">step</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">next</span> <span class="o">=</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
    <span class="k">while </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iterationCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextValue</span><span class="p">,</span> <span class="na">done</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">iterationCount</span><span class="o">--</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">nextValue</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">done</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">iter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="k">while </span><span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">result</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="p">}</span>
<span class="c1">// 0</span>
<span class="c1">// 2</span>
<span class="c1">// 4</span></code></pre>
</div>
</div>
</li>
<li>
<p>An iterator defined with a generator function that NOT need to explicitly maintain the internal state</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span><span class="o">*</span> <span class="nf">makeRangeIterator</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">nextValue</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">iterationCount</span> <span class="o">=</span> <span class="nx">count</span><span class="p">;</span>
  <span class="k">while </span><span class="p">(</span><span class="nx">iterationCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="nx">nextValue</span><span class="p">;</span>
    <span class="nx">iterationCount</span><span class="o">--</span><span class="p">;</span>
    <span class="nx">nextValue</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">iter</span> <span class="o">=</span> <span class="nf">makeRangeIterator</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="k">while </span><span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="nx">result</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nf">next</span><span class="p">();</span>
<span class="p">}</span>
<span class="c1">// 0</span>
<span class="c1">// 2</span>
<span class="c1">// 4</span></code></pre>
</div>
</div>
</li>
<li>
<p>A generator is an iterable object</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span><span class="o">*</span> <span class="nf">makeIterator</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">iter</span> <span class="o">=</span> <span class="nf">makeIterator</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span> <span class="k">in</span> <span class="nx">iter</span><span class="p">);</span>
<span class="c1">// true</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">iter</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]()</span> <span class="o">===</span> <span class="nx">iter</span><span class="p">);</span>
<span class="c1">// true</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">num</span> <span class="k">of</span> <span class="nx">iter</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span>

<span class="c1">// If we change the @@iterator method of `iter` to a function/generator</span>
<span class="c1">// which returns a new iterator/generator object, `iter`</span>
<span class="c1">// can iterate many times</span>
<span class="nx">iter</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="o">*</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>
  <span class="k">yield</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">num</span> <span class="k">of</span> <span class="nx">iter</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 2</span>
<span class="c1">// 1</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">num</span> <span class="k">of</span> <span class="nx">iter</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 2</span>
<span class="c1">// 1</span></code></pre>
</div>
</div>
</li>
<li>
<p>User-defined iterables can be used in <code>for&#8230;&#8203;of</code> loops or the spread syntax as usual</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">myIterable</span> <span class="o">=</span> <span class="p">{</span>
  <span class="o">*</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]()</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">3</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">myIterable</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span>
<span class="c1">// 3</span>

<span class="p">[...</span><span class="nx">myIterable</span><span class="p">];</span> <span class="c1">// [1, 2, 3]</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events">11. Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Events are things that happen in a system that produces (or "fires") a signal of some kind when an event occurs, and provides a mechanism by which an action (event handler) can be automatically taken (that is, some code running) when the event occurs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Event handlers are sometimes called event listeners — they are pretty much interchangeable, although strictly speaking, they work together. The listener listens out for the event happening, and the handler is the code that is run in response to it happening.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Handling a click event</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;button&gt;</span>Change color<span class="nt">&lt;/button&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">btn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">function</span> <span class="nf">random</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">number</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">btn</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">rndCol</span> <span class="o">=</span> <span class="s2">`rgb(</span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2">)`</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">btn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">btn</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">rndCol</span><span class="p">;</span>
<span class="p">});</span></code></pre>
</div>
</div>
<details>
<summary class="title">Details</summary>
<div class="content">
<button>Change color</button>
<script type="application/javascript">
let btn = document.querySelector("button");

function random(number) {
  return Math.floor(Math.random() * (number + 1));
}

btn.addEventListener("click", () => {
  const rndCol = `rgb(${random(255)} ${random(255)} ${random(255)})`;
  const btn = document.querySelector("button");
  btn.style.backgroundColor = rndCol;
});
</script>
</div>
</details>
</li>
<li>
<p>Event handler properties</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
With event handler properties, ONLY one handler can be added for a single event.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">btn</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">rndCol</span> <span class="o">=</span> <span class="s2">`rgb(</span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2">)`</span><span class="p">;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">rndCol</span><span class="p">;</span>
<span class="p">};</span></code></pre>
</div>
</div>
</li>
<li>
<p>Using <code>addEventListener()</code> to add/register listeners</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">function</span> <span class="nf">changeBackground</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">rndCol</span> <span class="o">=</span> <span class="s2">`rgb(</span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2">)`</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">btn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">.eg-addEventListener</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">btn</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">rndCol</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// an event object specified with a name such as event, evt, or e.</span>
<span class="kd">function</span> <span class="nf">changeColor</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nf">preventDefault</span><span class="p">();</span>  <span class="c1">// preventing default behavior</span>
  <span class="kd">const</span> <span class="nx">rndCol</span> <span class="o">=</span> <span class="s2">`rgb(</span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2">)`</span><span class="p">;</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">rndCol</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// adding multiple listeners for a single event</span>
<span class="nx">btn</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">changeBackground</span><span class="p">);</span>
<span class="nx">btn</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">changeColor</span><span class="p">);</span>

<span class="nx">btn</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nf">stopPropagation</span><span class="p">();</span> <span class="c1">// preventing event bubbling</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontSize</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span><span class="s2">em`</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">btn</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">fontWeight</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">+</span> <span class="nx">sign</span> <span class="o">*</span> <span class="nf">random</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="p">},</span> <span class="p">{</span> <span class="na">capture</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span> <span class="c1">// enable event capture</span></code></pre>
</div>
</div>
<details>
<summary class="title">Details</summary>
<div class="content">
<button class="eg-addEventListener">Change color</button>
<script>
btn = document.querySelector(".eg-addEventListener");

function random(number) {
  return Math.floor(Math.random() * (number + 1));
}

function changeBackground() {
  const rndCol = `rgb(${random(255)} ${random(255)} ${random(255)})`;
  const btn = document.querySelector(".eg-addEventListener");
  btn.style.backgroundColor = rndCol;
}

// an event object specified with a name such as event, evt, or e.
function changeColor(e) {
  e.preventDefault();  // preventing default behavior
  const rndCol = `rgb(${random(255)} ${random(255)} ${random(255)})`;
  e.target.style.color = rndCol;
}

// adding multiple listeners for a single event
btn.addEventListener("click", changeBackground);
btn.addEventListener("click", changeColor);

btn.addEventListener("click", (e) => {
  e.stopPropagation(); // preventing event bubbling
  e.target.style.fontSize = `${ Math.random() + 1 }em`;
});

btn.addEventListener("click", (e) => {
  const sign = Math.random() < 0.5 ? 1 : -1;
  e.target.style.fontWeight = 500 + sign * random(200);
}, { capture: true }); // enable event capture
</script>
</div>
</details>
</li>
<li>
<p>Using the <code>removeEventListener()</code> to remove listeners</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">btn</span><span class="p">.</span><span class="nf">removeEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">changeBackground</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Event handlers can also be removed by passing an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal">AbortSignal</a> to <code>addEventListener()</code> and then later calling <code>abort()</code> on the controller owning the <code>AbortSignal</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AbortController</span><span class="p">();</span>

<span class="nx">btn</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">rndCol</span> <span class="o">=</span> <span class="s2">`rgb(</span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2"> </span><span class="p">${</span><span class="nf">random</span><span class="p">(</span><span class="mi">255</span><span class="p">)}</span><span class="s2">)`</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">rndCol</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="na">signal</span><span class="p">:</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span> <span class="p">}</span> <span class="c1">// pass an AbortSignal to this handler</span>
<span class="p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="nx">controller</span><span class="p">.</span><span class="nf">abort</span><span class="p">();</span> <span class="c1">// removes any/all event handlers associated with this controller</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modules">12. Modules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JavaScript modules (also known as “JS modules”, “ES modules” or “ECMAScript modules”) are a major new feature, or rather a collection of new features.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nodejs.org/docs/latest/api/modules.html">CommonJS modules</a> are the original way to package JavaScript code for Node.js. Node.js also supports the ECMAScript modules standard used by browsers and other JavaScript runtimes.</p>
</li>
<li>
<p><a href="https://nodejs.org/docs/latest/api/esm.html">ECMAScript modules</a> are the <a href="https://tc39.github.io/ecma262/#sec-modules">official standard format</a> to package JavaScript code for reuse, and are defined using a variety of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">import</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export">export</a> statements.</p>
</li>
<li>
<p><a href="https://v8.dev/features/modules#mjs">V8&#8217;s documentation</a> recommends using the <code>.mjs</code> extension for modules, but it&#8217;s also recommended to use <code>x.mjs.js</code>, because it is a non-standard file extension, some operating systems might not recognize it.</p>
</li>
<li>
<p>In Node.js, each file is treated as a separate module. For example, consider a file named <code>foo.cjs</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="kd">const</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./circle.cjs</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`The area of a circle of radius 4 is </span><span class="p">${</span><span class="nx">circle</span><span class="p">.</span><span class="nf">area</span><span class="p">(</span><span class="mi">4</span><span class="p">)}</span><span class="s2">`</span><span class="p">);</span></code></pre>
</div>
</div>
</li>
<li>
<p>Every module can have two different types of export, <strong>named export</strong> and <strong>default export</strong>, but only one default export.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// File: lib.mjs</span>

<span class="c1">// export feature declared elsewhere as default</span>
<span class="k">export</span> <span class="p">{</span> <span class="nx">myFunction</span> <span class="nx">as</span> <span class="k">default</span> <span class="p">};</span>
<span class="c1">// This is equivalent to:</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">myFunction</span><span class="p">;</span>

<span class="c1">// export individual features as default</span>
<span class="k">export</span> <span class="k">default</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="err">{ /* … */ }</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">import</span> <span class="nx">myFunction</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./lib.mjs</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Note the lack of curly braces</span>

<span class="c1">// This is equivalent to:</span>
<span class="k">import</span> <span class="p">{</span> <span class="k">default</span> <span class="nx">as</span> <span class="nx">myFunction</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./lib.mjs</span><span class="dl">"</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>A more convenient way of exporting all the items is to use a single export statement at the end of the module file, followed by a comma-separated list of the features wrapped in curly braces.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="k">export</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">draw</span><span class="p">,</span> <span class="nx">reportArea</span><span class="p">,</span> <span class="nx">reportPerimeter</span> <span class="p">};</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use the <code>import</code> keyword to import the module from another module.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// File: lib.mjs</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">repeat</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">`</span><span class="p">${</span><span class="nx">string</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">string</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nf">shout</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">string</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">()}</span><span class="s2">!`</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// File: main.mjs</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">repeat</span><span class="p">,</span> <span class="nx">shout</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./lib.mjs</span><span class="dl">'</span><span class="p">;</span>
<span class="nf">repeat</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// → 'hello hello'</span>
<span class="nf">shout</span><span class="p">(</span><span class="dl">'</span><span class="s1">Modules in action</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// → 'MODULES IN ACTION!'</span></code></pre>
</div>
</div>
</li>
<li>
<p>Renaming imports and exports with <code>as</code> to avoid naming conflicts</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// inside module.js</span>
<span class="k">export</span> <span class="p">{</span> <span class="nx">function1</span> <span class="nx">as</span> <span class="nx">newFunctionName</span><span class="p">,</span> <span class="nx">function2</span> <span class="nx">as</span> <span class="nx">anotherNewFunctionName</span> <span class="p">};</span>

<span class="c1">// inside main.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">newFunctionName</span><span class="p">,</span> <span class="nx">anotherNewFunctionName</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./modules/module.js</span><span class="dl">"</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// inside module.js</span>
<span class="k">export</span> <span class="p">{</span> <span class="nx">function1</span><span class="p">,</span> <span class="nx">function2</span> <span class="p">};</span>

<span class="c1">// inside main.js</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">function1</span> <span class="nx">as</span> <span class="nx">newFunctionName</span><span class="p">,</span>
  <span class="nx">function2</span> <span class="nx">as</span> <span class="nx">anotherNewFunctionName</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./modules/module.js</span><span class="dl">"</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// import module's features inside a module object</span>
<span class="k">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">Module</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./modules/module.js</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">Module</span><span class="p">.</span><span class="nf">function1</span><span class="p">();</span>
<span class="nx">Module</span><span class="p">.</span><span class="nf">function2</span><span class="p">();</span></code></pre>
</div>
</div>
</li>
<li>
<p>When importing modules, the string that specifies the location of the module is called the <strong>“module specifier”</strong> or the “import specifier”, that the JavaScript environment can resolve to a path to the module file.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// For now, module specifiers must be full URLs, or relative URLs starting with `/`, `./`, or `../`.</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">name</span> <span class="nx">as</span> <span class="nx">squareName</span><span class="p">,</span> <span class="nx">draw</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./shapes/square.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">name</span> <span class="nx">as</span> <span class="nx">circleName</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">https://example.com/shapes/circle.js</span><span class="dl">"</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type/importmap">Import maps</a> allow developers to instead specify almost any text they want in the module specifier when importing a module; the map provides a corresponding value that will replace the text when the module URL is resolved.</p>
<div class="ulist">
<ul>
<li>
<p>The import map is defined using a JSON object inside a <code>&lt;script&gt;</code> element with the <code>type</code> attribute set to <code>importmap</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">importmap</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="p">{</span>
    <span class="dl">"</span><span class="s2">imports</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">shapes</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./shapes/square.js</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">shapes/square</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./modules/shapes/square.js</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://example.com/shapes/square.js</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./shapes/square.js</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://example.com/shapes/</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/shapes/square/</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">../shapes/square</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./shapes/square.js</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>There can only be one import map in the document, and because it is used to resolve which modules are loaded in both static and dynamic imports, it must be declared before any <code>&lt;script&gt;</code> elements that import modules.</p>
</li>
<li>
<p>Note that the import map only applies to the document — the specification does not cover how to apply an import map in a worker or worklet context.</p>
</li>
<li>
<p>If there is no trailing forward slash on the module specifier key then the whole module specifier key is matched and substituted.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// Bare module names as module specifiers</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">name</span> <span class="nx">as</span> <span class="nx">squareNameOne</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">shapes</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">name</span> <span class="nx">as</span> <span class="nx">squareNameTwo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">shapes/square</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Remap a URL to another URL</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">name</span> <span class="nx">as</span> <span class="nx">squareNameThree</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">https://example.com/shapes/square.js</span><span class="dl">"</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>If the module specifier has a trailing forward slash then the value must have one as well, and the key is matched as a "path prefix".</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// Remap a URL as a prefix ( https://example.com/shapes/)</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">name</span> <span class="nx">as</span> <span class="nx">squareNameFour</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">https://example.com/shapes/moduleshapes/square.js</span><span class="dl">"</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Using JS modules in the browser.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="c">&lt;!-- Use a `&lt;script&gt;` element as a module by setting the `type` attribute to `module`. --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span> <span class="na">src=</span><span class="s">"main.mjs"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- Browsers that understand type="module" ignore scripts with a `nomodule` attribute. --&gt;</span>
<span class="nt">&lt;script </span><span class="na">nomodule</span> <span class="na">defer</span> <span class="na">src=</span><span class="s">"fallback.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="c">&lt;!-- embed the module's script directly into the HTML file --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span><span class="nt">&gt;</span>
  <span class="cm">/* JavaScript module code here */</span>
<span class="nt">&lt;/script&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Modules are a little different from classic scripts:</p>
<div class="ulist">
<ul>
<li>
<p>Modules have <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">strict mode</a> enabled by default.</p>
</li>
<li>
<p>HTML-style comment syntax is not supported in modules, although it works in classic scripts.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// Don’t use HTML-style comment syntax in JavaScript!</span>
<span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="c">&lt;!--</span> <span class="nl">TODO</span><span class="p">:</span> <span class="nx">Rename</span> <span class="nx">x</span> <span class="nx">to</span> <span class="nx">y</span><span class="p">.</span>
<span class="c1">// Use a regular single-line comment instead:</span>
<span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// TODO: Rename x to y.</span></code></pre>
</div>
</div>
</li>
<li>
<p>Modules have a lexical top-level scope. This means that for example, running <code>var foo = 42</code>; within a module does <em>NOT</em> create a global variable named <code>foo</code>, accessible through <code>window.foo</code> in a browser, although that would be the case in a classic script.</p>
</li>
<li>
<p>Similarly, the <code>this</code> within modules does not refer to the global <code>this</code>, and instead is <code>undefined</code>. (Use <a href="https://v8.dev/features/globalthis">globalThis</a> if you need access to the global <code>this</code>.)</p>
</li>
<li>
<p>The new static <code>import</code> and <code>export</code> syntax is only available within modules — it doesn’t work in classic scripts.</p>
</li>
<li>
<p><a href="https://v8.dev/features/top-level-await">Top-level await</a> is available in modules, but not in classic scripts. Relatedly, <code>await</code> cannot be used as a variable name anywhere in a module, although variables in classic scripts can be named <code>await</code> outside of async functions.</p>
</li>
<li>
<p>Also, module scripts and their dependencies are fetched with CORS. This means that any cross-origin module scripts must be served with the proper headers, such as <code>Access-Control-Allow-Origin: *</code>. This is not true for classic scripts. For example, the <code>file://</code> URL will run into CORS errors.</p>
</li>
<li>
<p>There is no need to use the <code>defer</code> attribute when loading a module script; modules are deferred automatically.</p>
<div class="imageblock">
<div class="content">
<img src="https://v8.dev/_img/modules/async-defer.svg" alt="Modules are deferred by default" width="75%" height="75%">
</div>
</div>
</li>
<li>
<p>The <code>async</code> attribute does not work for inline classic scripts, but it does work for inline <code>&lt;script type="module"&gt;</code>.</p>
</li>
<li>
<p>Modules are only executed once, even if they have been referenced in multiple <code>&lt;script&gt;</code> tags.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"classic.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"classic.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- classic.js executes multiple times. --&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span> <span class="na">src=</span><span class="s">"module.mjs"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span> <span class="na">src=</span><span class="s">"module.mjs"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span><span class="nt">&gt;</span><span class="k">import</span> <span class="dl">'</span><span class="s1">./module.mjs</span><span class="dl">'</span><span class="p">;</span><span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- module.mjs executes only once. --&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The function <code>import()</code> with a path to the module as a parameter returns a Promise which fulfills with a module object, and can be used for dynamic module loading.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// dynamic module loading</span>
<span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./modules/myModule.js</span><span class="dl">"</span><span class="p">).</span><span class="nf">then</span><span class="p">((</span><span class="nx">module</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Do something with the module.</span>
<span class="p">});</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">module</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="p">(</span><span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">moduleSpecifier</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">./lib.mjs</span><span class="dl">'</span><span class="p">;</span>
    <span class="kd">const</span> <span class="p">{</span><span class="nx">repeat</span><span class="p">,</span> <span class="nx">shout</span><span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="k">import</span><span class="p">(</span><span class="nx">moduleSpecifier</span><span class="p">);</span>
    <span class="nf">repeat</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// → 'hello hello'</span>
    <span class="nf">shout</span><span class="p">(</span><span class="dl">'</span><span class="s1">Dynamic import in action</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// → 'DYNAMIC IMPORT IN ACTION!'</span>
  <span class="p">})();</span>
<span class="o">&lt;</span><span class="sr">/script&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Dynamic import is permitted in the browser main thread, and in shared and dedicated workers. However <code>import()</code> will throw if called in a service worker or worklet.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Import declarations are hoisted</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="js"><span class="c1">// …</span>
<span class="kd">const</span> <span class="nx">myCanvas</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Canvas</span><span class="p">(</span><span class="dl">"</span><span class="s2">myCanvas</span><span class="dl">"</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">320</span><span class="p">);</span>
<span class="nx">myCanvas</span><span class="p">.</span><span class="nf">create</span><span class="p">();</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Canvas</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./modules/canvas.js</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">myCanvas</span><span class="p">.</span><span class="nf">createReportList</span><span class="p">();</span>
<span class="c1">// …</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="volta-the-hassle-free-javascript-tool-manager">13. Volta: The Hassle-Free JavaScript Tool Manager</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>install Volta</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># Unix</span>
curl https://get.volta.sh | bash
<span class="nb">source</span> ~/.bashrc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="powershell"><span class="c"># Windows</span><span class="w">
</span><span class="n">winget</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">Volta.Volta</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Installing Volta on Windows via Archive Zip</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the Volta release for Windows from the <a href="https://github.com/volta-cli/volta/releases">official releases page</a>.</p>
</li>
<li>
<p>Extract and copy the following files to <code>%AppData%/Volta/bin</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>volta.exe</code></p>
</li>
<li>
<p><code>volta-migrate.exe</code></p>
</li>
<li>
<p><code>volta-shim.exe</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Add the <code>%AppData%/Volta/bin</code> directory to the current user or system PATH.</p>
</li>
<li>
<p>Set up Volta shims</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For Command Prompt and PowerShell, create the following batch files in <code>%AppData%/Volta/bin</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bat"><span class="c">rem node.bat</span>
@echo <span class="na">off</span>
<span class="kd">volta</span><span class="err">.exe</span> <span class="nb">run</span> <span class="kd">node</span> <span class="err">%</span><span class="o">*</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="c">rem npm.bat</span>
@echo <span class="na">off</span>
<span class="kd">volta</span><span class="err">.exe</span> <span class="nb">run</span> <span class="kd">npm</span> <span class="err">%</span><span class="o">*</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="c">rem npx.bat</span>
@echo <span class="na">off</span>
<span class="kd">volta</span><span class="err">.exe</span> <span class="nb">run</span> <span class="kd">npx</span> <span class="err">%</span><span class="o">*</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="c">rem yarn.bat</span>
@echo <span class="na">off</span>
<span class="kd">volta</span><span class="err">.exe</span> <span class="nb">run</span> <span class="kd">yarn</span> <span class="err">%</span><span class="o">*</span></code></pre>
</div>
</div>
</li>
<li>
<p>For Git Bash, add the following aliases to the <code>.bashrc</code> or <code>.bash_profile</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c"># Volta aliases for Node.js tools</span>
<span class="nb">alias </span><span class="nv">node</span><span class="o">=</span><span class="s2">"volta.exe run node"</span>
<span class="nb">alias </span><span class="nv">npm</span><span class="o">=</span><span class="s2">"volta.exe run npm"</span>
<span class="nb">alias </span><span class="nv">npx</span><span class="o">=</span><span class="s2">"volta.exe run npx"</span>
<span class="nb">alias </span><span class="nv">yarn</span><span class="o">=</span><span class="s2">"volta.exe run yarn"</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Verification, after installation, start a new terminal and run:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">volta <span class="nb">install </span>node <span class="o">&amp;&amp;</span> node <span class="nt">--version</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>(Optional) generate Volta completions</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">volta completions bash <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc</code></pre>
</div>
</div>
</li>
<li>
<p>install Node</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># select a specific version</span>
volta <span class="nb">install </span>node@22.5.1

<span class="c"># use the latest LTS version</span>
volta <span class="nb">install </span>node</code></pre>
</div>
</div>
</li>
<li>
<p>pin Node engines</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="py"><span class="n">volta</span> <span class="n">pin</span> <span class="n">node</span><span class="o">@</span><span class="mf">20.16</span>
<span class="n">volta</span> <span class="n">pin</span> <span class="n">yarn</span><span class="o">@</span><span class="mf">1.19</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><em>package.json</em></div>
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="nl">"volta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"node"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.16.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"yarn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.19.2"</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>start using Node, Npm, Npx</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span><span class="nb">type </span>npm npx node
<span class="go">npm is /home/x/.volta/bin/npm
npx is /home/x/.volta/bin/npx
node is hashed (/home/x/.volta/bin/node)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">npm <span class="nb">help help</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="npm">14. npm</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>npm is a <a href="https://npmjs.com/">website</a> used to discover packages, set up profiles, and manage other aspects of the npm experience.</p>
</li>
<li>
<p>npm is a <a href="https://docs.npmjs.com/misc/registry">registry</a> that provides a large public database of JavaScript software and the meta-information surrounding it.</p>
</li>
<li>
<p>npm is a <a href="https://docs.npmjs.com/cli/npm">CLI</a> that runs from a terminal as the standard package manager for Node.js.</p>
</li>
<li>
<p>A <strong>package</strong> is a folder tree described by a <code>package.json</code> file. The package consists of the folder containing the <code>package.json</code> file and all subfolders until the next folder containing another <code>package.json</code> file, or a folder named <code>node_modules</code>.</p>
</li>
<li>
<p>Packages can be unscoped or scoped to a user or organization, and scoped packages can be private or public.</p>
<div class="ulist">
<ul>
<li>
<p>A scoped package is listed as a dependent in a <code>package.json</code> file preceded by a scope name which is everything between the <code>@</code> and the <code>/</code>.</p>
</li>
<li>
<p>Unscoped packages are always public.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <strong>module</strong> is any file or directory in the <code>node_modules</code> directory that can be loaded by the Node.js <code>require()</code> or <code>import()</code> function.</p>
</li>
<li>
<p>A <code>package.json</code> file must contain <code>"name"</code> and <code>"version"</code> fields.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="manage-the-npm-configuration-files">14.1. Manage the npm configuration files</h3>
<div class="paragraph">
<p>npm gets its config settings from the command line, environment variables, and <a href="https://docs.npmjs.com/cli/v10/configuring-npm/npmrc">npmrc</a> files. For a list of available configuration options, see <a href="https://docs.npmjs.com/cli/v10/using-npm/config">config</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="none">npm config set &lt;key&gt;=&lt;value&gt; [&lt;key&gt;=&lt;value&gt; ...]
npm config get [&lt;key&gt; [&lt;key&gt; ...]]
npm config delete &lt;key&gt; [&lt;key&gt; ...]
npm config list [--json]
npm config edit
npm config fix

alias: c</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Echo the config value(s) to stdout</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm config get cache prefix global registry
<span class="go">cache=/home/x/.npm
prefix=/home/x/.volta/tools/image/node/20.12.2
global=false
registry=https://registry.npmjs.org/</span></code></pre>
</div>
</div>
</li>
<li>
<p>config a custom registry</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">npm config get registry <span class="c"># https://registry.npmjs.org/</span>
npm config <span class="nb">set </span>registry https://registry.npmmirror.com
<span class="nb">cat</span> ~/.npmrc <span class="c"># registry=https://registry.npmmirror.com</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-package-json-file">14.2. Creating a package.json file</h3>
<div class="ulist">
<ul>
<li>
<p><code>npm init</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="none">npm init &lt;package-spec&gt; (same as `npx &lt;package-spec&gt;`)
npm init &lt;@scope&gt; (same as `npx &lt;@scope&gt;/create`)

aliases: create, innit</code></pre>
</div>
</div>
</li>
<li>
<p>Creating a scoped public package</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">npm init <span class="nt">--scope</span><span class="o">=</span>@foo <span class="nt">--yes</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"@foo/hello"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo </span><span class="se">\"</span><span class="s2">Error: no test specified</span><span class="se">\"</span><span class="s2"> &amp;&amp; exit 1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p>To publish a scoped package with public visibility, use <code>npm publish --access public</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">npm publish <span class="nt">--access</span> public</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="specifying-dependencies-and-devdependencies-in-a-package-json-file">14.3. Specifying dependencies and devDependencies in a package.json file</h3>
<div class="ulist">
<ul>
<li>
<p><code>npm install</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="none">npm install [&lt;package-spec&gt; ...]

aliases: add, i, in, ins, inst, insta, instal, isnt, isnta, isntal, isntall</code></pre>
</div>
</div>
</li>
<li>
<p>To add an entry to the <code>"dependencies"</code> attribute of a <code>package.json</code> file, on the command line, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">npm install &lt;package-name&gt;[@&lt;version&gt;] [--save-prod]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm <span class="nb">install</span> @azure/msal-browser
<span class="go">
added 2 packages, and audited 3 packages in 4s

found 0 vulnerabilities
</span><span class="gp">$</span><span class="w"> </span><span class="nb">cat </span>package.json
<span class="go">{
. . .
  "dependencies": {
    "@azure/msal-browser": "^3.13.0"
  }
}</span></code></pre>
</div>
</div>
</li>
<li>
<p>To add an entry to the <code>"devDependencies"</code> attribute of a <code>package.json</code> file, on the command line, run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">npm install &lt;package-name&gt;[@&lt;version&gt;] --save-dev</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm <span class="nb">install </span>vite@^5 <span class="nt">--save-dev</span>
<span class="go">
added 10 packages, and audited 13 packages in 2s

3 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
</span><span class="gp">$</span><span class="w"> </span><span class="nb">cat </span>package.json
<span class="go">{
. . .
  "devDependencies": {
    "vite": "^5.2.9"
  }
}</span></code></pre>
</div>
</div>
</li>
<li>
<p>Using <a href="http://semver.org/">semantic versioning</a>, see also the <a href="https://semver.npmjs.com/">npm semver calculator</a></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm <span class="nb">install </span>vite <span class="nt">--save-dev</span>
<span class="go">
added 1 package in 2s

3 packages are looking for funding
  run `npm fund` for details
</span><span class="gp">$</span><span class="w"> </span>npm <span class="nb">ls </span>vite
<span class="go">@foo/hello@1.0.0 /path/to/package/hello
└── vite@5.2.9</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the caret (aka hat) symbol, <code>^</code>, to include everything that does not increment the first non-zero portion of semver</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">^2.2.1
^0.1.0
^0.0.3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm i vite@^5.0.0
<span class="go">
up to date in 1s

3 packages are looking for funding
  run `npm fund` for details
</span><span class="gp">$</span><span class="w"> </span>npm <span class="nb">ls </span>vite
<span class="go">@foo/hello@1.0.0 /path/to/package/hello
└── vite@5.2.9</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use the tilde symbol, <code>~</code>, to include everything greater than a particular version in the same minor range</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">~2.2.0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm i vite@~5.0.0
<span class="go">
changed 3 packages in 4s

3 packages are looking for funding
  run `npm fund` for details
</span><span class="gp">$</span><span class="w"> </span>npm <span class="nb">ls </span>vite
<span class="go">@foo/hello@1.0.0 /path/to/package/hello
└── vite@5.0.13</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use <code>&gt;</code>, <code>&lt;</code>, <code>=</code>, <code>&gt;=</code> or <code><=</code> for comparisons, or <code>-</code> to specify an inclusive range to specify a range of stable versions</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">&gt;2.1
1.0.0 - 1.2.0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm i <span class="s2">"vite@3.0 - 5.0"</span>
<span class="go">
added 2 packages, and changed 4 packages in 3s

3 packages are looking for funding
  run `npm fund` for details
</span><span class="gp">$</span><span class="w"> </span>npm <span class="nb">ls </span>vite
<span class="go">@foo/hello@1.0.0 /path/to/package/hello
└── vite@5.0.13</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use <code>||</code> to combine multiple sets of versions</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">^2 &lt;2.2 || &gt; 2.3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm i <span class="s2">"vite@^2 &lt;2.2 || &gt; 2.3"</span>
<span class="go">
changed 3 packages in 2s

3 packages are looking for funding
  run `npm fund` for details
</span><span class="gp">$</span><span class="w"> </span>npm <span class="nb">ls </span>vite
<span class="go">@foo/hello@1.0.0 /path/to/package/hello
└── vite@5.2.9</span></code></pre>
</div>
</div>
</li>
<li>
<p>Use the pre-release tag to include pre-release versions like <code>alpha</code> and <code>beta</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">1.0.0-rc.1
&gt;1.0.0-alpha
&gt;=1.0.0-rc.0 &lt;1.0.1</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npm i vite@6.0.0-alpha.2
<span class="go">
added 1 package, and changed 3 packages in 2s

3 packages are looking for funding
  run `npm fund` for details
</span><span class="gp">$</span><span class="w"> </span>npm <span class="nb">ls </span>vite
<span class="go">@foo/hello@1.0.0 /path/to/package/hello
└── vite@6.0.0-alpha.2</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="run-arbitrary-package-scripts">14.4. Run arbitrary package scripts</h3>
<div class="ulist">
<ul>
<li>
<p><code>npm run</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="none">npm run-script &lt;command&gt; [-- &lt;args&gt;]

aliases: run, rum, urn</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>run[-script]</code> is used by the test, start, restart, and stop commands from a package&#8217;s <code>"scripts"</code> object.</p>
</li>
<li>
<p>If no "command" is provided, it will list the available scripts.</p>
</li>
<li>
<p>The <code>env</code> script is a special built-in command that can be used to list environment variables that will be available to the script at runtime.</p>
</li>
<li>
<p>When the scripts in the package are printed out, they&#8217;re separated into lifecycle (test, start, restart) and directly-run scripts.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Run a predefined command specified in the <code>"test"</code>, <code>"start"</code>, <code>"restart"</code>, <code>"stop"</code> of a package&#8217;s <code>"scripts"</code> object:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>npm test [-- &lt;args&gt;]
npm start [-- &lt;args&gt;]
npm stop [-- &lt;args&gt;]
npm restart [-- &lt;args&gt;]</code></pre>
</div>
</div>
</li>
<li>
<p>Run a command from a local or remote npm package</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="txt">npx -- &lt;pkg&gt;[@&lt;version&gt;] [args...]
npx --package=&lt;pkg&gt;[@&lt;version&gt;] -- &lt;cmd&gt; [args...]
npx -c '&lt;cmd&gt; [args...]'
npx --package=foo -c '&lt;cmd&gt; [args...]'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>npx create-react-app my-app
<span class="gp">$</span><span class="w"> </span><span class="nb">cd </span>my-app
<span class="gp">$</span><span class="w"> </span>npm run
<span class="go">Lifecycle scripts included in my-app@0.1.0:
  start
    react-scripts start
  test
    react-scripts test

available via `npm run-script`:
  build
    react-scripts build
  eject
    react-scripts eject
</span><span class="gp">$</span><span class="w"> </span><span class="nb">cat </span>package.json
<span class="go">. . .
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
. . .</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="pnpm-fast-disk-space-efficient-package-manager">14.5. pnpm: Fast, disk space efficient package manager</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">volta <span class="nb">install </span>pnpm</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="c"># (optional) set aliases</span>
<span class="nb">alias </span><span class="nv">pn</span><span class="o">=</span><span class="s1">'pnpm'</span> <span class="nv">pnx</span><span class="o">=</span><span class="s1">'pnpx'</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references">15. References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide" class="bare">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide</a></p>
</li>
<li>
<p><a href="https://v8.dev/features/modules" class="bare">https://v8.dev/features/modules</a></p>
</li>
<li>
<p><a href="https://nodejs.org/docs/latest-v20.x/api/modules.html" class="bare">https://nodejs.org/docs/latest-v20.x/api/modules.html</a></p>
</li>
<li>
<p><a href="https://docs.npmjs.com/" class="bare">https://docs.npmjs.com/</a></p>
</li>
<li>
<p><a href="https://docs.npmjs.com/cli/v10/configuring-npm/package-json" class="bare">https://docs.npmjs.com/cli/v10/configuring-npm/package-json</a></p>
</li>
<li>
<p><a href="https://nodejs.org/api/packages.html" class="bare">https://nodejs.org/api/packages.html</a></p>
</li>
</ul>
</div>
</div>
</div>
    
<style>
  .utterances {
      max-width: 100%;
  }
</style>
<script src="https://utteranc.es/client.js"
        repo="ousiax/utterances"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>


  </div>

  <ul class="post-navigation">
    <li>
      
      <a href="/2024/04/02/host-dotnet-in-windows-service/">&laquo; Host .NET in Windows Service</a>
      
    </li>
    <li>
      
      <a href="/2024/04/26/css-learning-notes/">CSS Learning Notes &raquo;</a>
      
    </li>
  </ul>
</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="license">
    <span>Article licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></span>
  </div>
  
  <details open>
    <summary>Extral Links</summary>
    <div>
      
      <a href="https://jekyllrb.com/">Jekyll</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://shopify.github.io/">Liquid</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://docs.asciidoctor.org/">Asciidoctor</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://github.com/qqbuby/">GitHub</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="/feed.xml">RSS</a>
      
      
    </div>
  </details>
  
</footer>


<!-- https://github.com/bryanbraun/anchorjs -->
<script src="/js/anchor.min.js"></script>
<script>
  anchors.add();
  anchors.remove(".site-title");
</script>




  </body>

</html>
